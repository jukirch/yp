<core:FragmentDefinition
    xmlns:dnd="sap.ui.core.dnd"
    xmlns="sap.m"
    xmlns:core="sap.ui.core">
    <Popover
        id="NavigationBarMenuPopover"
        class="sapUiContentPadding"
        placement="Bottom"
        showHeader="false"
        modal="false"
        initialFocus="PinnedSpaces"
        contentWidth="30rem">
        <content>
            <Tree
                id="PinnedSpaces"
                showSeparators="None"
                noDataText="{i18n>NavigationBarMenu.PinnedSpaces.NoDataText}"
                updateFinished="._onPinnedSpacesUpdateFinished">
                <dragDropConfig>
                    <dnd:DragDropInfo
                        sourceAggregation="items"
                        targetAggregation="items"
                        dropPosition="Between"
                        drop=".rearrangePinnedSpaces" />
                </dragDropConfig>
                <headerToolbar>
                    <Toolbar>
                        <Title
                            id="PinnedSpacesTreeTitle"
                            text="{i18n>NavigationBarMenu.PinnedSpaces.Title}" />
                        <ToolbarSpacer />
                        <Button
                            id="UnpinAllSpaces"
                            text="{i18n>NavigationBarMenu.Button.UnpinAll}"
                            tooltip="{i18n>NavigationBarMenu.Button.UnpinAll.Tooltip}"
                            press=".unpinAllSpaces">
                            <customData>
                                <core:CustomData
                                    key="help-id"
                                    value="shell-navigationBarMenu-unpinAllButton"
                                    writeToDom="true" />
                            </customData>
                        </Button>
                    </Toolbar>
                </headerToolbar>
            </Tree>
            <Tree
                id="AllSpaces"
                showSeparators="None"
                noDataText="{i18n>NavigationBarMenu.AllSpaces.NoDataText}"
                items="{path: 'spaces>/', parameters: {arrayNames: ['menuEntries']}, factory: '.allSpacesFactory'}">
                <headerToolbar>
                    <Toolbar>
                        <Title text="{i18n>NavigationBarMenu.AllSpaces.Title}" />
                    </Toolbar>
                </headerToolbar>
                <dependents>
                    <core:Fragment
                        fragmentName="sap.ushell.components.shell.NavigationBarMenu.view.CustomTreeItem"
                        type="XML" />
                </dependents>
            </Tree>
        </content>
    </Popover>
</core:FragmentDefinition>
