/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/merge","sap/base/util/uid","sap/fe/core/converters/ConverterContext","sap/fe/core/helpers/ClassSupport","sap/ui/core/Component","sap/ui/core/Control","sap/ui/core/UIArea"],function(e,t,n,r,o,i,a){"use strict";var s,c,l,u,p,f,d,g,h,m,b,v;var C=r.property;var y=r.implementInterface;var P=r.defineUI5Class;var _=r.aggregation;function w(e,t,n,r){if(!n)return;Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function M(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function x(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;O(e,t)}function O(e,t){O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,n){t.__proto__=n;return t};return O(e,t)}function z(e,t,n,r,o){var i={};Object.keys(r).forEach(function(e){i[e]=r[e]});i.enumerable=!!i.enumerable;i.configurable=!!i.configurable;if("value"in i||i.initializer){i.writable=true}i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i);if(o&&i.initializer!==void 0){i.value=i.initializer?i.initializer.call(o):void 0;i.initializer=undefined}if(i.initializer===void 0){Object.defineProperty(e,t,i);i=null}return i}function D(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}const I="sap.fe.macros.MacroAPI";let j=(s=P("sap.fe.macros.MacroAPI"),c=y("sap.ui.core.IFormContent"),l=C({type:"string"}),u=C({type:"string"}),p=_({type:"sap.ui.core.Control",multiple:false,isDefault:true}),s(f=(d=(v=function(e){x(t,e);function t(n){var r;for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++){i[a-1]=arguments[a]}r=e.call(this,n,...i)||this;w(r,"__implements__sap_ui_core_IFormContent",g,M(r));w(r,"contextPath",h,M(r));w(r,"metaPath",m,M(r));w(r,"content",b,M(r));r.parentContextToBind={};t.registerInstance(M(r));return r}var n=t.prototype;n.init=function t(){e.prototype.init.call(this);if(!this.getModel("_pageModel")){var n;const e=(n=o.getOwnerComponentFor(this))===null||n===void 0?void 0:n.getModel("_pageModel");if(e){this.setModel(e,"_pageModel")}}};t.registerInstance=function e(t){if(!this.instanceMap.get(t.constructor)){this.instanceMap.set(t.constructor,[])}this.instanceMap.get(t.constructor).push(t)};t.render=function e(t,n){t.renderControl(n.content)};n.rerender=function e(){a.rerenderControl(this.content)};n.getDomRef=function t(){const n=this.content;return n?n.getDomRef():e.prototype.getDomRef.call(this)};n.getController=function e(){return this.getModel("$view").getObject().getController()};t.getAPI=function e(t){let n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:I;let r=t.getSource();while(r&&!r.isA(n)&&r.getParent){if(this.isDependentBound){const e=r.getDependents();const t=e.find(e=>e.isA(n));if(t){r=t}else{r=r.getParent()}}else{r=r.getParent()}}if(!r||!r.isA(n)){const e=this.instanceMap.get(this);r=e===null||e===void 0?void 0:e[e.length-1]}let o;if(r&&r.isA(n)){o=r}return o};n.setParentBindingContext=function e(t,n){this.parentContextToBind[t]=n};n.setParent=function t(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}e.prototype.setParent.call(this,...r);Object.keys(this.parentContextToBind).forEach(e=>{this.getParent().bindObject({path:this.parentContextToBind[e],model:e,events:{change:function(){const e=this.getBoundContext();if(e&&!e.getObject()){e.setProperty("",{})}}}})})};return t}(i),v.namespace="sap.fe.macros",v.macroName="Macro",v.fragment="sap.fe.macros.Macro",v.hasValidation=true,v.instanceMap=new WeakMap,v.isDependentBound=false,v.getConverterContext=function(t,r,o){const i=o.appComponent;const a=o.models.viewData&&o.models.viewData.getData();return n.createConverterContextForMacro(t.startingEntitySet.name,o.models.metaModel,i&&i.getDiagnostics(),e,t.contextLocation,a)},v.createBindingContext=function(e,n){const r=`/uid--${t()}`;n.models.converterContext.setProperty(r,e);return n.models.converterContext.createBindingContext(r)},v),g=z(d.prototype,"__implements__sap_ui_core_IFormContent",[c],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),h=z(d.prototype,"contextPath",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),m=z(d.prototype,"metaPath",[u],{configurable:true,enumerable:true,writable:true,initializer:null}),b=z(d.prototype,"content",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),d))||f);return j},false);
//# sourceMappingURL=MacroAPI.js.map