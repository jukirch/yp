/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/buildingBlocks/BuildingBlockSupport","sap/fe/core/buildingBlocks/RuntimeBuildingBlock","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/ClassSupport","sap/m/FormattedText","sap/m/VBox","sap/fe/core/jsx-runtime/jsx"],function(e,t,r,i,n,o,u,a){"use strict";var l,s,d,c,b,p,f,v,h,g,m,y,T,x,w,E,C,z,B;function G(e){return new Promise((t,r)=>{sap.ui.require([e],r=>{if(!(r&&r.__esModule)){r=r===null||!(typeof r==="object"&&e.endsWith("/library"))?{default:r}:r;Object.defineProperty(r,"__esModule",{value:true})}t(r)},e=>{r(e)})})}var R={};var O=n.defineReference;var j=i.or;var k=i.not;var P=i.constant;var _=r.UI;var q=e.defineBuildingBlock;var I=e.blockAttribute;function S(e,t,r,i){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function A(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function F(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;M(e,t)}function M(e,t){M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t};return M(e,t)}function V(e,t,r,i,n){var o={};Object.keys(i).forEach(function(e){o[e]=i[e]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;if("value"in o||o.initializer){o.writable=true}o=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},o);if(n&&o.initializer!==void 0){o.value=o.initializer?o.initializer.call(n):void 0;o.initializer=undefined}if(o.initializer===void 0){Object.defineProperty(e,t,o);o=null}return o}function U(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}let D=(l=q({name:"RichTextEditor",namespace:"sap.fe.macros",libraries:["sap/ui/richtexteditor"]}),s=I({type:"string",required:true}),d=I({type:"string",bindable:true}),c=I({type:"boolean",bindable:true}),b=I({type:"array"}),p=I({type:"boolean",bindable:true}),f=O(),v=O(),h=O(),l(g=(m=function(e){F(t,e);function t(r){var i;i=e.call(this,r)||this;S(i,"id",y,A(i));S(i,"value",T,A(i));S(i,"readOnly",x,A(i));S(i,"buttonGroups",w,A(i));S(i,"required",E,A(i));S(i,"richTextEditor",C,A(i));S(i,"formattedText",z,A(i));S(i,"bbContainer",B,A(i));i.getRTE=()=>a(t.RTEControl,{id:i.id,ref:i.richTextEditor,value:i.value,visible:true,customToolbar:true,editable:true,editorType:"TinyMCE6",showGroupFontStyle:true,showGroupTextAlign:true,showGroupStructure:true,showGroupFont:false,showGroupClipboard:true,showGroupInsert:false,showGroupLink:false,showGroupUndo:false,sanitizeValue:true,wrapping:true,width:"100%",required:i.required,...i.getButtonGroups()});i.getButtonGroups=()=>i.buttonGroups?{buttonGroups:i.buttonGroups.map(e=>{var t;return{name:e.name??"",visible:e.visible==="true",priority:parseInt(e.priority||"",10),customToolbarPriority:parseInt(e.customToolbarPriority||"",10),buttons:((t=e.buttons)===null||t===void 0?void 0:t.split(","))||[]}})}:{};i.onFormattedTextModelContextChange=()=>{if(i.formattedText.current&&i.formattedText.current.getBinding("visible")){var e,t;(e=i.formattedText.current.getBinding("visible"))===null||e===void 0?void 0:e.detachChange(i.toggleRTEAvailability);(t=i.formattedText.current.getBinding("visible"))===null||t===void 0?void 0:t.attachChange(i.toggleRTEAvailability)}};i.toggleRTEAvailability=e=>{var t;const r=!((t=e.getSource())!==null&&t!==void 0&&t.getExternalValue());if(r&&!i.richTextEditor.current){var n;(n=i.bbContainer.current)===null||n===void 0?void 0:n.addItem(i.getRTE())}else if(!r){setTimeout(()=>{var e;(e=i.richTextEditor.current)===null||e===void 0?void 0:e.destroy();i.richTextEditor.current=undefined})}};return i}R=t;t.load=async function r(){await e.load.call(this);if(t.RTEControl===undefined){const{default:e}=await G("sap/ui/richtexteditor/RichTextEditor");t.RTEControl=e}return this};var r=t.prototype;r.getContent=function e(){const t=a(u,{ref:this.bbContainer,width:"100%",height:"100%",children:a(o,{ref:this.formattedText,htmlText:this.value,visible:j(this.readOnly,k(_.IsEditable)),modelContextChange:this.onFormattedTextModelContextChange})});setTimeout(()=>{var e;const t=(e=this.formattedText.current)===null||e===void 0?void 0:e.getVisible();if(t===true){var r,i;(r=this.formattedText.current)===null||r===void 0?void 0:(i=r.getBinding("visible"))===null||i===void 0?void 0:i.fireEvent("change",{oSource:this.formattedText.current})}});return t};return t}(t),y=V(m.prototype,"id",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),T=V(m.prototype,"value",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),x=V(m.prototype,"readOnly",[c],{configurable:true,enumerable:true,writable:true,initializer:function(){return P(false)}}),w=V(m.prototype,"buttonGroups",[b],{configurable:true,enumerable:true,writable:true,initializer:null}),E=V(m.prototype,"required",[p],{configurable:true,enumerable:true,writable:true,initializer:function(){return P(false)}}),C=V(m.prototype,"richTextEditor",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),z=V(m.prototype,"formattedText",[v],{configurable:true,enumerable:true,writable:true,initializer:null}),B=V(m.prototype,"bbContainer",[h],{configurable:true,enumerable:true,writable:true,initializer:null}),m))||g);R=D;return R},false);
//# sourceMappingURL=RichTextEditor.block.js.map