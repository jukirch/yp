/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/macros/field/FieldTemplating","sap/fe/macros/insights/CommonInsightsHelper"],function(e,t){"use strict";var a={};var r=t.createInsightsParams;var n=e.getTextBinding;function s(e){return e.getMeasures().map(e=>({name:e.getLabel(),value:"{"+e.getName()+"}"}))}a.getMeasures=s;function i(e,t){return e.getDimensions().filter(function(t){return e.getVisibleDimensions().includes(t.getName())}).map(e=>{const a=t.getDimensionDataModel(e.getName());const r=a?n(a,{},false,"extension.formatters.sapfe.formatWithBrackets"):undefined;if(e.getTextProperty()){return{name:e.getLabel(),value:"{"+e.getTextProperty()+"}",displayValue:r}}else{return{name:e.getLabel(),value:"{"+e.getName()+"}",displayValue:r}}})}a.getDimensions=i;function o(e){const t=e.getAggregation("_vizFrame").getFeeds();const a=t.map(t=>t.getProperty("values").map(a=>{const r=g(e,a.getProperty("name"),a.getProperty("type"));const n={type:t.getProperty("type"),uid:t.getProperty("uid"),values:[r]};return n}));return a.flat()}a.getFeeds=o;function g(e,t,a){if(a==="Dimension"){const a=e.getDimensions();return a.filter(e=>e.getName()===t)[0].getLabel()||t}else{const a=e.getMeasures();return a.filter(e=>e.getName()===t)[0].getLabel()||t}}async function l(e){var t;const a=e.content;const n=(t=a.getControlDelegate())===null||t===void 0?void 0:t.getInnerChart(a);if(!n){throw new Error("Cannot access chart.")}const g=await r("Analytical",e,a.getFilter());if(!g){return}g.entitySetPath=a.data("targetCollectionPath");g.requestParameters.queryUrl=n.getBinding("data").getDownloadUrl();const l={cardTitle:a.getHeader(),legendVisible:false,chartType:a.getChartType(),measures:s(n),dimensions:i(n,e),feeds:o(n),allowedChartTypes:n.getAvailableChartTypes().available,chartProperties:n.getAggregation("_vizFrame").getVizProperties()};return{...g,content:l}}a.createChartCardParams=l;return a},false);
//# sourceMappingURL=AnalyticalInsightsHelper.js.map