/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/formatters/ValueFormatter","sap/fe/core/helpers/ModelHelper","sap/fe/macros/internal/valuehelp/AdditionalValueHelper","sap/ui/core/Core","sap/ui/core/library"],function(e,t,n,a,i){"use strict";var r=i.ValueState;var o=n.additionalValueHelper;function l(e,t){const n=o.getRelevantRecommendations(e||{},this.getBindingContext(),t)||[];if(n.length>0){return true}return false}l.__functionName="sap.fe.macros.internal.valuehelp.AdditionalValueFormatter#getGrowing";function s(e,n){const a=t.getMetaPathForContext(e);return n.replace(`${a}/`,"")}function u(e,t,n,a){const i=r=>{const o=r.getSource();const l=o.getAllCurrentContexts();if(l.includes(e)){if(e.getObject()){const{valueState:i,valueStateText:r}=c(t,e,n,a);this.setValueStateText(r);this.setValueState(i)}o.detachChange(i)}};e.getBinding().attachChange(i)}function c(e,t,n,a){var i,l;const u=s(t,n);const c=o.getRelevantRecommendations(e,t,n,u);let f;if(e.version===2){f=o.getAdditionalValueFromPropertyPath(u,t,e)}let d=r.None,h="";if(e.version===2&&((i=f)!==null&&i!==void 0&&i.value||(l=f)!==null&&l!==void 0&&l.text)||!e.version&&c!==null&&c!==void 0&&c.length){h=a;d=r.Information}return{valueState:d,valueStateText:h}}function f(e,t,n,i,o){const l=this.getBindingContext();if(!l||!t){return r.None}o=o==="undefined"?undefined:o;const s=this.getValueState();const f=l.isTransient();if(!n||f){return s}const d=!!e&&Object.keys(e).length>0;const h=a.getLibraryResourceBundle("sap.fe.core").getText("RECOMMENDATIONS_DATA_INFO");const g=this.getValueStateText();const v=s===r.Information&&g===h;if(v&&(!d||i||o)){return r.None}const m=d&&(s==r.None||v);if(!i&&!o&&m){var p,V;if(!l.getObject()&&(p=l.getBinding())!==null&&p!==void 0&&(V=p.isA)!==null&&V!==void 0&&V.call(p,"sap.ui.model.odata.v4.ODataListBinding")){u.call(this,l,e,n,h)}else{const{valueState:t,valueStateText:a}=c(e,l,n,h);this.setValueStateText(a);return t}}return s}f.__functionName="sap.fe.macros.internal.valuehelp.AdditionalValueFormatter#formatValueState";function d(t,n){let a;const i=t===null||t===void 0?void 0:t.value;const r=t===null||t===void 0?void 0:t.text;switch(n){case"Value":a=e.formatWithBrackets(i);break;case"Description":a=e.formatWithBrackets(r);break;case"DescriptionValue":a=e.formatWithBrackets(r,i);break;case"ValueDescription":a=e.formatWithBrackets(i,r);break;default:a=e.formatWithBrackets(r,i)}return a}function h(e,t,n,a,i){let r=this.getPlaceholder();a=a==="undefined"?undefined:a;if(n){return a}if(e&&Object.keys(e).length&&e.version===2){var l;const n=this.getBindingContext()||t;const a=(l=this.getBinding("value"))===null||l===void 0?void 0:l.getPath();if(n&&a){const t=o.getAdditionalValueFromPropertyPath(a,n,e);r=d(t,i)}}if(a&&!r){r=a}return r}h.__functionName="sap.fe.macros.internal.valuehelp.AdditionalValueFormatter#formatPlaceholder";const g=function(e){if(g.hasOwnProperty(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++){n[a-1]=arguments[a]}return g[e].apply(this,n)}else{return""}};g.getGrowing=l;g.formatValueState=f;g.formatPlaceholder=h;return g},true);
//# sourceMappingURL=AdditionalValueFormatter.js.map