/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/buildingBlocks/BuildingBlockSupport","sap/fe/core/buildingBlocks/RuntimeBuildingBlock","sap/fe/core/helpers/BindingToolkit","sap/m/Link","sap/m/library","sap/ui/core/CustomData","sap/base/Log","sap/fe/core/jsx-runtime/jsx"],function(e,t,i,r,n,a,o,l){"use strict";var u,s,p,c,b,f,d,m,y,v,g,h,w,z,B,C,M;var k={};var P=i.compileExpression;var T=e.defineBuildingBlock;var O=e.blockAttribute;function j(e,t,i,r){if(!i)return;Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function x(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function L(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;I(e,t)}function I(e,t){I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,i){t.__proto__=i;return t};return I(e,t)}function E(e,t,i,r,n){var a={};Object.keys(r).forEach(function(e){a[e]=r[e]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},a);if(n&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(n):void 0;a.initializer=undefined}if(a.initializer===void 0){Object.defineProperty(e,t,a);a=null}return a}function S(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}let A=(u=T({name:"Email",namespace:"sap.fe.macros"}),s=O({type:"string"}),p=O({type:"boolean",bindable:true}),c=O({type:"boolean",bindable:true}),b=O({type:"string",bindable:true}),f=O({type:"string",bindable:true}),d=O({type:"string"}),m=O({type:"string"}),u(y=(v=function(e){L(i,e);var t=i.prototype;t.isTeamsConnectionActive=async function e(){if(this.appComponent){return this.appComponent.getCollaborativeToolsService().isContactsCollaborationSupported()}else{return false}};t.getMailPopoverFromMsTeamsIntegration=function e(t){if(this.appComponent){return this.appComponent.getCollaborativeToolsService().getMailPopoverFromMsTeamsIntegration(t)}else{return undefined}};function i(t,i,r){var n;n=e.call(this,t,i,r)||this;j(n,"id",g,x(n));j(n,"visible",h,x(n));j(n,"enabled",w,x(n));j(n,"text",z,x(n));j(n,"mail",B,x(n));j(n,"emptyIndicatorMode",C,x(n));j(n,"ariaLabelledBy",M,x(n));n.appComponent=r===null||r===void 0?void 0:r.appComponent;return n}k=i;t.openPopover=async function e(t){t.preventDefault();let i=false;const r=t.getSource();const a=r.data("mail");if(await this.isTeamsConnectionActive()){if(a){try{const e=await this.getMailPopoverFromMsTeamsIntegration(a);e.openBy(r)}catch(e){o.error(`Failed to retrieve Teams minimal popover for email :${e}`);i=true}}}else{i=true}if(i){n.URLHelper.redirect(`mailto:${a}`)}};t.getContent=function e(){const t=`mailto:${this.mail}`;const i=l(r,{id:this.id,visible:this.visible,text:this.text,href:t,enabled:this.enabled,emptyIndicatorMode:this.emptyIndicatorMode,class:"sapMTextRenderWhitespaceWrap",press:async e=>this.openPopover(e)});if(this.ariaLabelledBy){i.addAriaLabelledBy(this.ariaLabelledBy)}i.addCustomData(new a({key:"mail",value:P(this.mail)}));return i};return i}(t),g=E(v.prototype,"id",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),h=E(v.prototype,"visible",[p],{configurable:true,enumerable:true,writable:true,initializer:function(){return"true"}}),w=E(v.prototype,"enabled",[c],{configurable:true,enumerable:true,writable:true,initializer:function(){return"true"}}),z=E(v.prototype,"text",[b],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),B=E(v.prototype,"mail",[f],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),C=E(v.prototype,"emptyIndicatorMode",[d],{configurable:true,enumerable:true,writable:true,initializer:function(){return"Off"}}),M=E(v.prototype,"ariaLabelledBy",[m],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),v))||y);k=A;return k},false);
//# sourceMappingURL=Email.block.js.map