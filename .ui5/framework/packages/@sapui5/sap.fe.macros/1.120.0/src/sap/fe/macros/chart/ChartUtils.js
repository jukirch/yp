/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/CommonUtils","sap/fe/macros/filter/FilterUtils","sap/ui/model/Filter","sap/ui/model/FilterOperator","../CommonHelper","../table/Utils"],function(t,e,i,n,r,s){"use strict";const o={getChartSelections:function(t,e){if(e){this.getChartModel(t,"",{})}const i=this.getChartModel(t,"filters");return i||[]},getChartFilters:function(t){const e=this.getChartSelections(t)||[];return new i(e)},setChartFilters:function(t){const e=this.getChartModel(t,"drillStack")||{};const r=t.getControlDelegate().getInnerChart(t);const s=[];let o;function l(t){for(const e in t){const r=[];for(const s in o){const l=o[s];const a=t[e].data[l];if(a!==undefined){r.push(new i({path:l,operator:n.EQ,value1:a}))}}if(r.length>0){s.push(new i(r,true))}}}if(r){const i=this.getVizSelection(r);o=r.getVisibleDimensions();const n=this.getDimensionsFromDrillStack(r);if(n.length>0){this.getChartModel(t,"drillStack",{});e[n.toString()]=i;this.getChartModel(t,"drillStack",e)}if(i.length>0){l(i)}else{const t=Object.keys(e)||[];const i=e[t[t.length-2]]||[];l(i)}this.getChartModel(t,"filters",s)}},getFilterBarFilterInfo:function(t){return e.getFilterInfo(t.getFilter(),{targetControl:t})},getAllFilterInfo:function(e){const i=this.getFilterBarFilterInfo(e);const n=this.getChartFilters(e);const o=s.getP13nFilters(e);const l=r.parseCustomData(e.data("selectionPresentationVariantPath"))?r.parseCustomData(e.data("selectionPresentationVariantPath")).data:"";const a=l?t.getFiltersInfoForSV(e,l,true):null;if(n&&n.aFilters&&n.aFilters.length){i.filters.push(n)}if(o.length>0){o.forEach(t=>{if(t.aFilters&&t.aFilters.length>0){t.aFilters.forEach(t=>{i.filters.push(t)})}else{i.filters.push(t)}})}if(a&&a.filters.length>0){a.filters.forEach(t=>{i.filters.push(t.aFilters[0])})}return i},getChartSelectedData:function(t){let e=[];switch(t.getSelectionBehavior()){case"DATAPOINT":e=t.getSelectedDataPoints().dataPoints;break;case"CATEGORY":e=t.getSelectedCategories().categories;break;case"SERIES":e=t.getSelectedSeries().series;break}return e},getChartModel:function(t,e,i){const n=t.getBindingContext("internal");if(!n){return false}if(i){n.setProperty(e,i)}return n&&n.getObject(e)},getDimensionsFromDrillStack:function(t){const e=t.getDrillStack()||[];const i=e.pop()||{};return i.dimension||[]},getVizSelection:function(t){return t&&t._getVizFrame()&&t._getVizFrame().vizSelection()||[]}};return o},false);
//# sourceMappingURL=ChartUtils.js.map