/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/HookSupport","sap/fe/core/helpers/ClassSupport","sap/ui/core/mvc/ControllerExtension"],function(e,t,o,r){"use strict";var i,n,a,p,c,s,l;var u={};var f=o.publicExtension;var b=o.methodOverride;var d=o.defineUI5Class;var v=t.hookable;function h(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;y(e,t)}function y(e,t){y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,o){t.__proto__=o;return t};return y(e,t)}function C(e,t,o,r,i){var n={};Object.keys(r).forEach(function(e){n[e]=r[e]});n.enumerable=!!n.enumerable;n.configurable=!!n.configurable;if("value"in n||n.initializer){n.writable=true}n=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},n);if(i&&n.initializer!==void 0){n.value=n.initializer?n.initializer.call(i):void 0;n.initializer=undefined}if(n.initializer===void 0){Object.defineProperty(e,t,n);n=null}return n}let m=(i=d("sap.fe.core.controllerextensions.cards.CollaborationManager"),n=b(),a=b(),p=f(),c=v("before"),i(s=(l=function(t){g(o,t);function o(){var e;e=t.call(this)||this;h(e).init();return e}u=o;var r=o.prototype;r.onInit=async function t(){this.feView=this.base.getView();this.appComponent=e.getAppComponent(this.feView);const o=await this.appComponent.getService("environmentCapabilities");if(!this.appComponent["isCollaborationManagerServiceEnabled"]()||!o.getCapabilities().InsightsSupported){return}await this.getService().connect(this.appComponent.getId(),async()=>{const e=this.collectAvailableCards([]);const t=await Promise.all(e);const o=t.reduce((e,t)=>{e[t.card["sap.app"].id]=t;return e},{});const r=this.appComponent.getId();this.getService().addCardsToCollaborationManager(o,r)})};r.onExit=function e(){this.getService().unregisterProvider()};r.getService=function e(){return this.appComponent.getCollaborationManagerService()};r.collectAvailableCards=function e(t){return t};return o}(r),C(l.prototype,"onInit",[n],Object.getOwnPropertyDescriptor(l.prototype,"onInit"),l.prototype),C(l.prototype,"onExit",[a],Object.getOwnPropertyDescriptor(l.prototype,"onExit"),l.prototype),C(l.prototype,"collectAvailableCards",[p,c],Object.getOwnPropertyDescriptor(l.prototype,"collectAvailableCards"),l.prototype),l))||s);u=m;return u},false);
//# sourceMappingURL=CollaborationManager.js.map