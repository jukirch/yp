/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/CommonUtils","sap/ui/base/Object","sap/ui/core/Component","sap/ui/model/json/JSONModel","./helpers/ClassSupport"],function(e,t,n,i,o,r){"use strict";var a,l,s,c,u,d,p,f,g;var v=r.property;var h=r.defineUI5Class;function b(e,t,n,i){if(!n)return;Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function w(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function m(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_(e,t)}function _(e,t){_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,n){t.__proto__=n;return t};return _(e,t)}function y(e,t,n,i,o){var r={};Object.keys(i).forEach(function(e){r[e]=i[e]});r.enumerable=!!r.enumerable;r.configurable=!!r.configurable;if("value"in r||r.initializer){r.writable=true}r=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},r);if(o&&r.initializer!==void 0){r.value=r.initializer?r.initializer.call(o):void 0;r.initializer=undefined}if(r.initializer===void 0){Object.defineProperty(e,t,r);r=null}return r}function x(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}let C=(a=h("sap.fe.core.ExtensionAPI"),l=v({type:"sap.fe.core.controllerextensions.EditFlow"}),s=v({type:"sap.fe.core.controllerextensions.Routing"}),c=v({type:"sap.fe.core.controllerextensions.IntentBasedNavigation"}),a(u=(d=function(n){m(r,n);function r(e,t){var i;i=n.call(this)||this;b(i,"editFlow",p,w(i));b(i,"routing",f,w(i));b(i,"intentBasedNavigation",g,w(i));i._controller=e;i._view=e.getView();i.extension=i._controller.extension;i.editFlow=i._controller.editFlow;i.routing=i._controller.routing;i._routing=i._controller._routing;i.intentBasedNavigation=i._controller.intentBasedNavigation;i._prefix=t;return i}var a=r.prototype;a.getEditFlow=function e(){return this.editFlow};a.getRouting=function e(){return this.routing};a.getIntentBasedNavigation=function e(){return this.intentBasedNavigation};a.byId=function e(t){let n=this._view.byId(t);if(!n&&this._prefix){n=this._view.byId(`${this._prefix}--${t}`)}if(!n){return undefined}if(!n.isA("sap.fe.macros.MacroAPI")){let e=n.getParent();while(e){if(e.isA("sap.fe.macros.form.FormAPI")){break}if(e.isA("sap.fe.macros.MacroAPI")){throw new Error(`You attempted to access an internal control. This is risky and might change later. Instead access its stable API by using ID ${e.getId()}`)}e=e.getParent()}}return n};a.getModel=function e(n){let i;if(n&&n!=="ui"){i=t.getAppComponent(this._view);if(!i.getManifestEntry("sap.ui5").models[n]){return undefined}}return this._view.getModel(n)};a.addDependent=function e(t){this._view.addDependent(t)};a.removeDependent=function e(t){this._view.removeDependent(t)};a.navigateToTarget=function e(t,n){this._controller._routing.navigateToTarget(n,t)};a.loadFragment=async function n(r){var a,l,s;const c=i.getOwnerComponentFor(this._view);const u=this._view.getModel("_pageModel");const d=this._view.getModel("sap.fe.i18n");const p=(a=this.getModel())===null||a===void 0?void 0:a.getMetaModel();const f=c.getViewData();const g=c.getEntitySet()?`/${c.getEntitySet()}`:c.getContextPath();const v=new o(f),h={bindingContexts:{contextPath:p===null||p===void 0?void 0:p.createBindingContext(r.contextPath||g),converterContext:u.createBindingContext("/",undefined,{noResolve:true}),viewData:f?v.createBindingContext("/"):null},models:{contextPath:p,converterContext:u,metaModel:p,viewData:v,"sap.fe.i18n":d},appComponent:t.getAppComponent(this._view)};let b;if(r.controller&&!((l=r.controller)!==null&&l!==void 0&&(s=l.isA)!==null&&s!==void 0&&s.call(l,"sap.fe.core.ExtensionAPI"))){const e=this.getMetadata().getClass().extend(r.id+"-controller",{});for(const t in r.controller){const n=r.controller[t];if(n!==null&&n!==void 0&&n.bind){e.prototype[t]=n.bind(r.controller)}else{Object.defineProperty(e.prototype,t,{get(){var e;return(e=r.controller)===null||e===void 0?void 0:e[t]},set(e){if(r.controller){r.controller[t]=e}}})}}b=new e(this._controller)}else{b=r.controller??this}const w=t.templateControlFragment(r.name,h,{controller:b,isXML:false,id:r.id});w.then(e=>{if(r.initialBindingContext!==undefined){e.setBindingContext(r.initialBindingContext)}this.addDependent(e);return e}).catch(function(t){e.error(t)});return w};a.updateAppState=async function e(){const t=await this._controller.getAppComponent().getAppStateHandler().createAppState();return t===null||t===void 0?void 0:t.appStateData};return r}(n),p=y(d.prototype,"editFlow",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),f=y(d.prototype,"routing",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),g=y(d.prototype,"intentBasedNavigation",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),d))||u);return C},false);
//# sourceMappingURL=ExtensionAPI.js.map