{"version":3,"file":"SideEffectsServiceFactory.js","names":["sap","ui","define","Log","MetaModelConverter","TypeGuards","PropertyHelper","Service","ServiceFactory","DataModelPathHelper","_exports","getTargetObjectPath","getTargetNavigationPath","enhanceDataModelPath","getAssociatedTextPropertyPath","isProperty","isEntityType","isComplexType","getInvolvedDataModelObjects","convertTypes","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","SideEffectsService","_Service","apply","this","arguments","_proto","init","sideEffectsRegistry","oData","entities","actions","control","recommendationRegistry","roles","isInitialized","initPromise","Promise","resolve","addControlSideEffects","entityType","sideEffect","sourceControlId","controlSideEffect","fullyQualifiedName","entityControlSideEffects","executeAction","triggerAction","context","groupId","action","getModel","bindContext","execute","getBinding","getUpdateGroupId","getConvertedMetaModel","getMetaModel","capabilities","getEntityTypeFromContext","metaModel","metaPath","getMetaPath","getPath","getObject","getODataEntitySideEffects","entityTypeName","getGlobalODataEntitySideEffects","entitySideEffects","globalSideEffects","key","sideEffects","sourceEntities","sourceProperties","push","getODataActionSideEffects","actionName","_this$sideEffectsRegi","undefined","initializeSideEffects","sideEffectSources","properties","convertedMetaModel","entityTypes","forEach","mapFieldAnnotations","retrieveODataEntitySideEffects","retrieveODataActionsSideEffects","mapSideEffectSources","sourcesToSideEffectMappings","source","entityProperties","property","commonAnno","annotations","Common","RecommendationRole","roleType","valueOf","includes","hasOwnProperty","name","input","getRecommendationsMapping","checkIfFieldIsRecommendationRelevant","field","getBindingContext","propertyName","data","sourcePath","split","pop","_targetDataModelObjec","_targetDataModelObjec2","_recommendationRolesF","metaContext","getMetaContext","targetDataModelObject","targetObject","targetEntityTypeName","targetType","recommendationRolesForEntity","removeControlSideEffects","controlId","keys","sEntityType","requestSideEffects","pathExpressions","logRequest","requestSideEffectsForODataAction","_sideEffects$triggerA","_sideEffects$pathExpr","promises","triggerActions","length","map","all","requestSideEffectsForNavigationProperty","navigationProperty","ignoreTriggerActions","baseEntityType","navigationPath","targetProperties","targetEntities","sideEffectsTargets","filter","annotationName","_sideEffects$sourcePr","some","navigation","$NavigationPropertyPath","propertyPath","startsWith","replace","sAnnotationName","concat","sideEffectsTargetDefinition","removeDuplicateTargets","catch","error","getControlEntitySideEffects","getSideEffectWhereEntityIsSource","computeFieldGroupIds","sourceEntityType","sourceProperty","entityFieldGroupIds","sideEffectInfo","getFieldGroupIdForSideEffect","getSideEffectWherePropertyIsSource","addTextProperties","setOfProperties","Set","setOfEntities","target","propertiesToAnalyze","reduce","dataModelPropertyPaths","getDataModelPropertiesFromAPath","dataModelPropertyPath","associatedTextPath","dataModelTextPath","relativeNavigation","targetPath","has","navigationProperties","targetEntitySet","targetEntityType","add","Array","from","convertSideEffects","bindingParameter","TriggerAction","newSideEffects","convertSideEffectsFormat","removeBindingParameter","formatProperties","path","type","value","formatEntities","targetEntity","SourceProperties","SourceEntities","TargetProperties","TargetEntities","dataModelObjectPaths","entitySet","entitySets","find","relatedEntitySet","singletons","singleton","entitySetContext","createBindingContext","dataModelEntitySet","dataModelObjectPath","entityProperty","destroy","oContext","getContext","oComponent","scopeObject","getSideEffectsFromSource","_source$annotations","bindingAlias","isSourceEntityType","commonAnnotation","_source$parameters","parameters","parameter","getSideEffectsAnnotationFromSource","sideEffectAnno","_source$annotations2","annotation","isSideEffectsAnnotation","$Type","targetPaths","paths","debug","bindingParameterName","replaceBindingParameter","RegExp","targetProperty","targetEntitiesPaths","uniqueTargetedEntitiesPath","uniqueTargetProperties","uniqueTargetedEntities","entityPath","oDataSideEffect","sideEffectsSources","sideEffectDefinition","_sideEffectDefinition","sourceEntity","_sourceEntity$$target","$target","entity","qualifier","hasUniqueSourceProperty","isImmediate","sideEffectWithQualifier","getInterface","SideEffectsServiceFactory","_ServiceFactory","_proto2","createInstance","oServiceContext","SideEffectsServiceService"],"sources":["SideEffectsServiceFactory-dbg.js"],"mappings":"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"}