/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/formatters/ValueFormatter","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataFieldFormatters","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters"],function(e,t,n,o,i,a,r){"use strict";var l={};var s=a.getRelativePaths;var d=a.getContextRelativeTargetObjectPath;var v=a.enhanceDataModelPath;var u=i.getLabelForConnectedFields;var c=o.isPropertyPathExpression;var T=o.isPathAnnotationExpression;var f=n.transformRecursively;var p=n.resolveBindingString;var E=n.pathInModel;var m=n.or;var g=n.not;var _=n.isUndefinedExpression;var I=n.isEmpty;var O=n.isConstant;var A=n.ifElse;var y=n.getExpressionFromAnnotation;var N=n.formatWithTypeInformation;var D=n.formatResult;var h=n.constant;var C=n.concat;var F=n.compileExpression;var x=t.UI;var L=t.Draft;const P=function(e,t){return f(e,"PathInModel",e=>{let n=e;if(e.modelName===undefined){const o=v(t,e.path);n=N(o.targetObject,e)}return n})};l.formatValueRecursively=P;const R=e=>{const t=e.targetObject;return c(t)?t.$target:t};const b=e=>{var t,n,o,i,a,r;const l=(t=e.targetEntitySet)===null||t===void 0?void 0:(n=t.annotations)===null||n===void 0?void 0:(o=n.Common)===null||o===void 0?void 0:o.DraftRoot;const s=(i=e.targetEntitySet)===null||i===void 0?void 0:(a=i.annotations)===null||a===void 0?void 0:(r=a.Common)===null||r===void 0?void 0:r.DraftNode;if(!!l||!!s){return g(L.IsNewObject)}return false};const M=e=>e._type==="Constant"?h(!e.value):I(e);const U=function(e,t,n){var o,i,a,l;const d=n===null||n===void 0?void 0:n.displayMode;const v=R(e);const u=d||r.getDisplayMode(e);const c=v===null||v===void 0?void 0:(o=v.annotations)===null||o===void 0?void 0:(i=o.Common)===null||i===void 0?void 0:i.Text;const T=s(e);if(v){t=N(v,t)}let f=[t];if(u!=="Value"&&c){switch(u){case"Description":f=[y(c,T)];break;case"DescriptionValue":const e=(n===null||n===void 0?void 0:n.splitTitleOnTwoLines)===undefined?A(!!((a=c.annotations)!==null&&a!==void 0&&(l=a.UI)!==null&&l!==void 0&&l.TextArrangement),t,h("")):A(!!(n!==null&&n!==void 0&&n.splitTitleOnTwoLines),h(""),y(c,T));f=[y(c,T),e];break;case"ValueDescription":f=[t,A(!!(n!==null&&n!==void 0&&n.splitTitleOnTwoLines),h(""),y(c,T))];break}}return f};const H=function(e,t){return f(e,"PathInModel",e=>{if(e.modelName!==undefined)return e;const n=v(t,e.path);return U(n,e)})};const B=function(t,n){let{TypeName:o}=n;const i=E("T_NEW_OBJECT","sap.fe.i18n");let a=i;if(t.resourceModel.getText("T_NEW_OBJECT",undefined,t.entitySet)===t.resourceModel.getText("T_NEW_OBJECT_DEFAULT",undefined,t.entitySet)){const e=t.resourceModel.getText("T_ANNOTATION_HELPER_DEFAULT_OBJECT_PAGE_HEADER_TITLE",undefined,t.entitySet);a=o?C(e,": ",p(o.toString())):i}return D([a],e.formatTitle)};const $=e=>{var t,n;const o=R(e);if(o&&(t=o.annotations)!==null&&t!==void 0&&(n=t.Core)!==null&&n!==void 0&&n.Computed){return x.IsInactive}else{return h(false)}};const S=function(e,t,n){var o;let i;if(t.$Type==="com.sap.vocabularies.UI.v1.DataField"){var a,r,l,s,d,c;i=y(t.Value);if((a=t.Value)!==null&&a!==void 0&&(r=a.$target)!==null&&r!==void 0&&(l=r.annotations.Common)!==null&&l!==void 0&&(s=l.Text)!==null&&s!==void 0&&(d=s.annotations)!==null&&d!==void 0&&(c=d.UI)!==null&&c!==void 0&&c.TextArrangement){i=H(i,e)}i=P(i,e)}if(t.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((o=t.Target.$target)===null||o===void 0?void 0:o.$Type)==="com.sap.vocabularies.UI.v1.ConnectedFieldsType"){const t=v(e,"$Type/@UI.HeaderInfo/Title/Target/$AnnotationPath");i=u(t,n,false)}return i};const V=function(t,n,o,i,a,r){var l;const s=r||e.formatTitle;let u=E("T_NEW_OBJECT","sap.fe.i18n");let c;let f=false;if(i!==null&&i!==void 0&&(l=i.Title)!==null&&l!==void 0&&l.$Type&&a){c=S(t,i.Title,n);u=B(a,i);if(O(c)&&c.value===""){f=true}}else if(i&&(i.Title===undefined||i.Title.toString()==="")){f=true}if(c&&O(c)){return F(c)}if(T(t.targetObject)){t=v(t,t.targetObject.path)}const p=E(d(t));let I;if(c){I=Array.isArray(c)?c:[c]}else{I=U(t,p,o)}const y=M(I[0]);const N=$(t);const C=D(I,s);c=A(y,A(m(f&&b(t),N),"",A(_(h(r)),A(m(x.IsCreateMode,g(b(t))),u,E("T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO","sap.fe.i18n")),A(g(b(t)),a===null||a===void 0?void 0:a.resourceModel.getText("T_NEW_OBJECT"),a===null||a===void 0?void 0:a.resourceModel.getText("T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO")))),C);return F(c)};l.getTitleBindingExpression=V;return l},false);
//# sourceMappingURL=TitleHelper.js.map