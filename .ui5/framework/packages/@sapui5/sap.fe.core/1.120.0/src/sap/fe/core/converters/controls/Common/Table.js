/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/converters/helpers/Key","sap/fe/core/formatters/TableFormatter","sap/fe/core/formatters/TableFormatterTypes","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/EntitySetHelper","sap/fe/core/templating/FieldControlHelper","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/internal/helpers/ActionHelper","sap/ui/core/Core","../../ManifestSettings","../../helpers/Aggregation","../../helpers/DataFieldHelper","../../helpers/ID","./Criticality","./table/StandardActions"],function(e,t,n,i,o,a,l,r,s,d,u,c,v,f,p,g,m,y,b,h,T,I,P,A,C,D,S){"use strict";var F={};var E=S.isInDisplayMode;var M=S.isDraftOrStickySupported;var O=S.getStandardActionPaste;var N=S.getStandardActionMassEdit;var w=S.getStandardActionInsights;var U=S.getStandardActionDelete;var $=S.getStandardActionCut;var x=S.getStandardActionCreate;var V=S.getRestrictions;var R=S.getMassEditVisibility;var L=S.getInsertUpdateActionsTemplating;var k=S.getDeleteVisibility;var j=S.getCreationRow;var B=S.generateStandardActionsContext;var H=S.StandardActionKeys;var K=D.getMessageTypeFromCriticalityType;var G=C.getTableID;var z=A.isReferencePropertyStaticallyHidden;var W=P.AggregationHelper;var _=I.VisualizationType;var q=I.VariantManagementType;var Q=I.TemplateType;var Y=I.SelectionMode;var J=I.Importance;var X=I.HorizontalAlign;var Z=I.CreationMode;var ee=I.ActionType;var te=b.isMultiValueField;var ne=y.isTimezone;var ie=y.getStaticUnitOrCurrency;var oe=y.getStaticTimezone;var ae=y.getAssociatedUnitProperty;var le=y.getAssociatedTimezoneProperty;var re=y.getAssociatedCurrencyProperty;var se=m.isStaticallyMandatory;var de=m.hasFieldControlNotMandatory;var ue=g.getNonSortablePropertiesRestrictions;var ce=p.getDisplayMode;var ve=f.isPathUpdatable;var fe=f.isPathSearchable;var pe=f.isPathDeletable;var ge=f.getTargetObjectPath;var me=f.getContextPropertyRestriction;var ye=f.enhanceDataModelPath;var be=v.isTypeDefinition;var he=v.isProperty;var Te=v.isPathAnnotationExpression;var Ie=v.isNavigationProperty;var Pe=v.isAnnotationOfType;var Ae=c.replaceSpecialChars;var Ce=c.generate;var De=d.resolveBindingString;var Se=d.pathInModel;var Fe=d.or;var Ee=d.not;var Me=d.isConstant;var Oe=d.ifElse;var Ne=d.getExpressionFromAnnotation;var we=d.formatResult;var Ue=d.equal;var $e=d.constant;var xe=d.compileExpression;var Ve=d.and;var Re=d.EDM_TYPE_MAPPING;var Le=s.UI;var ke=s.Entity;var je=r.MessageType;var Be=a.KeyHelper;var He=o.IssueType;var Ke=o.IssueSeverity;var Ge=o.IssueCategoryType;var ze=o.IssueCategory;var We=i.insertCustomElements;var _e=i.Placement;var qe=i.OverrideType;var Qe=n.removeDuplicateActions;var Ye=n.isActionNavigable;var Je=n.getEnabledForAnnotationAction;var Xe=n.getCopyAction;var Ze=n.getActionsFromManifest;var et=n.dataFieldIsCopyAction;var tt=t.isRatingVisualizationFromDataFieldDefault;var nt=t.isDataPointFromDataFieldDefault;var it=t.isDataFieldTypes;var ot=t.isDataFieldForAnnotation;var at=t.isDataFieldForActionAbstract;var lt=t.isDataField;var rt=t.hasFieldGroupTarget;var st=t.hasDataPointTarget;var dt=t.getTargetValueOnDataPoint;var ut=t.getSemanticObjectPath;var ct=t.getDataFieldDataType;var vt=t.collectRelatedPropertiesRecursively;var ft=t.collectRelatedProperties;var pt;(function(e){e["Default"]="Default";e["Annotation"]="Annotation";e["Slot"]="Slot";e["Computed"]="Computed"})(pt||(pt={}));function gt(e,t,n,i,o){const a=Vt(e,t,n);const l=a.hiddenTableActions;const r=Ze(n.getManifestControlConfiguration(t).actions,n,a.tableActions,o,true,l);const s=a.tableActions.filter(e=>e.type===ee.Copy);const d=a.tableActions.filter(e=>e.type!==ee.Copy);const u=[...d,i.create,...s,i.delete,i.massEdit,i.insights,i.creationRow,i.paste,i.cut];for(const e of Object.values(r.actions)){var c;if(!((c=e.position)!==null&&c!==void 0&&c.anchor)){e.position={anchor:H.Create,placement:_e.Before}}}const v=Object.entries(r.actions);const f=Object.fromEntries(v.filter(e=>{let[t]=e;return t.startsWith("StandardAction::")}));const p=Object.fromEntries(v.filter(e=>{let[t]=e;return!f[t]}));let g=We(u,p,{isNavigable:qe.overwrite,enableOnSelect:qe.overwrite,enableAutoScroll:qe.overwrite,enabled:qe.overwrite,visible:qe.overwrite,defaultValuesExtensionFunction:qe.overwrite,command:qe.overwrite});g=We(g,f,{position:qe.overwrite});return{actions:g,commandActions:r.commandActions}}F.getTableActions=gt;function mt(e,t,n,i){const o=Tn(e,t,n);const a=En(n.getManifestControlConfiguration(t).columns,o,n,n.getAnnotationEntityType(e),i);const l=We(o,a,{width:qe.overwrite,widthIncludingColumnHeader:qe.overwrite,importance:qe.overwrite,horizontalAlign:qe.overwrite,availability:qe.overwrite,isNavigable:qe.overwrite,settings:qe.overwrite,formatOptions:qe.overwrite});return Mn(l,t,n)}F.getTableColumns=mt;const yt=function(e,t,n){const i=new W(e,n);function o(e){return t.find(t=>{const n=t;return n.propertyInfos===undefined&&n.relativePath===e})}if(!i.isAnalyticsSupported()){return undefined}const a=new Set;t.forEach(e=>{const t=e;if(t.unit){a.add(t.unit)}});const l=i.getCustomAggregateDefinitions();const r={};l.forEach(e=>{const t=i._entityType.entityProperties.find(t=>t.name===e.qualifier);if(t){var n,o;const i=(n=e.annotations)===null||n===void 0?void 0:(o=n.Aggregation)===null||o===void 0?void 0:o.ContextDefiningProperties;r[t.name]=i?i.map(e=>e.value):[]}});const s={};t.forEach(e=>{const t=e;if(t.propertyInfos===undefined&&t.relativePath){const e=r[t.relativePath];if(e&&!a.has(t.name)){s[t.name]={defaultAggregate:{},relativePath:t.relativePath};const n=[];e.forEach(e=>{const t=o(e);if(t){n.push(t.name)}});if(n.length){s[t.name].defaultAggregate.contextDefiningProperties=n}}}});return s};F.getAggregateDefinitionsFromEntityType=yt;function bt(e,t,n,i){if(e.control.type==="AnalyticalTable"){const o=yt(t,e.columns,n),a=new W(t,n);if(o){e.enableAnalytics=true;e.enable$select=false;e.enable$$getKeepAliveContext=false;e.aggregates=o;Vn(e);const t=a.getAllowedTransformations();e.enableBasicSearch=t?t.includes("search"):true;e.annotation.groupConditions=xn(i,e.columns,e.control.type);e.annotation.aggregateConditions=kn(i,e.columns)}e.control.type="GridTable"}else if(e.control.type==="ResponsiveTable"){e.annotation.groupConditions=xn(i,e.columns,e.control.type)}else if(e.control.type==="TreeTable"){const i=new W(t,n);const o=i.getAllowedTransformations();e.enableBasicSearch=o?o.includes("search"):true;e.enable$$getKeepAliveContext=true}}F.updateTableVisualizationForType=bt;function ht(e,t){const n=e.getManifestWrapper();if(t&&n.getNavigationConfiguration(t)){const e=n.getNavigationConfiguration(t);if(Object.keys(e).length>0){return t}}const i=e.getDataModelObjectPath();const o=e.getContextPath();const a=n.getNavigationConfiguration(o);if(a&&Object.keys(a).length>0){return o}return i.targetEntitySet?i.targetEntitySet.name:i.startingEntitySet.name}F.getNavigationTargetPath=ht;function Tt(e,t){function n(e){return t.find(t=>{const n=t;return n.propertyInfos===undefined&&n.relativePath===e})}t.forEach(t=>{const i=t;if(i.propertyInfos===undefined&&i.relativePath){const t=e.entityProperties.find(e=>e.name===i.relativePath);if(t){var o,a,l;const e=re(t)||ae(t);const c=le(t);const v=t===null||t===void 0?void 0:(o=t.annotations)===null||o===void 0?void 0:(a=o.Common)===null||a===void 0?void 0:a.Timezone;if(e){const t=n(e.name);i.unit=t===null||t===void 0?void 0:t.name}else{var r,s,d,u;const e=(t===null||t===void 0?void 0:(r=t.annotations)===null||r===void 0?void 0:(s=r.Measures)===null||s===void 0?void 0:s.ISOCurrency)||(t===null||t===void 0?void 0:(d=t.annotations)===null||d===void 0?void 0:(u=d.Measures)===null||u===void 0?void 0:u.Unit);if(e){i.unitText=`${e}`}}if(c){const e=n(c.name);i.timezone=e===null||e===void 0?void 0:e.name}else if(v){i.timezoneText=v.toString()}const f=ce(t),p=(l=t.annotations.Common)===null||l===void 0?void 0:l.Text;if(Te(p)&&f!=="Value"){const e=n(p.path);if(e&&e.name!==i.name){i.textArrangement={textProperty:e.name,mode:f}}}}}})}F.updateLinkedProperties=Tt;function It(e){var t,n,i,o,a,l,r,s,d,u,c,v,f;const p=(t=e.getAnnotationEntityType())===null||t===void 0?void 0:(n=t.annotations)===null||n===void 0?void 0:(i=n.UI)===null||i===void 0?void 0:(o=i.HeaderInfo)===null||o===void 0?void 0:(a=o.Title)===null||a===void 0?void 0:(l=a.Value)===null||l===void 0?void 0:l.path;const g=(r=e.getAnnotationEntityType())===null||r===void 0?void 0:(s=r.annotations)===null||s===void 0?void 0:(d=s.Common)===null||d===void 0?void 0:d.SemanticKey;const m=e===null||e===void 0?void 0:(u=e.getAnnotationEntityType())===null||u===void 0?void 0:(c=u.annotations)===null||c===void 0?void 0:(v=c.UI)===null||v===void 0?void 0:(f=v.HeaderInfo)===null||f===void 0?void 0:f.TypeName;const y=[];if(g){g.forEach(function(e){y.push(e.value)})}return{headerInfoTitlePath:p,semanticKeyColumns:y,headerInfoTypeName:m}}function Pt(e,t,n,i,o,a){const l=ri(e,t,n,o);const{navigationPropertyPath:r}=Kn(t);const s=ht(n,r);const d=n.getManifestWrapper().getNavigationConfiguration(s);const u=mt(e,t,n,d);const c=Ct(e,n);const v=It(n);const f=jn(e,t,n,l,d,a);const p=Bn(e,t,n,l,u,d,f,i,a);const g=gt(e,t,n,f.standardActions,d);const m={type:_.Table,annotation:p,control:l,actions:Qe(g.actions),commandActions:g.commandActions,columns:u,operationAvailableMap:JSON.stringify(c),operationAvailableProperties:St(c,n),headerInfoTitle:v.headerInfoTitlePath,semanticKeys:v.semanticKeyColumns,headerInfoTypeName:v.headerInfoTypeName,enable$select:true,enable$$getKeepAliveContext:true};Tt(n.getAnnotationEntityType(e),u);bt(m,n.getAnnotationEntityType(e),n,i);return m}F.createTableVisualization=Pt;function At(e,t){const n=ri(undefined,"",e,false);const i=jt({},e.getEntityType(),[],[],e,n.type,n.creationMode,[]);const o=Ct(undefined,e);const a=It(e);const l=ht(e,"");const r=e.getManifestWrapper().getNavigationConfiguration(l);const s=jn(undefined,"",e,n,r);const d={type:_.Table,annotation:Bn(undefined,"",e,n,t?[]:i,r,s),control:n,actions:[],columns:i,operationAvailableMap:JSON.stringify(o),operationAvailableProperties:St(o,e),headerInfoTitle:a.headerInfoTitlePath,semanticKeys:a.semanticKeyColumns,headerInfoTypeName:a.headerInfoTypeName,enable$select:true,enable$$getKeepAliveContext:true};Tt(e.getEntityType(),i);bt(d,e.getEntityType(),e);return d}F.createDefaultTableVisualization=At;function Ct(e,t){return h.getOperationAvailableMap(e,"table",t)}function Dt(e){var t,n;const i=V(e);const o=e.getEntitySet();const a=i.isUpdatable;const l=!Me(a.expression)&&a.navigationExpression._type==="Unresolvable";const r=o===null||o===void 0?void 0:(t=o.annotations.Capabilities)===null||t===void 0?void 0:(n=t.UpdateRestrictions)===null||n===void 0?void 0:n.Updatable;const s=Te(r)&&r.path;return l?s:""}function St(e,t){const n=new Set;for(const t in e){const i=e[t];if(i===null){n.add(t)}else if(typeof i==="string"){n.add(i)}}if(n.size){var i,o,a,l,r;const e=t.getEntityType();const s=(i=e.annotations)===null||i===void 0?void 0:(o=i.UI)===null||o===void 0?void 0:(a=o.HeaderInfo)===null||a===void 0?void 0:(l=a.Title)===null||l===void 0?void 0:(r=l.Value)===null||r===void 0?void 0:r.path;if(s){n.add(s)}}return Array.from(n).join(",")}function Ft(e,t,n,i){const o=[];e.forEach(e=>{var a,l;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&e!==null&&e!==void 0&&(a=e.ActionTarget)!==null&&a!==void 0&&a.isBound&&t===(e===null||e===void 0?void 0:e.ActionTarget.sourceEntityType)||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&e.RequiresContext&&(e===null||e===void 0?void 0:(l=e.Inline)===null||l===void 0?void 0:l.valueOf())!==true){var r,s,d;if(typeof((r=e.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:(d=s.Hidden)===null||d===void 0?void 0:d.valueOf())==="object"){o.push(Ue(Mt(e,n,i),false))}}});return o}function Et(e){let t;if(Te(e)){t=e.path}else{t=e}return t}function Mt(e,t,n){var i,o;const a=(i=e.annotations)===null||i===void 0?void 0:(o=i.UI)===null||o===void 0?void 0:o.Hidden;let l=Et(a);if(typeof l==="object"){return $e(false)}else if(typeof l==="string"){if("visible"in e){l=l.substring(1,l.length-1)}if(l.indexOf("/")>0){const e=l.split("/");const n=e[0];if(Ie(t===null||t===void 0?void 0:t.targetObject)&&t.targetObject.partner===n){return Se(e.slice(1).join("/"))}else{return $e(true)}}else if(n){return Se(l)}else{return $e(false)}}return $e(true)}function Ot(e,t,n){return Object.keys(n).some(i=>{if(i===e){var o;if(t!==null&&t!==void 0&&(o=t.ActionTarget)!==null&&o!==void 0&&o.isBound||t!==null&&t!==void 0&&t.RequiresContext){n[e].requiresSelection=true}return true}return false})}function Nt(e,t,n){return e.some(e=>{var i,o,a,l,r,s,d;if((e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(e===null||e===void 0?void 0:(i=e.Inline)===null||i===void 0?void 0:i.valueOf())!==true&&(((o=e.annotations)===null||o===void 0?void 0:(a=o.UI)===null||a===void 0?void 0:(l=a.Hidden)===null||l===void 0?void 0:l.valueOf())===false||((r=e.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:(d=s.Hidden)===null||d===void 0?void 0:d.valueOf())===undefined)){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){var u;const i=Ce(["DataFieldForAction",e.Action]);if(Ot(i,e,t)){return false}return(e===null||e===void 0?void 0:(u=e.ActionTarget)===null||u===void 0?void 0:u.isBound)&&n===(e===null||e===void 0?void 0:e.ActionTarget.sourceEntityType)}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(Ot(`DataFieldForIntentBasedNavigation::${e.SemanticObject}::${e.Action}`,e,t)){return false}return e.RequiresContext}}return false})}function wt(e){const t=Object.keys(e).reduce((t,n)=>{const i=e[n];if(!i.menu){t.push(i)}else{t=[...t,...i.menu.filter(e=>typeof e!=="string")]}return t},[]);return!!t.find(e=>{var t;return e.requiresSelection&&(e.visible===undefined||((t=e.visible)===null||t===void 0?void 0:t.toString())==="true")})}function Ut(e){const t=[];if(e){Object.keys(e).forEach(n=>{const i=e[n];if(i.requiresSelection===true&&i.visible!==undefined){if(typeof i.visible==="string"){var o;t.push(De(i===null||i===void 0?void 0:(o=i.visible)===null||o===void 0?void 0:o.valueOf()))}}})}return t}function $t(e){const t=pe(e.getDataModelObjectPath());const n=ve(e.getDataModelObjectPath());return{isDeletable:!(Me(t)&&t.value===false),isUpdatable:!(Me(n)&&n.value===false)}}F.getCapabilityRestriction=$t;function xt(e,t,n,i,o,a){var l;let r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:$e(false);const s=n.getManifestControlConfiguration(t);let d=(l=s.tableSettings)===null||l===void 0?void 0:l.selectionMode;if(!e||d===Y.None){return Y.None}if(d===Y.ForceMulti){return Y.Multi}else if(d===Y.ForceSingle){return Y.Single}let u=[],c=[];const v=Ze(n.getManifestControlConfiguration(t).actions,n,[],undefined,false);let f,p;if(n.getTemplateType()===Q.ObjectPage){f=pe(n.getDataModelObjectPath());p=f?xe(f,true):f}const g=!Me(r)||r.value!==false;if(!d||d===Y.Auto){d=Y.Multi}if(g){d=d===Y.Single?Y.Single:Y.Multi}if(Nt(e,v.actions,n.getEntityType())||wt(v.actions)){return d}u=Ft(e,n.getEntityType(),n.getDataModelObjectPath(),i);c=Ut(v.actions);if(u.length===0&&c.length===0&&(a||g)){if(!i){if(o.isDeletable||p!=="false"||g){const e=Fe(a||true,r);return xe(Oe(Ve(Le.IsEditable,e),$e(d),$e(Y.None)))}else{return Y.None}}else if(g){return d}else if(o.isDeletable&&a){return xe(Oe(a,$e(d),$e("None")))}else{return Y.None}}else if(!i){if(o.isDeletable||p!=="false"||g){const e=Oe(g&&!o.isDeletable,r,$e(true));return xe(Oe(Ve(Le.IsEditable,e),$e(d),Oe(Fe(...u.concat(c)),$e(d),$e(Y.None))))}else{return xe(Oe(Fe(...u.concat(c)),$e(d),$e(Y.None)))}}else if(o.isDeletable||g){return d}else{return xe(Oe(Fe(...u.concat(c),r),$e(d),$e(Y.None)))}}F.getSelectionMode=xt;function Vt(e,t,n){const i=[];const o=[];const a=Xe(e.filter(e=>et(e)));const l=n.getEntityType().fullyQualifiedName;if(a){var r,s,d;const e=oi(a,l);i.push({type:ee.Copy,annotationPath:n.getEntitySetBasedAnnotationPath(a.fullyQualifiedName),key:Be.generateKeyFromDataField(a),enabled:e?Je(n,a.ActionTarget,true):xe(Ue(Se("numberOfSelectedContexts","internal"),1)),visible:xe(Ee(Ue(Ne((r=a.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:s.Hidden,[],undefined,n.getRelativeModelPathFunction()),true))),text:((d=a.Label)===null||d===void 0?void 0:d.toString())??T.getLibraryResourceBundle("sap.fe.core").getText("C_COMMON_COPY"),isNavigable:true})}e.filter(e=>!et(e)).forEach(e=>{var t,a,r,s,d,u,c,v,f;if(((t=e.annotations)===null||t===void 0?void 0:(a=t.UI)===null||a===void 0?void 0:(r=a.Hidden)===null||r===void 0?void 0:r.valueOf())===true){o.push({type:ee.Default,key:Be.generateKeyFromDataField(e)})}else if(at(e)&&((s=e.Inline)===null||s===void 0?void 0:s.valueOf())!==true&&((d=e.Determining)===null||d===void 0?void 0:d.valueOf())!==true){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":const t={type:ee.DataFieldForAction,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:Be.generateKeyFromDataField(e),visible:xe(Ee(Ue(Ne((u=e.annotations)===null||u===void 0?void 0:(c=u.UI)===null||c===void 0?void 0:c.Hidden,[],undefined,n.getRelativeModelPathFunction()),true))),isNavigable:true};if(oi(e,l)){t.enabled=Je(n,e.ActionTarget,true)}i.push(t);break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":i.push({type:ee.DataFieldForIntentBasedNavigation,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:Be.generateKeyFromDataField(e),visible:xe(Ee(Ue(Ne((v=e.annotations)===null||v===void 0?void 0:(f=v.UI)===null||f===void 0?void 0:f.Hidden,[],undefined,n.getRelativeModelPathFunction()),true)))});break;default:break}}});return{tableActions:i,hiddenTableActions:o}}function Rt(e,t,n){let i=je.None;if(e){if(typeof e==="object"){i=Ne(e)}else{i=K(e)}}const o=[];n===null||n===void 0?void 0:n.keys.forEach(e=>{if(e.name!=="IsActiveEntity"){o.push(Se(e.name,undefined))}});return we([i,Se(`filteredMessages`,"internal"),t&&ke.HasActive,t&&ke.IsActive,`${t}`,...o],l.rowHighlighting,n)}function Lt(t,n,i,o,a){var l;const r=(o===null||o===void 0?void 0:o.create)||(o===null||o===void 0?void 0:o.detail);const s=i.getManifestControlConfiguration(a);const d=s&&s.tableSettings||{};if(r!==null&&r!==void 0&&r.outbound&&r.outboundDetail&&o!==null&&o!==void 0&&o.create){return{mode:"External",outbound:r.outbound,outboundDetail:r.outboundDetail,navigationSettings:o}}if(i.getTemplateType()===Q.ListReport&&![Z.NewPage,Z.External].includes(n.creationMode)){e.warning(`Creation mode '${n.creationMode}' can not be used within the List Report. Instead, the default mode "NewPage" is used.`);n.creationMode=Z.NewPage}else if(i.getTemplateType()!==Q.ListReport&&n.type==="TreeTable"&&![Z.NewPage,Z.Inline].includes(n.creationMode)){e.warning(`Creation mode '${n.creationMode}' can not be used with a Tree Table. Instead, the default mode "NewPage" is used.`);n.creationMode=Z.NewPage}let u;if(t){var c,v,f;const e=(c=i.getEntitySet())===null||c===void 0?void 0:c.annotations;const t=e===null||e===void 0?void 0:e.Common,o=e===null||e===void 0?void 0:e.Session;u=(t===null||t===void 0?void 0:(v=t.DraftRoot)===null||v===void 0?void 0:v.NewAction)||(o===null||o===void 0?void 0:(f=o.StickySessionSupported)===null||f===void 0?void 0:f.NewAction);if(n.creationMode===Z.CreationRow&&u){throw Error(`Creation mode '${Z.CreationRow}' can not be used with a custom 'new' action (${u})`)}if(r!==null&&r!==void 0&&r.route){var p;return{mode:n.creationMode,append:n.createAtEnd,newAction:(p=u)===null||p===void 0?void 0:p.toString(),navigateToTarget:n.creationMode===Z.NewPage?r.route:undefined}}}if(n.creationMode===Z.NewPage){if(i.getTemplateType()===Q.ListReport){e.error("The creation mode 'NewPage' is used but the navigation configuration to the sub page is missing.")}else{var g;n.creationMode=Z.Inline;if(((g=d.creationMode)===null||g===void 0?void 0:g.createAtEnd)===undefined){n.createAtEnd=false}e.info("The creation mode was changed from 'NewPage' to 'Inline' due to missing navigation configuration to the sub page.")}}return{mode:n.creationMode,append:n.createAtEnd,newAction:(l=u)===null||l===void 0?void 0:l.toString()}}const kt=function(e,t,n,i,o){let a,r;let s=$e(je.None);const d=t.getEntityType();if(n&&e){var c,v,f,p,g;r=((c=n.display)===null||c===void 0?void 0:c.target)||((v=n.detail)===null||v===void 0?void 0:v.outbound);const l=t.getEntitySet();s=Rt((f=e.annotations)===null||f===void 0?void 0:(p=f.UI)===null||p===void 0?void 0:p.Criticality,!!u.getDraftRoot(l)||!!u.getDraftNode(l),d);if(r){a=".handlers.onChevronPressNavigateOutBound( $controller ,'"+r+"', ${$parameters>bindingContext})"}if(!r&&(g=n.detail)!==null&&g!==void 0&&g.route){a="API.onTableRowPress($event, $controller, ${$parameters>bindingContext}, { callExtension: true, targetPath: '"+i+"', editable : "+(u.getDraftRoot(l)||u.getDraftNode(l)?"!${$parameters>bindingContext}.getProperty('IsActiveEntity')":"undefined")+(o==="AnalyticalTable"||o==="TreeTable"?", bRecreateContext: true":"")+"})"}}const m=we([Se("/deepestPath","internal")],l.navigatedRow,d);return{press:a,action:a?"Navigation":undefined,rowHighlighting:xe(s),rowNavigated:xe(m),visible:xe(Ee(Le.IsInactive))}};const jt=function(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let i=arguments.length>3?arguments[3]:undefined;let o=arguments.length>4?arguments[4]:undefined;let a=arguments.length>5?arguments[5]:undefined;let l=arguments.length>6?arguments[6]:undefined;let r=arguments.length>7?arguments[7]:undefined;const s=n;const d=new W(t,o);t.entityProperties.forEach(t=>{const u=n.some(e=>e.name===t.name);if(!t.targetType&&!u){const u=ft(t.name,t,o,true,a);const c=Object.keys(u.properties);const v=Object.keys(u.additionalProperties);if(u.textOnlyPropertiesFromTextAnnotation.length>0){r.push(...u.textOnlyPropertiesFromTextAnnotation)}const f=Bt(t,o.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,true,true,i,d,o,r,l,u);if(c.length>0){f.propertyInfos=c;if(u.exportSettings.dataPointTargetValue){f.exportDataPointTargetValue=u.exportSettings.dataPointTargetValue}c.forEach(t=>{e[t]=u.properties[t]})}Wt(n,e,f);if(v.length>0){f.additionalPropertyInfos=v;v.forEach(t=>{e[t]=u.additionalProperties[t]})}s.push(f)}if(ce(t)==="Description"){i=i.concat(t.name);s.push(Bt(t,o.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,false,false,i,d,o,[],l))}});const u=en(e,s,i,o,t,r,l);return s.concat(u)};F.getColumnsFromEntityType=jt;const Bt=function(e,t,n,i,o,a,l,r,s,d,u){var c,v;const f=i?n:`Property::${n}`;const p=(i?"DataField::":"Property::")+Ae(n);const g=ut(r,e);const m=z(e);const y=e.name?ln(e.name,true,false):undefined;const b=y!=e.name;const h=Jt(e,b);const T=ct(e);const I=si(e,T);const P=s&&s.includes(n);const A=(!m||P)&&!a.includes(n);const C={className:e.type||T,formatOptions:I.formatOptions,constraints:I.constraints};let D=null;if(_t(e)){D=Ht(e,u)}const S=ii(n,r);const F={key:p,type:pt.Annotation,label:h,groupLabel:b?Jt(e):undefined,group:b?y:undefined,annotationPath:t,semanticObjectPath:g,availability:!o||m?"Hidden":"Adaptation",name:f,relativePath:n,sortable:A,isGroupable:l.isAnalyticsSupported()?!!l.isPropertyGroupable(e):A,isKey:e.isKey,exportSettings:D,caseSensitive:dn(r),typeConfig:C,importance:hn(r,(c=e.annotations)===null||c===void 0?void 0:(v=c.UI)===null||v===void 0?void 0:v.DataFieldDefault),required:Sn(r,e,d),additionalLabels:S};const E=Xt(e)||h;if(E){F.tooltip=E}const M=dt(e);if(nt(e)&&typeof M==="string"&&F.exportSettings){F.exportDataPointTargetValue=M;F.exportSettings.template="{0}/"+M}return F};const Ht=function(e,t){var n,i,o,a,l,r,s;let d,u,c,v,f,p,g,m;const y=t?Object.keys(t.properties):[];if(t&&(y===null||y===void 0?void 0:y.length)===1){e=t.properties[y[0]]}const b=ct(e);if(he(e)){d=ae(e);g=re(e);u=le(e);c=ie(e);v=oe(e);p=ne(e);m=e.scale}d=(t===null||t===void 0?void 0:(n=t.exportSettings)===null||n===void 0?void 0:n.unitProperty)??((i=d)===null||i===void 0?void 0:i.name)??((o=g)===null||o===void 0?void 0:o.name);u=(t===null||t===void 0?void 0:(a=t.exportSettings)===null||a===void 0?void 0:a.timezoneProperty)??((l=u)===null||l===void 0?void 0:l.name);m=(t===null||t===void 0?void 0:(r=t.exportSettings)===null||r===void 0?void 0:r.scale)??m;const h=Hn(b,p,!!g,t===null||t===void 0?void 0:t.exportSettings);if(u||h==="DateTime"&&!v){f=false}const T={type:h,inputFormat:Kt(b),delimiter:Gt(b),scale:m,unitProperty:d,unit:(t===null||t===void 0?void 0:t.exportSettings.unit)??c,timezoneProperty:u,timezone:(t===null||t===void 0?void 0:t.exportSettings.timezone)??((s=v)===null||s===void 0?void 0:s.toString()),template:t===null||t===void 0?void 0:t.exportSettings.template,wrap:t===null||t===void 0?void 0:t.exportSettings.wrap,utc:f};return zt(T)};const Kt=function(e){return e==="Edm.Date"?"YYYY-MM-DD":undefined};const Gt=function(e){return e==="Edm.Int64"?true:undefined};const zt=function(e){for(const t in e){if(e[t]===undefined){delete e[t]}}return e};function Wt(e,t,n){var i;const o=e.filter(e=>{var t;return(t=e.propertyInfos)===null||t===void 0?void 0:t.includes(n.relativePath)});if((o===null||o===void 0?void 0:o.length)===1&&t[n.relativePath]&&((i=o[0].propertyInfos)===null||i===void 0?void 0:i.length)===1){n.label=o[0].label;n.tooltip=o[0].tooltip}}function _t(e){var t;let n,i;const o=(t=e.annotations.UI)===null||t===void 0?void 0:t.DataFieldDefault;if(he(e)){if(z(e)){return false}n=o===null||o===void 0?void 0:o.$Type}else if(z(e)){return false}else{var a,l,r,s,d,u,c,v,f,p,g;i=e;n=i.$Type;if(n==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&(a=i.Target)!==null&&a!==void 0&&(l=a.$target)!==null&&l!==void 0&&l.$Type){var m,y;n=(m=i.Target)===null||m===void 0?void 0:(y=m.$target)===null||y===void 0?void 0:y.$Type;return n!==undefined&&!"com.sap.vocabularies.UI.v1.ChartDefinitionType".includes(n)}else if(((r=i.Value)===null||r===void 0?void 0:(s=r.$target)===null||s===void 0?void 0:(d=s.annotations)===null||d===void 0?void 0:(u=d.Core)===null||u===void 0?void 0:(c=u.MediaType)===null||c===void 0?void 0:c.term)==="Org.OData.Core.V1.MediaType"&&((v=i.Value)===null||v===void 0?void 0:(f=v.$target)===null||f===void 0?void 0:(p=f.annotations)===null||p===void 0?void 0:(g=p.Core)===null||g===void 0?void 0:g.isURL)!==true){return false}}return n?!["com.sap.vocabularies.UI.v1.DataFieldForAction","com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForActionGroup"].includes(n):true}const qt=function(e){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return!!e.Inline;case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":return true;default:}};const Qt=function(e){var t,n,i,o,a,l;const r=e.targetObject;let s;if(r){switch(r.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataPointType":s=r.Value.$target;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if((r===null||r===void 0?void 0:(t=r.Target)===null||t===void 0?void 0:(n=t.$target)===null||n===void 0?void 0:n.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var d;s=(d=r.Target.$target)===null||d===void 0?void 0:d.Value.$target}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":default:s=undefined}}const u=$e(false);const c=$e(false);return Ve(...[Ee(Ue(Ne(r===null||r===void 0?void 0:(i=r.annotations)===null||i===void 0?void 0:(o=i.UI)===null||o===void 0?void 0:o.Hidden),true)),Oe(!!s,s&&Ee(Ue(Ne((a=s.annotations)===null||a===void 0?void 0:(l=a.UI)===null||l===void 0?void 0:l.Hidden),true)),true),Fe(Ee(u),c)])};F._getVisibleExpression=Qt;const Yt=function(e){var t,n;const i=[];if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((t=e.Target)===null||t===void 0?void 0:(n=t.$target)===null||n===void 0?void 0:n.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){var o,a;if(e!==null&&e!==void 0&&(o=e.annotations)!==null&&o!==void 0&&(a=o.UI)!==null&&a!==void 0&&a.Hidden){return xe(Ee(Ue(Ne(e.annotations.UI.Hidden),true)))}else{var l;(l=e.Target.$target.Data)===null||l===void 0?void 0:l.forEach(e=>{i.push(Qt({targetObject:e}))});return xe(Oe(Fe(...i),$e(true),$e(false)))}}else{return undefined}};const Jt=function(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!e){return undefined}if(he(e)||Ie(e)){var n,i,o,a;const t=(n=e.annotations)===null||n===void 0?void 0:(i=n.UI)===null||i===void 0?void 0:i.DataFieldDefault;if(t&&!t.qualifier&&t.Label){var l;return(l=t.Label)===null||l===void 0?void 0:l.toString()}return((o=e.annotations.Common)===null||o===void 0?void 0:(a=o.Label)===null||a===void 0?void 0:a.toString())??e.name}else if(it(e)){var r,s,d,u,c,v,f;if(!!t&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){var p;return e===null||e===void 0?void 0:(p=e.Label)===null||p===void 0?void 0:p.toString()}return(e===null||e===void 0?void 0:(r=e.Label)===null||r===void 0?void 0:r.toString())??xe(Ne((s=e.Value)===null||s===void 0?void 0:(d=s.$target)===null||d===void 0?void 0:(u=d.annotations)===null||u===void 0?void 0:(c=u.Common)===null||c===void 0?void 0:c.Label,[],(v=e.Value)===null||v===void 0?void 0:(f=v.$target)===null||f===void 0?void 0:f.name))}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var g,m,y,b,h,T,I,P;return((g=e.Label)===null||g===void 0?void 0:g.toString())??xe(Ne((m=e.Target)===null||m===void 0?void 0:(y=m.$target)===null||y===void 0?void 0:(b=y.Value)===null||b===void 0?void 0:(h=b.$target)===null||h===void 0?void 0:(T=h.annotations)===null||T===void 0?void 0:(I=T.Common)===null||I===void 0?void 0:(P=I.Label)===null||P===void 0?void 0:P.valueOf()))}else{var A;return(A=e.Label)===null||A===void 0?void 0:A.toString()}};const Xt=function(e){var t,n;if(!e){return undefined}if(he(e)||(t=e.annotations)!==null&&t!==void 0&&(n=t.Common)!==null&&n!==void 0&&n.QuickInfo){var i,o;return(i=e.annotations)!==null&&i!==void 0&&(o=i.Common)!==null&&o!==void 0&&o.QuickInfo?xe(Ne(e.annotations.Common.QuickInfo)):undefined}else if(it(e)){var a,l,r,s;return(a=e.Value)!==null&&a!==void 0&&(l=a.$target)!==null&&l!==void 0&&(r=l.annotations)!==null&&r!==void 0&&(s=r.Common)!==null&&s!==void 0&&s.QuickInfo?xe(Ne(e.Value.$target.annotations.Common.QuickInfo)):undefined}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var d,u,c,v,f;const t=(d=e.Target)===null||d===void 0?void 0:d.$target;return t!==null&&t!==void 0&&(u=t.Value)!==null&&u!==void 0&&(c=u.$target)!==null&&c!==void 0&&(v=c.annotations)!==null&&v!==void 0&&(f=v.Common)!==null&&f!==void 0&&f.QuickInfo?xe(Ne(t.Value.$target.annotations.Common.QuickInfo)):undefined}else{return undefined}};function Zt(e,t){return we([Se(`semanticKeyHasDraftIndicator`,"internal"),Se(`filteredMessages`,"internal"),e,t],l.getErrorStatusTextVisibilityFormatter)}F.getRowStatusVisibility=Zt;const en=function(e,t,n,i,o,a,l){const r=[];const s={};const d=new W(o,i);Object.keys(e).forEach(o=>{const u=e[o],c=i.getAbsoluteAnnotationPath(o),v=t.find(e=>e.name===o);if(v===undefined){const s=Bt(u,c,o,true,false,n,d,i,a,l);s.isPartOfLineItem=t.some(e=>{var t;return((t=e.propertyInfos)===null||t===void 0?void 0:t.includes(o))&&e.isPartOfLineItem});Wt(t,e,s);r.push(s)}else if(v.annotationPath!==c||v.propertyInfos){const f=`Property::${o}`;if(!t.some(e=>e.name===f)){const p=Bt(u,c,o,false,false,n,d,i,a,l);p.isPartOfLineItem=v.isPartOfLineItem;Wt(t,e,p);r.push(p);s[o]=f}else if(t.some(e=>e.name===f)&&t.some(e=>{var t;return(t=e.propertyInfos)===null||t===void 0?void 0:t.includes(o)})){s[o]=f}}});t.forEach(e=>{var t,n;e.propertyInfos=(t=e.propertyInfos)===null||t===void 0?void 0:t.map(e=>s[e]??e);e.additionalPropertyInfos=(n=e.additionalPropertyInfos)===null||n===void 0?void 0:n.map(e=>s[e]??e)});return r};const tn=function(e){var t,n,i,o;if(it(e)&&(t=e.Value)!==null&&t!==void 0&&t.path){var a;return(a=e.Value)===null||a===void 0?void 0:a.path}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&(n=e.Target)!==null&&n!==void 0&&(i=n.$target)!==null&&i!==void 0&&(o=i.Value)!==null&&o!==void 0&&o.path){var l,r;return(l=e.Target)===null||l===void 0?void 0:(r=l.$target)===null||r===void 0?void 0:r.Value.path}else{return Be.generateKeyFromDataField(e)}};const nn=function(e,t,n){const i=`Property_Technical::${e}`;const o=t.find(e=>e.key===i);const a=!o&&t.find(t=>t.name===e&&!t.propertyInfos);if(a){const o={key:i,type:pt.Annotation,label:a.label,annotationPath:a.annotationPath,availability:"Hidden",name:i,relativePath:a.relativePath,sortable:false,isGroupable:false,isKey:false,exportSettings:null,caseSensitive:false,aggregatable:false,extension:{technicallyGroupable:true,technicallyAggregatable:true}};t.push(o);n[e]=o.name}};const on=function(e,t,n){var i;const o=(i=n.getManifestControlConfiguration(t))===null||i===void 0?void 0:i.columns;const a=o&&Object.keys(o);return a&&!!a.find(function(t){return t===e&&o[t].showDataFieldsLabel})};const an=function(e){var t,n;let i="";switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":i=e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:t.path;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":i=e===null||e===void 0?void 0:(n=e.Target)===null||n===void 0?void 0:n.value;break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":i=Be.generateKeyFromDataField(e);break}return i};const ln=function(e,t,n){const i=t?e.lastIndexOf("/"):e.indexOf("/");if(i===-1){return e}return n?e.substring(i+1,e.length):e.substring(0,i)};const rn=function(e,t){if(it(e)&&Te(e.Value)){const n=ye(t.getDataModelObjectPath(),e.Value.path);return te(n)}else{return false}};const sn=function(e,t,n){return!n.includes(t)&&(e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction")};const dn=function(e){const t=un(e);return Array.isArray(t)?!t.includes("tolower"):true};F.isFilteringCaseSensitive=dn;function un(e){const t=e.getEntitySet();if(v.isEntitySet(t)){var n,i;return((n=t.annotations.Capabilities)===null||n===void 0?void 0:n.FilterFunctions)??((i=e.getEntityContainer().annotations.Capabilities)===null||i===void 0?void 0:i.FilterFunctions)}return undefined}function cn(e){return e===undefined?undefined:{textLinesEdit:4,...e}}function vn(e,t){const n=[];let i=false;for(let o=0;o<e.length;o++){n.push(e[o].value);if(e[o].value===t){i=true}}return{values:n,semanticKeyFound:i}}function fn(e,t){let n=false;let i;if(e&&e.length>=1&&t&&t.length>=1){for(let o=0;o<e.length;o++){if([e[o]].some(e=>t.includes(e))){n=true;i=e[o];break}}}return{semanticKeyHasPropertyInFieldGroup:n,fieldGroupPropertyPath:i}}function pn(e,t){var n,i;const o=[];let a={semanticKeyHasPropertyInFieldGroup:false,fieldGroupPropertyPath:undefined};if(e&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((n=e.Target)===null||n===void 0?void 0:(i=n.$target)===null||i===void 0?void 0:i.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){var l;(l=e.Target.$target.Data)===null||l===void 0?void 0:l.forEach(e=>{if((e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")&&e.Value){o.push(e.Value.path)}a=fn(t,o)})}return{semanticKeyHasPropertyInFieldGroup:a.semanticKeyHasPropertyInFieldGroup,propertyPath:a.fieldGroupPropertyPath}}function gn(e,t,n,i){if(!t){return{}}const o=vn(t,e);const a=pn(i,o.values);if(a.semanticKeyHasPropertyInFieldGroup){return{fieldGroupDraftIndicatorPropertyPath:a.propertyPath,fieldGroupName:e,showErrorObjectStatus:xe(Zt(e,true))}}else if(o.semanticKeyFound){return{hasDraftIndicator:true,showErrorObjectStatus:xe(Zt(e,false))}}return{}}function mn(e){var t,n;const i=e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance;if(i&&i.includes("UI.ImportanceType/High")){return 3}if(i&&i.includes("UI.ImportanceType/Medium")){return 2}if(i&&i.includes("UI.ImportanceType/Low")){return 1}return 0}function yn(e){var t,n;const i=e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance;return i?i.split("/")[1]:J.None}function bn(e){if(e&&e.length>0){let t=-1;let n=-1;let i;for(const o of e){n=mn(o);if(n>t){t=n;i=o}}return yn(i)}return J.None}function hn(e,t){var n,i,o;if(!t){return undefined}const a=((n=e.getDataModelObjectPath().targetEntityType.annotations.Common)===null||n===void 0?void 0:n.SemanticKey)??[];const l=Rn(e);const r=[...a,...l].map(e=>{var t;return(t=e.$target)===null||t===void 0?void 0:t.fullyQualifiedName});let s;if(Pe(t,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const e=t.Target.$target;if(Pe(e,"com.sap.vocabularies.UI.v1.FieldGroupType")){const n=e.Data;if(n.some(function(e){var t,n;return it(e)&&r.includes((t=e.Value)===null||t===void 0?void 0:(n=t.$target)===null||n===void 0?void 0:n.fullyQualifiedName)})){return J.High}else{var d,u;if(t!==null&&t!==void 0&&(d=t.annotations)!==null&&d!==void 0&&(u=d.UI)!==null&&u!==void 0&&u.Importance){return yn(t)}s=n.filter(function(e){var t,n;return e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance});return bn(s)}}}return r.includes((i=t.Value)===null||i===void 0?void 0:(o=i.$target)===null||o===void 0?void 0:o.fullyQualifiedName)?J.High:yn(t)}F.getImportance=hn;const Tn=function(e,t,n){var i,o,a;const l=n.getAnnotationEntityType(e),r=[],s={},d=ue(n.getEntitySet()),u=n.getManifestControlConfiguration(t),c=(u===null||u===void 0?void 0:(i=u.tableSettings)===null||i===void 0?void 0:i.type)||"ResponsiveTable",v=(u===null||u===void 0?void 0:(o=u.tableSettings)===null||o===void 0?void 0:(a=o.creationMode)===null||a===void 0?void 0:a.name)||Z.Inline;const f=[];const p=n.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[n.getEntityType()])[0];if(e){const i=n.getConverterContextFor(ge(n.getDataModelObjectPath()));e.forEach(e=>{var o,a,l,u,g,m,y,b,h,T,I;if(!qt(e)){return}let P=null;const A=it(e)&&(o=e.Value)!==null&&o!==void 0&&(a=o.$target)!==null&&a!==void 0&&a.fullyQualifiedName?ut(n,e):undefined;const C=an(e);const D=vt(e,n,c);const S=Object.keys(D.properties);const F=Object.keys(D.additionalProperties);const E=C?ln(C,true,false):undefined;const M=E!=C;const O=Jt(e,M);const N=tn(e);const w=E?E.includes(`@${"com.sap.vocabularies.UI.v1.FieldGroup"}`):false;const U=w?on(N,t,n):false;const $=ct(e);const x=cn(gn(N,p,w,e));const V=ye(n.getDataModelObjectPath(),C).targetEntityType.navigationProperties;const R=V.filter(e=>{var t,n;return!e.isCollection&&((t=e.targetType.annotations.Common)===null||t===void 0?void 0:(n=t.SAPObjectNodeType)===null||n===void 0?void 0:n.Name)==="BusinessSituation"});const L=R.length>=1?R[0]:undefined;if(L&&x){x.hasSituationsIndicator=true}let k;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((l=e.Target)===null||l===void 0?void 0:(u=l.$target)===null||u===void 0?void 0:u.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){k=Yt(e)}if(_t(e)){P=Ht(e,D)}let j;if($){j=si(e,$)}const B={className:$,formatOptions:{...x,...(g=j)===null||g===void 0?void 0:g.formatOptions},constraints:{...(m=j)===null||m===void 0?void 0:m.constraints}};const H={};if(!$||!B){H.widthCalculation=null}const K=rn(e,i);const G=!K&&sn(e,C,d);const W={key:Be.generateKeyFromDataField(e),type:pt.Annotation,label:O,groupLabel:M?Jt(e):undefined,group:M?E:undefined,FieldGroupHiddenExpressions:k,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),semanticObjectPath:A,availability:z(e)?"Hidden":"Default",name:N,showDataFieldsLabel:U,required:Sn(n,e,v),relativePath:C,sortable:G,propertyInfos:S.length?S:undefined,additionalPropertyInfos:F.length>0?F:undefined,exportSettings:P,width:((y=e.annotations)===null||y===void 0?void 0:(b=y.HTML5)===null||b===void 0?void 0:(h=b.CssDefaults)===null||h===void 0?void 0:(T=h.width)===null||T===void 0?void 0:T.valueOf())||undefined,importance:hn(n,e),isNavigable:true,formatOptions:x,caseSensitive:dn(n),typeConfig:B,visualSettings:H,timezoneText:(I=P)===null||I===void 0?void 0:I.timezone,isPartOfLineItem:true,isMultiValue:K};const _=Xt(e)||O;if(_){W.tooltip=_}if(D.textOnlyPropertiesFromTextAnnotation.length>0){f.push(...D.textOnlyPropertiesFromTextAnnotation)}if(D.exportSettings.dataPointTargetValue){W.exportDataPointTargetValue=D.exportSettings.dataPointTargetValue}r.push(W);S.forEach(e=>{s[e]=D.properties[e];if(K){d.push(e)}});F.forEach(e=>{s[e]=D.additionalProperties[e]})})}return jt(s,l,r,d,n,c,v,f)};const In=function(e,t,n,i){let o;if(e){o=e.map(function(e){const o=t.find(function(t){return t.relativePath===e&&t.propertyInfos===undefined});if(o){return o.name}else{const o=en({[e]:i.resolvePath(e)},t,[],n,i,[]);t.push(o[0]);return o[0].name}})}return o};const Pn=function(e,t,n){const i=t.Data;return i.some(function(t){var i;if(lt(t)&&(t===null||t===void 0?void 0:(i=t.Value)===null||i===void 0?void 0:i.$target.type)!=="Edm.Boolean"){return se(t)||n===Z.InlineCreationRows&&Ln(t.Value.$target.fullyQualifiedName,e)}})};const An=function(e,t,n){const i=t.Target.$target;const o=de(t);if(rt(t)){if(Pn(e,i,n)){return true}const t=i.Data;return t.some(t=>Sn(e,t,n))}if(st(t)&&i.Visualization!=="UI.VisualizationType/Rating"){if(o){return false}if(se(t)){return true}return Dn(e,i,n)}return false};const Cn=function(e,t,n){return t.type!=="Edm.Boolean"&&!tt(t)&&(se(t)||n===Z.InlineCreationRows&&Ln(t.fullyQualifiedName,e))};const Dn=function(e,t,n){return se(t)||n===Z.InlineCreationRows&&Ln(t.Value.$target.fullyQualifiedName,e)};const Sn=function(e,t,n){var i,o;const a=n||Z.Inline;if(e.getTemplateType()===Q.ListReport||e.getTemplateType()===Q.AnalyticalListPage){return undefined}if(he(t)){return Cn(e,t,a)?xe(Le.IsEditable):undefined}if(ot(t)){return An(e,t,a)?xe(Le.IsEditable):undefined}if(lt(t)&&((i=t.Value)===null||i===void 0?void 0:(o=i.$target)===null||o===void 0?void 0:o.type)!=="Edm.Boolean"){return se(t)||a===Z.InlineCreationRows&&Ln(t.Value.$target.fullyQualifiedName,e)?xe(Le.IsEditable):undefined}return undefined};const Fn=function(e){return e.map(t=>`{${e.indexOf(t)}}`).join(`${"\n"}`)};const En=function(t,n,i,o,a){const l={};function r(e,t){return n.some(e=>e.key===t)}function s(e){return e.type===pt.Slot}function d(e){return e.type===undefined&&!!e.template}function u(e,t){const n=ue(i.getEntitySet());e.forEach(e=>{t.forEach(t=>{if(t.name===e){t.sortable=!n.includes(e.replace("Property::",""));t.isGroupable=t.sortable}})})}for(const m in t){var c;const y=t[m];Be.validateKey(m);const b={key:m,widthIncludingColumnHeader:y.widthIncludingColumnHeader,width:y.width||undefined,position:{anchor:(c=y.position)===null||c===void 0?void 0:c.anchor,placement:y.position===undefined?_e.After:y.position.placement},caseSensitive:dn(i)};if(r(y,m)){const e={...b,importance:y===null||y===void 0?void 0:y.importance,horizontalAlign:y===null||y===void 0?void 0:y.horizontalAlign,availability:y===null||y===void 0?void 0:y.availability,type:pt.Annotation,isNavigable:r(y,m)?undefined:Ye(y,a,true),settings:y.settings,formatOptions:cn(y.formatOptions)};l[m]=e}else{var v;const t=In(y.properties,n,i,o);const a={...b,header:y.header,importance:(y===null||y===void 0?void 0:y.importance)||J.None,horizontalAlign:(y===null||y===void 0?void 0:y.horizontalAlign)||X.Begin,availability:(y===null||y===void 0?void 0:y.availability)||"Default",template:y.template,propertyInfos:t,exportSettings:t?{template:Fn(t),wrap:!!(t.length>1)}:null,id:`CustomColumn::${m}`,name:`CustomColumn::${m}`,formatOptions:{textLinesEdit:4},isGroupable:false,isNavigable:false,sortable:false,visualSettings:{widthCalculation:null},tooltip:y.header,properties:y.properties,required:y.required&&i.getTemplateType()!==Q.ListReport&&i.getTemplateType()!==Q.AnalyticalListPage?xe(Le.IsEditable):undefined};if((v=y.header)!==null&&v!==void 0&&v.startsWith("{metaModel>")){var f,p;const t=(f=y.header)===null||f===void 0?void 0:f.substring(11,((p=y.header)===null||p===void 0?void 0:p.length)-1);try{a.header=i.getEntityTypeAnnotation(t).annotation.toString()}catch(n){e.info(`Unable to retrieve text from meta model using path ${t}`)}}if(t){u(t,n)}if(s(y)){const e={...a,type:pt.Slot};l[m]=e}else if(d(y)){const e={...a,type:pt.Default};l[m]=e}else{var g;const e=`The annotation column '${m}' referenced in the manifest is not found`;i.getDiagnostics().addIssue(ze.Manifest,Ke.Low,e,Ge,Ge===null||Ge===void 0?void 0:(g=Ge.AnnotationColumns)===null||g===void 0?void 0:g.InvalidKey)}}}return l};function Mn(e,t,n){var i;const o=n.getManifestControlConfiguration(t);const a=(o===null||o===void 0?void 0:(i=o.tableSettings)===null||i===void 0?void 0:i.type)||"ResponsiveTable";if(a!=="GridTable"&&a!=="TreeTable"){return e}const l=e.find(e=>{var t,n;return((t=e.formatOptions)===null||t===void 0?void 0:t.hasSituationsIndicator)!==undefined&&((n=e.formatOptions)===null||n===void 0?void 0:n.hasSituationsIndicator)===true});if(l!==null&&l!==void 0&&l.formatOptions){l.formatOptions.hasSituationsIndicator=false;const t={key:"situationsIndicator",name:"situationsIndicator",propertyKey:l.name,isSituationsIndicator:true,availability:"Default",label:"{sap.fe.i18n>C_SITUATIONS_STATUS_COLUMN_LABEL_TOOLTIP}",tooltip:"{sap.fe.i18n>C_SITUATIONS_STATUS_COLUMN_LABEL_TOOLTIP}",type:pt.Computed,formatOptions:null,exportSettings:null,propertyInfos:null,caseSensitive:false};const n=e.findIndex(e=>e.availability!=="Hidden");e.splice(n+1,0,t)}const r=e.find(e=>{var t,n;return((t=e.formatOptions)===null||t===void 0?void 0:t.hasDraftIndicator)!==undefined&&((n=e.formatOptions)===null||n===void 0?void 0:n.hasDraftIndicator)===true});if(r!==null&&r!==void 0&&r.formatOptions&&n.getTemplateType()===Q.ListReport&&(u.isDraftNode(n.getEntitySet())||u.isDraftRoot(n.getEntitySet()))){r.formatOptions.hasDraftIndicator=false;const t={key:"draftStatus",name:"draftStatus",propertyKey:r.name,isDraftIndicator:true,availability:"Default",label:"{sap.fe.i18n>C_DRAFT_STATUS_COLUMN_LABEL_TOOLTIP}",tooltip:"{sap.fe.i18n>C_DRAFT_STATUS_COLUMN_LABEL_TOOLTIP}",type:pt.Computed,formatOptions:null,exportSettings:null,propertyInfos:null,caseSensitive:false};let n=0;if(l){n=e.findIndex(e=>e.isSituationsIndicator===true)-1}else{n=e.findIndex(e=>e.availability!=="Hidden")}e.splice(n+1,0,t)}return e}F.addComputedColumns=Mn;function On(e,t,n){var i;const o=t.getManifestWrapper();const a=t.getManifestControlConfiguration(e);const l=o.getVariantManagement();const r=[];const s=n.type==="AnalyticalTable";const d=n.type==="ResponsiveTable";if((a===null||a===void 0?void 0:(i=a.tableSettings)===null||i===void 0?void 0:i.personalization)!==undefined){const e=a.tableSettings.personalization;if(e===true){switch(n.type){case"AnalyticalTable":return"Sort,Column,Filter,Group,Aggregate";case"ResponsiveTable":return"Sort,Column,Filter,Group";default:return"Sort,Column,Filter"}}else if(typeof e==="object"){if(e.sort){r.push("Sort")}if(e.column){r.push("Column")}if(e.filter){r.push("Filter")}if(e.group&&(s||d)){r.push("Group")}if(e.aggregate&&s){r.push("Aggregate")}return r.length>0?r.join(","):undefined}}else{r.push("Sort");r.push("Column");if(t.getTemplateType()===Q.ListReport){if(l===q.Control||Nn(o,t)){r.push("Filter")}}else{r.push("Filter")}if(s){r.push("Group");r.push("Aggregate")}if(d){r.push("Group")}return r.join(",")}return undefined}F.getP13nMode=On;function Nn(e,t){return e.isFilterBarHidden()&&!t.getManifestWrapper().hasMultipleVisualizations()&&t.getTemplateType()!==Q.AnalyticalListPage}function wn(e,t,n){const i=ue(e.getEntitySet());let o;if(t!==null&&t!==void 0&&t.SortOrder){const e=[];const a={sorters:e};t.SortOrder.forEach(e=>{const t=e.Property;if((t===null||t===void 0?void 0:t.$target)!==undefined&&!i.includes(t.$target.name)){const i=$n([t],n)[0];if(i){a.sorters.push({name:i,descending:!!e.Descending})}}});o=a.sorters.length?JSON.stringify(a):undefined}return o}function Un(e){var t;if(!e){return undefined}const n=(t=e.InitialExpansionLevel)===null||t===void 0?void 0:t.valueOf();return typeof n==="number"?n:undefined}function $n(e,t){const n=[];let i,o;e.forEach(e=>{if(e!==null&&e!==void 0&&e.value){i=t.find(t=>{o=t;return!o.propertyInfos&&o.relativePath===(e===null||e===void 0?void 0:e.value)});if(i){n.push(i.name)}}});return n}function xn(e,t,n){let i;if(e!==null&&e!==void 0&&e.GroupBy){let o=e.GroupBy;if(n==="ResponsiveTable"){o=o.slice(0,1)}const a=$n(o,t).map(e=>({name:e}));i=a.length?JSON.stringify({groupLevels:a}):undefined}return i}function Vn(e){const t={};e.columns.forEach(n=>{var i;n=n;const o=Object.keys(e.aggregates).find(e=>e===n.name);if(o){const t=e.aggregates[o];n.aggregatable=true;n.extension={customAggregate:t.defaultAggregate??{}}}if((i=n.additionalPropertyInfos)!==null&&i!==void 0&&i.length){n.additionalPropertyInfos.forEach(n=>{nn(n,e.columns,t)})}});e.columns.forEach(e=>{e=e;if(e.additionalPropertyInfos){var n;e.additionalPropertyInfos=e.additionalPropertyInfos.map(e=>t[e]??e);e.propertyInfos=(n=e.propertyInfos)===null||n===void 0?void 0:n.concat(e.additionalPropertyInfos)}})}function Rn(e){return me(e.getDataModelObjectPath(),e=>{var t;return e===null||e===void 0?void 0:(t=e.InsertRestrictions)===null||t===void 0?void 0:t.RequiredProperties},false)}function Ln(e,t){return Rn(t).map(e=>{var t;return(t=e.$target)===null||t===void 0?void 0:t.fullyQualifiedName}).includes(e)}function kn(e,t){let n;if(e!==null&&e!==void 0&&e.Total){const i=e.Total;const o={};$n(i,t).forEach(e=>{o[e]={}});n=JSON.stringify(o)}return n}function jn(e,t,n,i,o,a){const l=Lt(e,i,n,o,t);const r=B(n,l.mode,i,a);const s=k(n,r);const d=R(n,r);const u=L(r,M(n));const c={cut:$(n,r),create:x(n,r),delete:U(n,r),paste:O(n,r,u),massEdit:N(n,r),insights:w(n,r,t),creationRow:j(n,r)};return{creationBehaviour:l,deleteButtonVisibilityExpression:s,massEditButtonVisibilityExpression:d,isInsertUpdateActionsTemplated:u,standardActions:c}}F.getStandardActionsConfiguration=jn;function Bn(e,t,n,i,o,a,l,r,s){var d,u,c;const{navigationPropertyPath:v}=Kn(t);const f=(d=n.getDataModelObjectPath().targetEntityType.annotations)===null||d===void 0?void 0:(u=d.UI)===null||u===void 0?void 0:(c=u.HeaderInfo)===null||c===void 0?void 0:c.TypeNamePlural;const p=f&&xe(Ne(f));const g=n.getDataModelObjectPath().targetEntitySet;const m=n.getManifestWrapper();const y=v.length===0,b=On(t,n,i),h=v?G(t):G(n.getContextPath(),"LineItem");const T=$t(n);const I=ht(n,v);const P=xt(e,t,n,y,T,l.deleteButtonVisibilityExpression,l.massEditButtonVisibilityExpression);let A=v?10:30;if(r!==null&&r!==void 0&&r.MaxItems){A=r.MaxItems.valueOf()}const C=m.getVariantManagement();const D=fe(n.getDataModelObjectPath());return{id:h,entityName:g?g.name:"",collection:ge(n.getDataModelObjectPath()),navigationPath:v,row:kt(e,n,a,I,i.type),p13nMode:b,isInsertUpdateActionsTemplated:l.isInsertUpdateActionsTemplated,updatablePropertyPath:Dt(n),displayMode:E(n,s),create:l.creationBehaviour,selectionMode:P,variantManagement:C==="Control"&&!b?q.None:C,threshold:A,sortConditions:wn(n,r,o),title:p,searchable:i.type!=="AnalyticalTable"&&!(Me(D)&&D.value===false),initialExpansionLevel:Un(r),requiredProperties:Rn(n).filter(e=>{var t;return(e===null||e===void 0?void 0:(t=e.$target)===null||t===void 0?void 0:t.type)!=="Edm.Boolean"}).map(e=>e.value)}}F.getTableAnnotationConfiguration=Bn;function Hn(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let i=arguments.length>3?arguments[3]:undefined;let o="String";if(!e||i!==null&&i!==void 0&&i.dataPointTargetValue){return o}if(i!==null&&i!==void 0&&i.isCurrency||n){return"Currency"}if(t){return"Timezone"}if(i!==null&&i!==void 0&&i.wrap){return o}switch(e){case"Edm.Decimal":case"Edm.Int32":case"Edm.Int64":case"Edm.Double":case"Edm.Byte":o="Number";break;case"Edm.DateOfTime":case"Edm.Date":o="Date";break;case"Edm.DateTimeOffset":o="DateTime";break;case"Edm.TimeOfDay":o="Time";break;case"Edm.Boolean":o="Boolean";break;default:o="String"}return o}function Kn(e){const[t,n]=e.split("@");let i=t;if(i.lastIndexOf("/")===i.length-1){i=i.substring(0,i.length-1)}return{navigationPropertyPath:i,annotationPath:n}}F.splitPath=Kn;function Gn(e,t){const n=t.getEntityTypeAnnotation(e);const i=n.annotation;if(i){var o,a;const e=[];(o=i.SelectOptions)===null||o===void 0?void 0:o.forEach(t=>{const n=t.PropertyName;const i=(n===null||n===void 0?void 0:n.value)??"";if(!e.includes(i)){e.push(i)}});return{text:i===null||i===void 0?void 0:(a=i.Text)===null||a===void 0?void 0:a.toString(),propertyNames:e}}return undefined}F.getSelectionVariantConfiguration=Gn;function zn(e,t,n){let i=e.enableFullScreen??n;if(!n&&i&&t.getTemplateType()===Q.ListReport){i=false;t.getDiagnostics().addIssue(ze.Manifest,Ke.Low,He.FULLSCREENMODE_NOT_ON_LISTREPORT)}return i}function Wn(e,t,n){let i;if(t!=="ResponsiveTable"){return undefined}switch(n.getTemplateType()){case Q.ListReport:case Q.ObjectPage:i=e.selectAll===false?"ClearAll":"Default";if(n.getTemplateType()===Q.ObjectPage&&n.getManifestWrapper().useIconTabBar()){i=!e.selectAll?"ClearAll":"Default"}break;case Q.AnalyticalListPage:i=!e.selectAll?"ClearAll":"Default";break;default:}return i}function _n(e,t,n){let i=(e===null||e===void 0?void 0:e.type)||"ResponsiveTable";if((i==="AnalyticalTable"||i==="TreeTable")&&!n.getManifestWrapper().isDesktop()){i="ResponsiveTable"}return i}function qn(e,t,n){if(e!=="ResponsiveTable"){if(n){return{rowCountMode:"Auto",rowCount:3}}else{return{rowCountMode:t.rowCountMode??"Fixed",rowCount:t.rowCount?t.rowCount:5}}}else{return{}}}function Qn(e,t){return t.condensedTableLayout!==undefined&&e!=="ResponsiveTable"?t.condensedTableLayout:false}function Yn(e){return e.selectAll===true||e.selectionLimit===0?0:e.selectionLimit||200}function Jn(e){var t,n;return(t=e.creationMode)!==null&&t!==void 0&&t.inlineCreationRowCount?(n=e.creationMode)===null||n===void 0?void 0:n.inlineCreationRowCount:1}function Xn(e,t,n,i){var o;if(n){t.push({annotationPath:i.annotationPath})}return{quickFilters:{showCounts:e===null||e===void 0?void 0:(o=e.quickVariantSelection)===null||o===void 0?void 0:o.showCounts,paths:t}}}function Zn(e,t,n){return e.enableExport!==undefined?e.enableExport:t.getTemplateType()!=="ObjectPage"||n}function ei(e){return e.frozenColumnCount}function ti(e){return e.widthIncludingColumnHeader??false}function ni(e,t,n){var i,o,a;if(!t){return{}}const l=[];const r=n.getAnnotationEntityType(t);let s;let d;e===null||e===void 0?void 0:(i=e.quickVariantSelection)===null||i===void 0?void 0:(o=i.paths)===null||o===void 0?void 0:o.forEach(t=>{s=r.resolvePath(t.annotationPath);d=Xn(e,l,s,t)});let u=false;u=!!((a=e.quickVariantSelection)!==null&&a!==void 0&&a.hideTableTitle);return{filters:d,headerVisible:!(s&&u)}}function ii(e,t){const n=ye(t.getDataModelObjectPath(),e).navigationProperties;if((n===null||n===void 0?void 0:n.length)>0){const e=[];n.forEach(t=>{e.push(Jt(t)||t.name)});return e}}function oi(e,t){var n,i,o;let a=false;if(((n=e.ActionTarget)===null||n===void 0?void 0:(i=n.annotations)===null||i===void 0?void 0:(o=i.Core)===null||o===void 0?void 0:o.OperationAvailable)!==undefined){var l,r,s,d;if(!((l=e.ActionTarget)!==null&&l!==void 0&&l.isBound)){a=true}else if((r=e.ActionTarget)!==null&&r!==void 0&&r.isBound&&((s=e.ActionTarget)===null||s===void 0?void 0:s.sourceType)!==t){a=true}else if((d=e.ActionTarget)!==null&&d!==void 0&&d.parameters[0].isCollection){a=true}}return a}function ai(e,t){var n,i,o,a,l;e.hierarchyQualifier=t.hierarchyQualifier;e.isNodeMovable=li(t.isNodeMovable,e);e.isMoveToPositionAllowed=li(t.isMoveToPositionAllowed,e);e.createEnablement=li((n=t.creationMode)===null||n===void 0?void 0:n.isCreateEnabled,e);if((i=t.creationMode)!==null&&i!==void 0&&(o=i.nodeType)!==null&&o!==void 0&&o.propertyName&&(a=t.creationMode)!==null&&a!==void 0&&(l=a.nodeType)!==null&&l!==void 0&&l.values){const n=t.creationMode.nodeType.values;e.nodeType={propertyName:t.creationMode.nodeType.propertyName,values:Object.keys(n).map(e=>({value:e,text:n[e]}))}}}function li(e,t){if(!e){return undefined}const n=e.lastIndexOf(".")||-1;const i=e.substring(0,n).replace(/\./gi,"/");const o=e.substring(n+1);if(!i.startsWith("/extension/")){if(!t.additionalRequiredModules){t.additionalRequiredModules=[i]}else if(!t.additionalRequiredModules.includes(i)){t.additionalRequiredModules.push(i)}}return{moduleName:i,methodName:o}}function ri(e,t,n){var i,o,a,l,r,s,d,u;let c=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const v=n.getManifestWrapper();const f=n.getManifestControlConfiguration(t);const p=(f===null||f===void 0?void 0:f.tableSettings)??{};const g=((i=p.creationMode)===null||i===void 0?void 0:i.name)||Z.NewPage;const m=!v.isPhone();const y=p.enablePaste!==undefined?p.enablePaste:n.getTemplateType()==="ObjectPage";const b=n.getTemplateType();const h=b===Q.ListReport?"API.dataStateIndicatorFilter":undefined;const T=c&&v.isCondensedLayoutCompliant();const I=ni(p,e,n);const P=(o=p.creationMode)===null||o===void 0?void 0:o.customValidationFunction;const A=n.getEntityType();const C=new W(A,n);const D=_n(p,C,n);const S=qn(D,p,b===Q.ListReport);const F=Qn(D,p);let E=false;if((a=p.creationMode)!==null&&a!==void 0&&a.inlineCreationRowsHiddenInEditMode){var M,O,N;E=typeof((M=p.creationMode)===null||M===void 0?void 0:M.inlineCreationRowsHiddenInEditMode)==="string"?((O=p.creationMode)===null||O===void 0?void 0:O.inlineCreationRowsHiddenInEditMode)==="true":(N=p.creationMode)===null||N===void 0?void 0:N.inlineCreationRowsHiddenInEditMode}const w={createAtEnd:((l=p.creationMode)===null||l===void 0?void 0:l.createAtEnd)!==undefined?(r=p.creationMode)===null||r===void 0?void 0:r.createAtEnd:g!==Z.Inline,creationMode:g,customValidationFunction:P,dataStateIndicatorFilter:h,disableAddRowButtonForEmptyData:!P?!!((s=p.creationMode)!==null&&s!==void 0&&s.disableAddRowButtonForEmptyData):false,enableAutoColumnWidth:m,enableExport:Zn(p,n,y),frozenColumnCount:ei(p),widthIncludingColumnHeader:ti(p),enableFullScreen:zn(p,n,v.isPhone()),enableMassEdit:p===null||p===void 0?void 0:p.enableMassEdit,enableAddCardToInsights:p===null||p===void 0?void 0:p.enableAddCardToInsights,enablePaste:y,headerVisible:true,multiSelectMode:Wn(p,D,n),selectionLimit:Yn(p),inlineCreationRowCount:Jn(p),inlineCreationRowsHiddenInEditMode:E,showRowCount:!(p!==null&&p!==void 0&&(d=p.quickVariantSelection)!==null&&d!==void 0&&d.showCounts)&&!((u=v.getViewConfiguration())!==null&&u!==void 0&&u.showCounts),type:D,useCondensedTableLayout:F&&T,isCompactType:v.isCompactType()};const U={...w,...S,...I};if(D==="TreeTable"){ai(U,p)}if(p.selectionChange){U.selectionChange=li(p.selectionChange,U)}return U}F.getTableManifestConfiguration=ri;function si(e,t){var n,i,o,a,l;let r;if(he(e)){r=be(e.targetType)?Re[e.targetType.underlyingType]:Re[e.type]}if(r===undefined&&t!==undefined){r=Re[t]}const s={type:(n=r)===null||n===void 0?void 0:n.type,constraints:{},formatOptions:{}};if(he(e)&&r!==undefined){var d,u,c,v,f,p,g,m,y,b,h,T,I,P,A,C,D;s.constraints={scale:(d=r.constraints)!==null&&d!==void 0&&d.$Scale?e.scale:undefined,precision:(u=r.constraints)!==null&&u!==void 0&&u.$Precision?e.precision:undefined,maxLength:(c=r.constraints)!==null&&c!==void 0&&c.$MaxLength?e.maxLength:undefined,nullable:(v=r.constraints)!==null&&v!==void 0&&v.$Nullable?e.nullable:undefined,minimum:(f=r.constraints)!==null&&f!==void 0&&f["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN((p=e.annotations)===null||p===void 0?void 0:(g=p.Validation)===null||g===void 0?void 0:g.Minimum)?`${(m=e.annotations)===null||m===void 0?void 0:(y=m.Validation)===null||y===void 0?void 0:y.Minimum}`:undefined,maximum:(b=r.constraints)!==null&&b!==void 0&&b["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN((h=e.annotations)===null||h===void 0?void 0:(T=h.Validation)===null||T===void 0?void 0:T.Maximum)?`${(I=e.annotations)===null||I===void 0?void 0:(P=I.Validation)===null||P===void 0?void 0:P.Maximum}`:undefined,isDigitSequence:s.type==="sap.ui.model.odata.type.String"&&(A=r.constraints)!==null&&A!==void 0&&A[`@${"com.sap.vocabularies.Common.v1.IsDigitSequence"}`]&&(C=e.annotations)!==null&&C!==void 0&&(D=C.Common)!==null&&D!==void 0&&D.IsDigitSequence?true:undefined}}s.formatOptions={parseAsString:(s===null||s===void 0?void 0:(i=s.type)===null||i===void 0?void 0:i.indexOf("sap.ui.model.odata.type.Int"))===0||(s===null||s===void 0?void 0:(o=s.type)===null||o===void 0?void 0:o.indexOf("sap.ui.model.odata.type.Double"))===0?false:undefined,emptyString:(s===null||s===void 0?void 0:(a=s.type)===null||a===void 0?void 0:a.indexOf("sap.ui.model.odata.type.Int"))===0||(s===null||s===void 0?void 0:(l=s.type)===null||l===void 0?void 0:l.indexOf("sap.ui.model.odata.type.Double"))===0?"":undefined,parseKeepsEmptyString:s.type==="sap.ui.model.odata.type.String"&&s.constraints.nullable===false?true:undefined};return s}F.getTypeConfig=si;return{getTableActions:gt,getTableColumns:mt,getColumnsFromEntityType:jt,updateLinkedProperties:Tt,createTableVisualization:Pt,createDefaultTableVisualization:At,getCapabilityRestriction:$t,getImportance:hn,getSelectionMode:xt,getRowStatusVisibility:Zt,getP13nMode:On,getStandardActionsConfiguration:jn,getTableAnnotationConfiguration:Bn,isFilteringCaseSensitive:dn,splitPath:Kn,getSelectionVariantConfiguration:Gn,getTableManifestConfiguration:ri,getTypeConfig:si,updateTableVisualizationForType:bt,getNavigationTargetPath:ht}},false);
//# sourceMappingURL=Table.js.map