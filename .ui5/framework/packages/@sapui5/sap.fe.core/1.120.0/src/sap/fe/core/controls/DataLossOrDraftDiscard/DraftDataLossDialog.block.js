/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/buildingBlocks/BuildingBlockSupport","sap/fe/core/buildingBlocks/RuntimeBuildingBlock","sap/fe/core/helpers/ClassSupport","sap/fe/core/helpers/ResourceModelHelper","sap/m/Button","sap/m/CustomListItem","sap/m/Dialog","sap/m/Label","sap/m/List","sap/m/Text","sap/m/VBox","sap/ui/core/CustomData","sap/ui/core/library","sap/fe/core/jsx-runtime/jsx","sap/fe/core/jsx-runtime/jsxs","sap/fe/core/jsx-runtime/Fragment"],function(e,t,i,s,o,n,a,r,l,c,u,d,p,h,f,T){"use strict";var g,L,D,_,A,v,S;var R={};var m=p.ValueState;var O=s.getResourceModel;var y=i.defineReference;var b=e.defineBuildingBlock;function x(e,t,i,s){if(!i)return;Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function E(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function M(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;B(e,t)}function B(e,t){B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,i){t.__proto__=i;return t};return B(e,t)}function C(e,t,i,s,o){var n={};Object.keys(s).forEach(function(e){n[e]=s[e]});n.enumerable=!!n.enumerable;n.configurable=!!n.configurable;if("value"in n||n.initializer){n.writable=true}n=i.slice().reverse().reduce(function(i,s){return s(e,t,i)||i},n);if(o&&n.initializer!==void 0){n.value=n.initializer?n.initializer.call(o):void 0;n.initializer=undefined}if(n.initializer===void 0){Object.defineProperty(e,t,n);n=null}return n}function F(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}let w=(g=b({name:"DraftDataLossDialog",namespace:"sap.fe.core.controllerextensions"}),L=y(),D=y(),g(_=(A=function(e){M(t,e);function t(t){var i;i=e.call(this,t)||this;x(i,"dataLossDialog",v,E(i));x(i,"optionsList",S,E(i));return i}R=t;var i=t.prototype;i.open=async function e(t){var i,s;this.view=t.getView();this.dataLossResourceModel=O(this.view);this.getContent();const o=()=>this.handleDataLossOk();(i=this.optionsList.current)===null||i===void 0?void 0:i.addEventDelegate({onkeyup:function(e){if(e.key==="Enter"){o()}}});this.view.addDependent(this.dataLossDialog.current);(s=this.dataLossDialog.current)===null||s===void 0?void 0:s.open();this.selectAndFocusFirstEntry();return new Promise(e=>{this.promiseResolve=e})};i.close=function e(){var t,i;(t=this.dataLossDialog.current)===null||t===void 0?void 0:t.close();(i=this.dataLossDialog.current)===null||i===void 0?void 0:i.destroy()};i.handleDataLossOk=function e(){this.promiseResolve(this.getSelectedKey())};i.handleDataLossCancel=function e(){this.promiseResolve("cancel")};i.selectAndFocusFirstEntry=function e(){var t,i;const s=(t=this.optionsList.current)===null||t===void 0?void 0:t.getItems()[0];(i=this.optionsList.current)===null||i===void 0?void 0:i.setSelectedItem(s);s===null||s===void 0?void 0:s.focus()};i.getSelectedKey=function e(){const t=this.optionsList.current;return t.getSelectedItem().data("itemKey")};i.getConfirmButton=function e(){return h(o,{text:this.dataLossResourceModel.getText("C_COMMON_DIALOG_OK"),type:"Emphasized",press:()=>this.handleDataLossOk()})};i.getCancelButton=function e(){return h(o,{text:this.dataLossResourceModel.getText("C_COMMON_DIALOG_CANCEL"),press:()=>this.handleDataLossCancel()})};i.getContent=function e(){var t;const i=(t=this.view.getBindingContext())===null||t===void 0?void 0:t.getObject().HasActiveEntity;const s=i?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_POPUP_MESSAGE_SAVE"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_POPUP_MESSAGE_CREATE");const o=i?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_SAVE_DRAFT_RBL"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_CREATE_ENTITY_RBL");const p=i?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_SAVE_DRAFT_TOL"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_CREATE_ENTITY_TOL");return h(a,{title:this.dataLossResourceModel.getText("WARNING"),state:m.Warning,type:"Message",contentWidth:"22rem",ref:this.dataLossDialog,children:{content:f(T,{children:[h(c,{text:s,class:"sapUiTinyMarginBegin sapUiTinyMarginTopBottom"}),f(l,{mode:"SingleSelectLeft",showSeparators:"None",includeItemInSelection:"true",backgroundDesign:"Transparent",class:"sapUiNoContentPadding",ref:this.optionsList,children:[h(n,{customData:[new d({key:"itemKey",value:"draftDataLossOptionSave"})],children:f(u,{class:"sapUiTinyMargin",children:[h(r,{text:o,design:"Bold"}),h(c,{text:p})]})}),h(n,{customData:[new d({key:"itemKey",value:"draftDataLossOptionKeep"})],children:f(u,{class:"sapUiTinyMargin",children:[h(r,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_KEEP_DRAFT_RBL"),design:"Bold"}),h(c,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_KEEP_DRAFT_TOL")})]})}),h(n,{customData:[new d({key:"itemKey",value:"draftDataLossOptionDiscard"})],children:f(u,{class:"sapUiTinyMargin",children:[h(r,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_DISCARD_DRAFT_RBL"),design:"Bold"}),h(c,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_DISCARD_DRAFT_TOL")})]})})]})]}),buttons:f(T,{children:["confirmButton = ",this.getConfirmButton(),"cancelButton = ",this.getCancelButton()]})}})};return t}(t),v=C(A.prototype,"dataLossDialog",[L],{configurable:true,enumerable:true,writable:true,initializer:null}),S=C(A.prototype,"optionsList",[D],{configurable:true,enumerable:true,writable:true,initializer:null}),A))||_);R=w;return R},false);
//# sourceMappingURL=DraftDataLossDialog.block.js.map