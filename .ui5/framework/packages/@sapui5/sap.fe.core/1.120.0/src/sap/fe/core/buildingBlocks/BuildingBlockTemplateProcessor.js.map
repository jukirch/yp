{"version":3,"file":"BuildingBlockTemplateProcessor.js","names":["sap","ui","define","Log","deepClone","uid","AttributeModel","ConfigurableObject","BindingToolkit","TypeGuards","BindingParser","XMLPreprocessor","JSONModel","TraceInfo","_exports","isFunctionArray","isContext","isBindingToolkitExpression","compileExpression","Placement","LOGGER_SCOPE","XMLTEMPLATING_NS","DOMParserInstance","DOMParser","validateMacroMetadataContext","sName","mContexts","oContextSettings","sKey","oContext","oContextObject","getObject","required","Error","hasOwnProperty","$kind","undefined","expectedTypes","includes","getPath","$Type","expectedAnnotationTypes","validateMacroSignature","oMetadata","oNode","aMetadataContextKeys","metadataContexts","Object","keys","aProperties","properties","oAttributeNames","attributeNames","getAttributeNames","attributeName","forEach","oPropertySettings","hasAttribute","startsWith","warning","SAP_UI_CORE_ELEMENT","SAP_UI_MODEL_CONTEXT","transformMetadata","buildingBlockMetadata","aggregations","dependents","type","slot","isPublic","customData","layoutData","propertyName","propertyType","_checkAbsoluteAndContextPaths","oSettings","sAttributeValue","sMetaPath","sContextPath","currentContextPath","endsWith","model","path","_createInitialMetadataContext","sAttributeName","returnContext","models","converterContext","getProperty","data","unstoreObjectValue","setProperty","bindingContexts","entitySet","_getMetadataContext","oVisitor","bDoNotResolve","isOpen","oMetadataContext","getAttribute","complexParser","getContext","e","async","processProperties","definitionProperties","aDefinitionPropertiesKeys","propertyValues","sKeyValue","defaultValue","error","visitAttribute","attributes","getNamedItem","value","Number","processContexts","contextPath","mMissingContext","oDefinitionContexts","aDefinitionContextsKeys","contextPathIndex","indexOf","contextPathDefinition","splice","propertyValue","length","name","addSingleContext","parseAggregation","oAggregation","processAggregations","oOutObjects","children","childIdx","childDefinition","childKey","setAttribute","aggregationObject","key","position","placement","After","anchor","tagName","nodeName","processChildren","oAggregations","firstElementChild","oFirstElementChild","namespaceURI","oParent","parentNode","iChildIndex","Array","from","visitNode","nextElementSibling","sChildName","localName","sAggregationName","toUpperCase","defaultAggregation","aggregationDefinition","parsedAggregation","parsedAggregationKey","oNextChild","nextChild","hasVirtualNode","childWrapper","document","createElementNS","appendChild","removeAttribute","oNewChild","aggregationPropertyValues","childIndex","subChild","subObjectKey","subObject","subChildAttributeNames","subChildAttributeName","myChild","push","processSlots","oMetadataAggregations","processCustomData","arguments","oAggregationElement","oElementChild","sSlotName","oTargetElement","querySelector","prepareAggregationElement","replaceWith","replace","processBuildingBlock","BuildingBlockClass","metadata","sFragmentName","fragment","namespace","publicNamespace","xmlTag","getSettings","initialKeys","oControlConfig","viewData","processedPropertyValues","propName","_BuildingBlockClass$m","_oData","_oData$isA","oData","originalDefinition","validate","isA","call","getModel","oInstance","getProperties","sContextName","targetObject","attributeValue","storeObjectValue","newContext","createBindingContext","oAttributesModel","oPreviousMacroInfo","coreRequire","isTraceInfoActive","oTraceInfo","traceMacroCalls","macroInfo","oContextVisitor","with","oPromise","insertFragment","oldKeys","temporaryObjectStore","templateString","getTemplate","isRuntime","storeKey","hasError","hasParseError","parsedTemplate","parseXMLString","element","iter","createNodeIterator","NodeFilter","SHOW_TEXT","textnode","nextNode","textContent","trim","processXmlInTrace","_oInstance$getTemplat","initialTemplate","oErrorText","createErrorXML","map","template","outerHTML","join","visitedNodes","internalNode","Promise","all","remove","resolve","oMacroElement","oRemainingSlots","querySelectorAll","oSlotElement","requireOnMacro","getAttributeNS","substring","setAttributeNS","traceDetails","initialProperties","resolvedProperties","missingContexts","oError","stack","oTemplate","oCtx","mSetting","ex","registerBuildingBlock","plugIn","unregisterBuildingBlock","errorMessages","xmlFragment","additionalData","errorLabels","errorMessage","xml","escapeXMLAttributeValue","errorStack","stackFormatted","btoa","additionalText","JSON","stringify","replaceAll","propertyUID","processNextXmlInTrace","method","returnValue","xmlString","_output2","_output3","addDefaultNamespaces","xmlDocument","parseFromString","output","_output","parentElement","renderInTraceMode","outStr","_xmlResult$","xmlResult","innerText","innerHTML","split","strings","i","_len","values","_key","isArray","flat","valuefn","compiledExpression","propertyUId"],"sources":["BuildingBlockTemplateProcessor-dbg.js"],"mappings":"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"}