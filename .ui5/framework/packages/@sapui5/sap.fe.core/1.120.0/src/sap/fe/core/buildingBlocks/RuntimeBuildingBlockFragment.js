/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/HookSupport","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/ClassSupport","sap/fe/core/jsx-runtime/jsx","sap/m/Label","sap/ui/base/ManagedObject","sap/ui/core/Component","sap/ui/core/Fragment"],function(e,n,t,i,o,r,a,l,s){"use strict";var c,u,d,f,p;var g={};var v=i.event;var b=i.defineUI5Class;var m=t.resolveBindingString;var w=n.initControllerExtensionHookHandlers;function h(e,n,t,i){if(!t)return;Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function y(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function C(e,n){e.prototype=Object.create(n.prototype);e.prototype.constructor=e;O(e,n)}function O(e,n){O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(n,t){n.__proto__=t;return n};return O(e,n)}function k(e,n,t,i,o){var r={};Object.keys(i).forEach(function(e){r[e]=i[e]});r.enumerable=!!r.enumerable;r.configurable=!!r.configurable;if("value"in r||r.initializer){r.writable=true}r=t.slice().reverse().reduce(function(t,i){return i(e,n,t)||t},r);if(o&&r.initializer!==void 0){r.value=r.initializer?r.initializer.call(o):void 0;r.initializer=undefined}if(r.initializer===void 0){Object.defineProperty(e,n,r);r=null}return r}function j(e,n){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}let M=(c=b("sap.fe.core.buildingBlocks.RuntimeBuildingBlockFragment"),u=v(),c(d=(f=function(e){C(n,e);function n(){var n;for(var t=arguments.length,i=new Array(t),o=0;o<t;o++){i[o]=arguments[o]}n=e.call(this,...i)||this;h(n,"functionHolder",p,y(n));return n}g=n;return n}(s),p=k(f.prototype,"functionHolder",[u],{configurable:true,enumerable:true,writable:true,initializer:null}),f))||d);g=M;const _={};function E(e){_[`${e.metadata.namespace??e.metadata.publicNamespace}.${e.metadata.name}`]=e}g.storeRuntimeBlock=E;M.registerType("FE_COMPONENTS",{load:async function(e){let n;try{n=await _[e.fragmentName].load()}catch(n){e.loadErrorMessage=n}return n},init:function(n){var t,i,s,c,u,d,f,p,g,v,b,h,y;if(n.loadErrorMessage){return new r({text:n.loadErrorMessage})}let C=n.fragmentContent;if(C===undefined){C=_[n.fragmentName]}if(C===undefined){throw new Error(`No building block class for runtime building block ${n.fragmentName} found`)}const O={};const k=((t=n.customData)===null||t===void 0?void 0:(i=t[0])===null||i===void 0?void 0:(s=i.mProperties)===null||s===void 0?void 0:(c=s.value)===null||c===void 0?void 0:c["sap.fe.core.buildingBlocks"])||{};delete n.customData;const j=n.functionHolder??[];delete n.functionHolder;const M=((u=(d=n.containingView).getController)===null||u===void 0?void 0:(f=(p=u.call(d)).getView)===null||f===void 0?void 0:f.call(p))??((g=(v=n.containingView).getController)===null||g===void 0?void 0:(b=g.call(v))===null||b===void 0?void 0:b["_view"])??n.containingView;const E=l.getOwnerComponentFor(M);const x=e.getAppComponent(M);const z=x.getMetaModel();const B=E.getModel("_pageModel");const N=(h=k.functionStringInOrder)===null||h===void 0?void 0:h.split(",");const P=(y=k.propertiesAssignedToFunction)===null||y===void 0?void 0:y.split(",");for(const e in C.metadata.properties){const n=C.metadata.properties[e];const t=B.createBindingContext(k[e]);if(t===null){let t=k[e];if(typeof t==="string"){if(n.bindable!==true){switch(n.type){case"boolean":t=t==="true";break;case"number":t=Number(t);break}}else{t=m(t,n.type)}}else if(n.type==="function"){const n=P.indexOf(e);const i=N[n];const o=j===null||j===void 0?void 0:j.find(e=>{var n;return((n=e[0])===null||n===void 0?void 0:n._sapui_handlerName)===i});if(o&&o.length>1){t=o[0].bind(o[1])}}O[e]=t}else if(t.getObject()!==undefined){O[e]=t.getObject()}else{O[e]=z.createBindingContext(k[e])}}return a.runWithPreprocessors(()=>{const e=o.withContext({view:M,appComponent:x},()=>{var e;const n={models:{"sap.fe.i18n":M.getModel("sap.fe.i18n")},appComponent:x};const t=new C(O,{},n);w(t,M.getController());return(e=t.getContent)===null||e===void 0?void 0:e.call(t,M,x)});if(!this._bAsync){this._aContent=e}return e},{id:function(e){return M.createId(e)},settings:function(e){const t=this.getMetadata().getAssociations();for(const i of Object.keys(t)){if(e[i]!==undefined){const t=Array.isArray(e[i])?e[i]:[e[i]];e[i]=t.map(e=>typeof e==="string"?n.containingView.createId(e):e)}}return e}})}});return g},false);
//# sourceMappingURL=RuntimeBuildingBlockFragment.js.map