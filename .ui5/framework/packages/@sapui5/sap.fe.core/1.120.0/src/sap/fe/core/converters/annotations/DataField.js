/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/PropertyHelper","../helpers/DataFieldHelper"],function(t,e,a,i){"use strict";var o={};var n=i.isReferencePropertyStaticallyHidden;var l=a.getAssociatedUnitProperty;var r=a.getAssociatedTimezoneProperty;var d=a.getAssociatedCurrencyProperty;var s=e.getDisplayMode;var v=t.isProperty;var u=t.isPathAnnotationExpression;var c=t.isAnnotationOfType;function p(t){return t.hasOwnProperty("Action")}o.isDataFieldForActionAbstract=p;function g(t){return(t===null||t===void 0?void 0:t.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"}o.isDataFieldForAnnotation=g;function f(t){return(t===null||t===void 0?void 0:t.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForAction"}o.isDataFieldForAction=f;function m(t){return t.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"}o.isDataFieldForIntentBasedNavigation=m;function $(t){return t.hasOwnProperty("Value")}o.isDataFieldTypes=$;function y(t){return t.hasOwnProperty("Value")}o.isDataField=y;function D(t){const e=t.Target.$target;return c(e,"com.sap.vocabularies.UI.v1.FieldGroupType")}o.hasFieldGroupTarget=D;function T(t){const e=t.Target.$target;return c(e,"com.sap.vocabularies.UI.v1.DataPointType")}o.hasDataPointTarget=T;function b(t){const e=t.targetObject;return F(f(e)?e:undefined)}o.isDataModelObjectPathForActionWithDialog=b;function F(t){const e=t===null||t===void 0?void 0:t.ActionTarget;if(e){var a,i;const t=(a=e.annotations)===null||a===void 0?void 0:(i=a.Common)===null||i===void 0?void 0:i.IsActionCritical;if(e.parameters.length>1||t){return"Dialog"}else{return"None"}}else{return"None"}}o.isActionWithDialog=F;function h(t){let e;if(v(t)){var a,i,o,n,l,r,d,s,c,p;e=((a=t.annotations)===null||a===void 0?void 0:(i=a.UI)===null||i===void 0?void 0:(o=i.DataFieldDefault)===null||o===void 0?void 0:(n=o.Target)===null||n===void 0?void 0:(l=n.$target)===null||l===void 0?void 0:l.TargetValue)??((r=t.annotations)===null||r===void 0?void 0:(d=r.UI)===null||d===void 0?void 0:(s=d.DataFieldDefault)===null||s===void 0?void 0:(c=s.Target)===null||c===void 0?void 0:(p=c.$target)===null||p===void 0?void 0:p.MaximumValue)}else{e=t.TargetValue??t.MaximumValue}if(typeof e==="number"){return e.toString()}return u(e)?e:"100"}o.getTargetValueOnDataPoint=h;const I=function(t){var e,a,i,o,n;return((e=t.annotations)===null||e===void 0?void 0:(a=e.UI)===null||a===void 0?void 0:(i=a.DataFieldDefault)===null||i===void 0?void 0:(o=i.Target)===null||o===void 0?void 0:(n=o.$target)===null||n===void 0?void 0:n.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"};o.isDataPointFromDataFieldDefault=I;const U=function(t){var e,a,i,o,n;return I(t)&&((e=t.annotations)===null||e===void 0?void 0:(a=e.UI)===null||a===void 0?void 0:(i=a.DataFieldDefault)===null||i===void 0?void 0:(o=i.Target)===null||o===void 0?void 0:(n=o.$target)===null||n===void 0?void 0:n.Visualization)==="UI.VisualizationType/Rating"};o.isRatingVisualizationFromDataFieldDefault=U;function P(t,e){if(typeof e==="object"){var a;if($(e)&&(a=e.Value)!==null&&a!==void 0&&a.$target){var i,o,n;const a=(i=e.Value)===null||i===void 0?void 0:i.$target;if((a===null||a===void 0?void 0:(o=a.annotations)===null||o===void 0?void 0:(n=o.Common)===null||n===void 0?void 0:n.SemanticObject)!==undefined){return t.getEntitySetBasedAnnotationPath(a===null||a===void 0?void 0:a.fullyQualifiedName)}}else if(v(e)){var l,r;if((e===null||e===void 0?void 0:(l=e.annotations)===null||l===void 0?void 0:(r=l.Common)===null||r===void 0?void 0:r.SemanticObject)!==undefined){return t.getEntitySetBasedAnnotationPath(e===null||e===void 0?void 0:e.fullyQualifiedName)}}}return undefined}o.getSemanticObjectPath=P;function A(t){if(t){return t.includes("/")?t.substring(0,t.lastIndexOf("/")+1):""}return""}function x(t,e,a,i){if(a==="AnalyticalTable"){var o,n;const a=(o=t.annotations)===null||o===void 0?void 0:(n=o.UI)===null||n===void 0?void 0:n.Hidden;if(a!==null&&a!==void 0&&a.path&&v(a.$target)){const t=e+a.path;i.additionalProperties[t]=a.$target}const l=t.Criticality;if(l!==null&&l!==void 0&&l.path&&v(l===null||l===void 0?void 0:l.$target)){const t=e+l.path;i.additionalProperties[t]=l===null||l===void 0?void 0:l.$target}}return i}function V(t,e,a,i,o){let n=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{properties:{},additionalProperties:{},exportSettings:{},textOnlyPropertiesFromTextAnnotation:[]};let v=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;let c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:false;function p(t,e){if(!n.properties.hasOwnProperty(t)){n.properties[t]=e}return Object.keys(n.properties).indexOf(t)}function g(t){var e,a;n.exportSettings.template=(e=n.exportSettings)!==null&&e!==void 0&&e.template?`${(a=n.exportSettings)===null||a===void 0?void 0:a.template}${t}`:`${t}`}if(t&&e){var f,m,$;let Q;let q;let J;let K;let L;if(c){Q=p(t,e);g(`{${Q}}`);return n}const X=A(t);const Y=(f=e.annotations)===null||f===void 0?void 0:(m=f.Common)===null||m===void 0?void 0:m.Text;if(($=n.exportSettings)!==null&&$!==void 0&&$.template){g("\n");n.exportSettings.wrap=true}if(Y!==null&&Y!==void 0&&Y.path&&Y!==null&&Y!==void 0&&Y.$target){const i=a.getDataModelObjectPath();const o=X+Y.path;const l=s(e,i);let r;switch(l){case"Value":Q=p(t,e);g(`{${Q}}`);break;case"Description":r=p(o,Y.$target);g(`{${r}}`);n.textOnlyPropertiesFromTextAnnotation.push(o);break;case"ValueDescription":Q=p(t,e);r=p(o,Y.$target);g(`{${Q}} ({${r}})`);break;case"DescriptionValue":Q=p(t,e);r=p(o,Y.$target);g(`{${r}} ({${Q}})`);break}}else{var y,D,T,b,F,I,U,P,V,S,O,C,k,N,W;const a=d(e);const o=l(e);const s=a||o;const c=(e===null||e===void 0?void 0:(y=e.annotations)===null||y===void 0?void 0:(D=y.Measures)===null||D===void 0?void 0:D.ISOCurrency)||(e===null||e===void 0?void 0:(T=e.annotations)===null||T===void 0?void 0:(b=T.Measures)===null||b===void 0?void 0:b.Unit);const f=r(e);const m=e===null||e===void 0?void 0:(F=e.annotations)===null||F===void 0?void 0:(I=F.Common)===null||I===void 0?void 0:I.Timezone;if(s){Q=p(t,e);J=p(X+c.path,c.$target);if(v){g(`{${Q}}  {${J}}`)}else{n.exportSettings.unitProperty=X+c.path}if(a){n.exportSettings.isCurrency=true}}else if(f&&m!==null&&m!==void 0&&m.$target){Q=p(t,e);K=p(X+m.path,m.$target);if(v){g(`{${Q}}  {${K}}`)}else{n.exportSettings.timezoneProperty=X+m.path}}else if(((U=e.Target)===null||U===void 0?void 0:(P=U.$target)===null||P===void 0?void 0:P.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"&&!((V=e.Target)!==null&&V!==void 0&&(S=V.$target)!==null&&S!==void 0&&S.ValueFormat)||((O=e.annotations)===null||O===void 0?void 0:(C=O.UI)===null||C===void 0?void 0:(k=C.DataFieldDefault)===null||k===void 0?void 0:(N=k.Target)===null||N===void 0?void 0:(W=N.$target)===null||W===void 0?void 0:W.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var j,w,B,M,z;const a=(j=e.Target)===null||j===void 0?void 0:(w=j.$target)===null||w===void 0?void 0:w.Value.$target;const i=(B=e.Target)===null||B===void 0?void 0:B.$target;const o=(M=e.annotations)===null||M===void 0?void 0:(z=M.UI)===null||z===void 0?void 0:z.DataFieldDefault;Q=p(X?X+t:t,o?e:a);q=h(o?e:i);if(u(q)){if(q.$target){L=p(X?X+q.$target.name:q.$target.name,q.$target);g(`{${Q}}/{${L}}`)}}else{n.exportSettings.dataPointTargetValue=q;g(`{${Q}}/${q}`)}}else if(e.$Type==="com.sap.vocabularies.Communication.v1.ContactType"){var G,R;const t=(G=e.fn)===null||G===void 0?void 0:G.$target;const a=(R=e.fn)===null||R===void 0?void 0:R.path;Q=p(X?X+a:a,t);g(`{${Q}}`)}else if(!i){Q=p(t,e);g(`{${Q}}`);if(c){var E,H;n.exportSettings.unit=`${c}`;if(e!==null&&e!==void 0&&(E=e.annotations)!==null&&E!==void 0&&(H=E.Measures)!==null&&H!==void 0&&H.ISOCurrency){n.exportSettings.isCurrency=true}}else if(m){n.exportSettings.timezone=`${m}`}}}n=x(e,X,o,n);if(Object.keys(n.additionalProperties).length>0&&Object.keys(n.properties).length===0){Q=p(t,e);g(`{${Q}}`)}}return n}o.collectRelatedProperties=V;function S(t,e,a){var i,o,l;let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{properties:{},additionalProperties:{},textOnlyPropertiesFromTextAnnotation:[],exportSettings:{}};let d=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;let s=false;switch(t===null||t===void 0?void 0:t.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":if(t.Value){const i=t.Value;s=n(t);r=V(i.path,i.$target,e,false,a,r,d,s);const o=A(i.path);r=x(t,o,a,r)}break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":switch((i=t.Target)===null||i===void 0?void 0:(o=i.$target)===null||o===void 0?void 0:o.$Type){case"com.sap.vocabularies.UI.v1.FieldGroupType":(l=t.Target.$target.Data)===null||l===void 0?void 0:l.forEach(t=>{r=S(t,e,a,r,true)});break;case"com.sap.vocabularies.UI.v1.DataPointType":s=n(t);r=V(t.Target.$target.Value.path,t,e,false,a,r,d,s);break;case"com.sap.vocabularies.Communication.v1.ContactType":const i=t.Target.$target;s=n(t);r=V(t.Target.value,i,e,s,a,r,d,s);break;default:break}break;default:break}return r}o.collectRelatedPropertiesRecursively=S;const O=function(t){var e,a,i,o;if(v(t)){return t.type}let n;switch(t.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":n=undefined;break;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":n=t===null||t===void 0?void 0:(e=t.Value)===null||e===void 0?void 0:(a=e.$target)===null||a===void 0?void 0:a.type;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":default:if((i=t.Target)!==null&&i!==void 0&&(o=i.$target)!==null&&o!==void 0&&o.$Type){const e=t.Target.$target;if(e.$Type==="com.sap.vocabularies.Communication.v1.ContactType"&&u(e.fn)){var l;n=(l=e.fn.$target)===null||l===void 0?void 0:l.type}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataPointType"){var r,d,s,c;n=((r=e.Value)===null||r===void 0?void 0:(d=r.$Path)===null||d===void 0?void 0:d.$Type)||((s=e.Value)===null||s===void 0?void 0:(c=s.$target)===null||c===void 0?void 0:c.type)}else{n=t.Target.$target.$Type==="com.sap.vocabularies.UI.v1.ChartDefinitionType"?undefined:"Edm.Boolean"}}else{n=undefined}break}return n};o.getDataFieldDataType=O;return o},false);
//# sourceMappingURL=DataField.js.map