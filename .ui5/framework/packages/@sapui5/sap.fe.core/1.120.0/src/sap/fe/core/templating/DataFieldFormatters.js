/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/BindingToolkit","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters"],function(t,e,a,o,n){"use strict";var r={};var i=n.isVisible;var s=n.getConverterContext;var c=o.enhanceDataModelPath;var l=a.or;var d=a.not;var v=a.ifElse;var p=a.equal;var u=a.constant;var f=a.concat;var h=a.compileExpression;var g=a.and;var b=e.UI;var y=t.getInvolvedDataModelObjects;const $=function(t,e){const a=e.context.getPath();if(!t){throw new Error(`Unresolved context path ${a}`)}let o=false;if(typeof t==="object"&&(t.hasOwnProperty("$Path")||t.hasOwnProperty("$AnnotationPath"))){o=true}else if(typeof t==="object"&&t.hasOwnProperty("$kind")&&t.$kind!=="Property"){throw new Error(`Context does not resolve to a DataField object but to a ${t.$kind}`)}let n=s(t,e);if(o){n=n.$target}return n};r.getDataField=$;const m=function(t,e){const a=e.context.getPath();if(!t){throw new Error(`Unresolved context path ${a}`)}if(typeof t==="object"&&t.hasOwnProperty("$kind")&&t.$kind!=="Property"){throw new Error(`Context does not resolve to a Property object but to a ${t.$kind}`)}let o=y(e.context);if(o.targetObject&&o.targetObject.type==="Path"){o=c(o,o.targetObject.path)}if(o.targetObject&&o.targetObject.type==="AnnotationPath"){o=c(o,o.targetObject)}if(a.endsWith("$Path")||a.endsWith("$AnnotationPath")){o=c(o,t)}return o};r.getDataFieldObjectPath=m;const P=function(t,e){const a=$(t,e);return a.$Type==="com.sap.vocabularies.UI.v1.ConnectedFieldsType"};r.isSemanticallyConnectedFields=P;const F=/(?:({[^}]+})[^{]*)/g;const D=/{([^}]+)}(.*)/;const I=function(t,e){let a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const o=t.targetObject;const n=o.Template.toString().match(F);if(!n){return""}const r=n.reduce((a,n)=>{const r=n.match(D);if(r&&r.length>1){const n=r[1];const i=o.Data[n];if(i){const o=c(t,i.fullyQualifiedName.replace(t.targetEntityType.fullyQualifiedName,""));o.targetObject=o.targetObject.Value;a.push(e(o,{}));if(r.length>2){a.push(u(r[2]))}}}return a},[]);return a?h(f(...r)):f(...r)};r.getLabelForConnectedFields=I;const j=function(t,e){var a,o;let n;if(t){switch(t.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataPointType":n=t.Value.$target;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if((t===null||t===void 0?void 0:(a=t.Target)===null||a===void 0?void 0:(o=a.$target)===null||o===void 0?void 0:o.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var r;n=(r=t.Target.$target)===null||r===void 0?void 0:r.Value.$target;break}case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":default:n=undefined}}const s=e!==null&&e!==void 0&&e.isAnalytics?b.IsExpanded:u(false);const c=e!==null&&e!==void 0&&e.isAnalytics?p(b.NodeLevel,0):u(false);return g(...[i(t),v(!!n,n&&i(n),true),l(d(s),c)])};r.generateVisibleExpression=j;return r},false);
//# sourceMappingURL=DataFieldFormatters.js.map