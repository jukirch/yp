import{o as e,e as t,a as s,V as o,d as i,i as n,y as r,b as c,l as a,u as l,t as d,c as h,s as v,f as u,g as p,h as m,j as b,k as f,m as g,n as x,p as y,q as $,r as k,v as w,L as _,w as C,x as P,z as S,A as B,B as A,C as T,D as E,E as I,F as z,G as O,H as j,I as L}from"./0c55c71f.js";var R=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};let N=class extends o{constructor(){super(...arguments),this.active=!1,this.ariaControls="",this.panel=!1,this.role="tab",this.tabId=-1}attributeChangedCallback(e,t,s){if(super.attributeChangedCallback(e,t,s),"active"===e){const e=null!==s;this.ariaSelected=e?"true":"false",this.tabIndex=e?0:-1}}static get styles(){return[super.styles,i([{componentProp:"--foreground",vscodeProp:"--vscode-foreground"},{componentProp:"--panel-inactive-foreground",vscodeProp:"--vscode-panelTitle-inactiveForeground"},{componentProp:"--panel-active-foreground",vscodeProp:"--vscode-panelTitle-activeForeground"},{componentProp:"--panel-active-border",vscodeProp:"--vscode-panelTitle-activeBorder"},{componentProp:"--focus-border",vscodeProp:"--vscode-focusBorder"},{componentProp:"--active-foreground",vscodeProp:"--vscode-settings-headerForeground"}]),n`:host{border-bottom:1px solid transparent;cursor:pointer;display:block;margin-bottom:-1px;overflow:hidden;padding:7px 8px;text-overflow:ellipsis;user-select:none;white-space:nowrap}:host([active]){border-bottom-color:var(--active-foreground);color:var(--active-foreground)}:host([panel]){border-bottom:0;margin-bottom:0;padding:0}:host(:focus-visible){outline:0}.wrapper{align-items:center;color:var(--foreground);display:flex;min-height:20px;overflow:inherit;text-overflow:inherit;position:relative}.wrapper.panel{color:var(--panel-inactive-foreground)}.wrapper.panel.active,.wrapper.panel:hover{color:var(--panel-active-foreground)}:host([panel]) .wrapper{display:flex;font-size:11px;height:31px;padding:2px 10px;text-transform:uppercase}.main{overflow:inherit;text-overflow:inherit}.active-indicator{display:none}.active-indicator.panel.active{border-top:1px solid var(--panel-active-border);bottom:4px;display:block;left:8px;pointer-events:none;position:absolute;right:8px}:host(:focus-visible) .wrapper{outline-color:var(--focus-border);outline-offset:3px;outline-style:solid;outline-width:1px}:host(:focus-visible) .wrapper.panel{outline-offset:-2px}slot[name=content-before]::slotted(vscode-badge){margin-right:8px}slot[name=content-after]::slotted(vscode-badge){margin-left:8px}`]}render(){return r`<div class="${c({wrapper:!0,active:this.active,panel:this.panel})}"><div class="before"><slot name="content-before"></slot></div><div class="main"><slot></slot></div><div class="after"><slot name="content-after"></slot></div><span class="${c({"active-indicator":!0,active:this.active,panel:this.panel})}"></span></div>`}};R([t({type:Boolean,reflect:!0})],N.prototype,"active",void 0),R([t({reflect:!0,attribute:"aria-controls"})],N.prototype,"ariaControls",void 0),R([t({type:Boolean,reflect:!0})],N.prototype,"panel",void 0),R([t({reflect:!0})],N.prototype,"role",void 0),R([t({type:Number,reflect:!0,attribute:"tab-id"})],N.prototype,"tabId",void 0),N=R([s("vscode-tab-header")],N);var M=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};let F=class extends o{constructor(){super(...arguments),this.hidden=!1,this.ariaLabelledby="",this.panel=!1,this.role="tabpanel",this.tabindex=0}static get styles(){return[super.styles,i([{componentProp:"--focus-border",vscodeProp:"--vscode-focusBorder"},{componentProp:"--background",vscodeProp:"--vscode-panel-background"}]),n`:host{display:block;overflow:hidden}:host(:focus-visible){outline-color:var(--focus-border);outline-offset:3px;outline-style:solid;outline-width:1px}:host([panel]){background-color:var(--background)}`]}render(){return r`<slot></slot>`}};M([t({type:Boolean,reflect:!0})],F.prototype,"hidden",void 0),M([t({reflect:!0,attribute:"aria-labelledby"})],F.prototype,"ariaLabelledby",void 0),M([t({type:Boolean,reflect:!0})],F.prototype,"panel",void 0),M([t({reflect:!0})],F.prototype,"role",void 0),M([t({type:Number,reflect:!0})],F.prototype,"tabindex",void 0),F=M([s("vscode-tab-panel")],F);var D=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};let H=class extends o{constructor(){super(),this.panel=!1,this.role="tablist",this.selectedIndex=0,this._tabHeaders=[],this._tabPanels=[],this._componentId="",this._tabFocus=0,this._componentId=l()}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),"selected-index"===e&&this._setActiveTab(),"panel"===e&&(this._tabHeaders.forEach((e=>e.panel=null!==s)),this._tabPanels.forEach((e=>e.panel=null!==s)))}_dispatchSelectEvent(){this.dispatchEvent(new CustomEvent("vsc-select",{detail:{selectedIndex:this.selectedIndex},composed:!0}))}_setActiveTab(){this._tabFocus=this.selectedIndex,this._tabPanels.forEach(((e,t)=>{e.hidden=t!==this.selectedIndex})),this._tabHeaders.forEach(((e,t)=>{e.active=t===this.selectedIndex}))}_focusPrevTab(){0===this._tabFocus?this._tabFocus=this._tabHeaders.length-1:this._tabFocus-=1}_focusNextTab(){this._tabFocus===this._tabHeaders.length-1?this._tabFocus=0:this._tabFocus+=1}_onHeaderKeyDown(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(e.preventDefault(),this._tabHeaders[this._tabFocus].setAttribute("tabindex","-1"),"ArrowLeft"===e.key?this._focusPrevTab():"ArrowRight"===e.key&&this._focusNextTab(),this._tabHeaders[this._tabFocus].setAttribute("tabindex","0"),this._tabHeaders[this._tabFocus].focus()),"Enter"===e.key&&(e.preventDefault(),this.selectedIndex=this._tabFocus,this._dispatchSelectEvent())}_moveHeadersToHeaderSlot(){const e=this._mainSlotElements.filter((e=>e instanceof N));e.length>0&&e.forEach((e=>e.setAttribute("slot","header")))}_onMainSlotChange(){this._moveHeadersToHeaderSlot(),this._tabPanels=this._mainSlotElements.filter((e=>e instanceof F)),this._tabPanels.forEach(((e,t)=>{e.ariaLabelledby=`t${this._componentId}-h${t}`,e.id=`t${this._componentId}-p${t}`,e.panel=this.panel})),this._setActiveTab()}_onHeaderSlotChange(){this._tabHeaders=this._headerSlotElements.filter((e=>e instanceof N)),this._tabHeaders.forEach(((e,t)=>{e.tabId=t,e.id=`t${this._componentId}-h${t}`,e.ariaControls=`t${this._componentId}-p${t}`,e.panel=this.panel,e.active=t===this.selectedIndex}))}_onHeaderClick(e){const t=e.composedPath().find((e=>e instanceof N));t&&(this.selectedIndex=t.tabId,this._setActiveTab(),this._dispatchSelectEvent())}static get styles(){return[super.styles,i([{componentProp:"--font-family",vscodeProp:"--vscode-font-family"},{componentProp:"--font-size",vscodeProp:"--vscode-font-size"},{componentProp:"--font-weight",vscodeProp:"--vscode-font-weight"},{componentProp:"--header-border",vscodeProp:"--vscode-settings-headerBorder"},{componentProp:"--panel-background",vscodeProp:"--vscode-panel-background"}]),n`:host{display:block}.header{align-items:center;display:flex;font-family:var(--font-family);font-size:var(--font-size);font-weight:var(--font-weight);width:100%}.header{border-bottom-color:var(--header-border);border-bottom-style:solid;border-bottom-width:1px}.header.panel{background-color:var(--panel-background);border-bottom-width:0;box-sizing:border-box;padding-left:8px;padding-right:8px}slot[name=addons]{display:block;margin-left:auto}`]}render(){return r`<div class="${c({header:!0,panel:this.panel})}" @click="${this._onHeaderClick}" @keydown="${this._onHeaderKeyDown}"><slot name="header" @slotchange="${this._onHeaderSlotChange}"></slot><slot name="addons"></slot></div><slot @slotchange="${this._onMainSlotChange}"></slot>`}};D([t({type:Boolean,reflect:!0})],H.prototype,"panel",void 0),D([t({reflect:!0})],H.prototype,"role",void 0),D([t({type:Number,reflect:!0,attribute:"selected-index"})],H.prototype,"selectedIndex",void 0),D([a({slot:"header"})],H.prototype,"_headerSlotElements",void 0),D([a()],H.prototype,"_mainSlotElements",void 0),H=D([s("vscode-tabs")],H);class V{constructor(e=10){this._history=[],this._undoSteps=0,this._length=e}clear(){this._history=[]}add(e){var t;const{value:s,type:o,caretPos:i}=e,n=this._history.length;this._undoSteps>0&&(this._history=this._history.slice(0,0-this._undoSteps),this._undoSteps=0),"inputchange"===o&&"inputchange"===(null===(t=this._history[n-1])||void 0===t?void 0:t.type)?(this._history[n-1].value=s,this._history[n-1].caretPos=i):this._history.push({value:s,type:o,caretPos:i}),this._history.length>this._length&&this._history.shift()}undo(){let e;const t=this._history.length-2-this._undoSteps;return this._history[t]&&(this._undoSteps++,e=this._history[t]),e}redo(){let e;const t=this._history.length-this._undoSteps;return this._history[t]&&(this._undoSteps--,e=this._history[t]),e}}const W=e=>{const t=[];let s=0,o=-2;for(;-1!==o;)o=e.indexOf("\n",s),o>-1&&(s=o+1,t.push(o));return t},K=e=>{const{selectionStart:t,selectionEnd:s}=e;return{textBeforeSelection:e.value.substring(0,t),textAfterSelection:e.value.substring(s,e.value.length),selectionStart:t,selectionEnd:s}},q=e=>e.value.split("\n").reduce(((e,t)=>t.length>e?t.length:e),0),U=(e,t=!0)=>{const{selectionStart:s,selectionEnd:o,textBeforeSelection:i,textAfterSelection:n}=K(e),r=i+"\n"+n;if(t){const t=o-(o-s),i=W(r),n=r.split("\n"),c=function(e,t){let s,o=0,i=e.length-1;for(;o<=i;){if(s=Math.floor((o+i)/2),e[s]===t)return s;e[s]<t?o=s+1:i=s-1}return-1}(i,t),a=/^\s+/g.exec(n[c]),l=a?a[0]:"";n[c+1]=l+n[c+1];let d=0;n.forEach(((e,t)=>{t<=c&&(d+=e.length+1)})),e.value=n.join("\n"),e.selectionStart=e.selectionEnd=d+l.length}else e.value=r,e.selectionStart=e.selectionEnd=s+1};var G=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};const X=-1!==navigator.userAgent.indexOf("Mac")?1.5:1.35;let J=class extends v{constructor(){super(...arguments),this.rulers=[],this.lines=10,this.tabSize=2,this.useTabs=!1,this.maxLength=void 0,this._value="",this._linefeedPositions=[],this._lineHeight=0,this._history=new V(50),this._longestLineStrLength=0,this._charWidth=0}set value(e){this._value=e,this._history.clear(),this._history.add({type:"initializing",value:e,caretPos:e.length}),this._linefeedPositions=W(e)}get value(){return this.renderRoot.querySelector("#inputElement").value}connectedCallback(){super.connectedCallback(),this.updateComplete.then((()=>{const e=this._measureCharacter();this._lineHeight=e.h,this._charWidth=e.w}))}_measureCharacter(){var e;const t=getComputedStyle(document.body).getPropertyValue("--vscode-editor-font-size"),s=parseInt(t),o=Math.round(s*X),i=document.createElement("span");i.innerHTML="M",i.style.display="inline-block",i.style.fontSize=t,i.style.fontFamily=getComputedStyle(document.body).getPropertyValue("--vscode-editor-font-family"),i.style.lineHeight=`${o}px`,null===(e=this.shadowRoot)||void 0===e||e.appendChild(i);const n=i.getBoundingClientRect();return i.remove(),{w:n.width,h:n.height}}_handleWrapperClick(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#inputElement");t&&(t.focus(),this._linefeedPositions=W(t.value))}_handleInput(e){const t=e.composedPath()[0];this._history.add({type:"inputchange",value:t.value,caretPos:t.selectionEnd}),this._linefeedPositions=W(t.value),this._longestLineStrLength=q(t)}_handleChange(e){const t=e.composedPath().find((e=>"TEXTAREA"===e.nodeName.toUpperCase()));this.dispatchEvent(new CustomEvent("vsc-change",{detail:t.value}))}_scrollCaretToVisibleArea(e){const t=((e,t)=>{const{selectionStart:s,selectionEnd:o}=e;if(s!==o)return-1;const i=s;return 0===t.length?0:i>t[t.length-1]?t.length:t.findIndex(((e,t,s)=>0===t?i>=0&&i<=e:i>s[t-1]&&i<=e))})(e,W(e.value))+1;this._lineHeight*t<this._wrapperEl.scrollTop?setTimeout((()=>{this._wrapperEl.scrollTop=this._lineHeight*(t-1)+4}),100):this._lineHeight*t>=this._wrapperEl.scrollTop+this.lines*this._lineHeight&&setTimeout((()=>{this._wrapperEl.scrollTop=this._lineHeight*t-this.lines*this._lineHeight}),1)}_handleKeyDown(e){const t=e.composedPath()[0];if("Tab"===e.key&&(e.preventDefault(),((e,t=!0,s=2)=>{const{selectionStart:o,textBeforeSelection:i,textAfterSelection:n}=K(e),r=t?"\t":"".padEnd(s," ");e.value=i+r+n,e.selectionStart=e.selectionEnd=o+r.length})(t,this.useTabs,this.tabSize),this._history.add({type:"keypress",value:t.value,caretPos:t.selectionEnd}),this._scrollCaretToVisibleArea(t)),"Enter"===e.key&&(e.preventDefault(),U(t),this._history.add({type:"keypress",value:t.value,caretPos:t.selectionEnd}),this._wrapperEl.scrollLeft=0,this._scrollCaretToVisibleArea(t)),"z"===e.key&&e.ctrlKey){e.preventDefault(),e.stopPropagation();const s=this._history.undo();if(s){const{value:e,caretPos:o}=s;t.value=e,t.selectionStart=t.selectionEnd=o}}if("y"===e.key&&e.ctrlKey){e.preventDefault(),e.stopPropagation();const s=this._history.redo();if(s){const{value:e,caretPos:o}=s;t.value=e,t.selectionStart=t.selectionEnd=o}}this._linefeedPositions=W(t.value),this._longestLineStrLength=q(t)}_handleKeyUp(e){if("ArrowUp"===e.key||"ArrowDown"===e.key){const t=e.composedPath()[0];this._linefeedPositions=W(t.value)}}static get styles(){return n`:host{display:block}:host-context([data-vscode-theme-kind=vscode-dark]){--background:var(
          --vscode-walkThrough-embeddedEditorBackground,
          rgba(0, 0, 0, 0.4)
        );--border:transparent}:host-context([data-vscode-theme-kind=vscode-light]){--background:var(
          --vscode-walkThrough-embeddedEditorBackground,
          #f4f4f4
        );--border:transparent}:host-context([data-vscode-theme-kind=vscode-high-contrast]){--background:var(
          --vscode-walkThrough-embeddedEditorBackground,
          #000000
        );--border:var(--vscode-contrastBorder, #6fc3df)}:host-context([data-vscode-theme-kind=vscode-high-contrast-light]){--background:var(
          --vscode-walkThrough-embeddedEditorBackground,
          #ffffff
        );--border:var(--vscode-contrastBorder, #6fc3df)}.wrapper{background-color:var(--background);border:1px solid var(--border);border-radius:2px;box-sizing:border-box;overflow-y:auto;padding:4px;position:relative}.wrapper::-webkit-scrollbar{cursor:default;height:10px;width:10px}.wrapper::-webkit-scrollbar-thumb{background-color:var(--vscode-scrollbarSlider-background)}.wrapper::-webkit-scrollbar-corner{background-color:var(--vscode-editorWidget-background)}.editable-area-wrapper{cursor:text;min-height:100%;min-width:100%;overflow:visible;position:relative;width:100%;z-index:2}.textarea-scroller{height:100%;min-width:100%}.textarea{background-color:transparent;border:0;box-sizing:border-box;color:var(--vscode-editorWidget-foreground);display:block;font-family:var(--vscode-editor-font-family);font-size:var(--vscode-editor-font-size);font-weight:var(--vscode-editor-font-weight);height:200px;line-height:1.3;min-width:100%;overflow:hidden;padding:0;position:relative;resize:none;width:100%;white-space:pre;z-index:1}.textarea::selection{background-color:var(--vscode-editor-selectionBackground)}.textarea:focus{outline:0}.rulers{display:block;left:0;margin-left:4px;min-height:100%;overflow:visible;pointer-events:none;position:absolute;top:0;width:calc(100% - 4px);z-index:1}.ruler{border-right:1px solid var(--vscode-editorRuler-foreground);display:flex;height:100%;left:0;position:absolute;top:0}.ruler-placeholder{font-family:var(--vscode-editor-font-family);font-size:var(--vscode-editor-font-size);font-weight:var(--vscode-font-weight);white-space:pre}`}render(){const e=this._linefeedPositions.length+1,t=this._lineHeight*e,s=this._longestLineStrLength*this._charWidth,o=u({height:this.lines*this._lineHeight+8+2+"px"}),i=u({width:`${s}px`}),n=u({height:`${t}px`,lineHeight:`${this._lineHeight}px`,tabSize:String(this.tabSize)}),c=u({height:`${t+8}px`}),a=this.rulers.map((e=>r`<div class="ruler"><div class="ruler-placeholder">${"".padStart(e," ")}</div></div>`));return r`<div class="wrapper" style="${o}" @click="${this._handleWrapperClick}"><div class="editable-area-wrapper" style="${i}"><textarea id="inputElement" class="textarea" spellcheck="false" maxlength="${p(this.maxLength)}" @keydown="${this._handleKeyDown}" @keyup="${this._handleKeyUp}" @input="${this._handleInput}" @change="${this._handleChange}" .value="${this._value}" style="${n}"></textarea></div><div class="rulers" style="${c}">${a}</div></div>`}};G([t()],J.prototype,"value",null),G([t({type:Array})],J.prototype,"rulers",void 0),G([t({type:Number})],J.prototype,"lines",void 0),G([t({type:Number})],J.prototype,"tabSize",void 0),G([t({type:Boolean})],J.prototype,"useTabs",void 0),G([t({type:Number})],J.prototype,"maxLength",void 0),G([d()],J.prototype,"_value",void 0),G([d()],J.prototype,"_linefeedPositions",void 0),G([h(".wrapper")],J.prototype,"_wrapperEl",void 0),G([d()],J.prototype,"_lineHeight",void 0),J=G([s("cme-code-editor")],J);var Q,Y,Z=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};!function(e){e.ARROW_DOWN="ArrowDown",e.ARROW_UP="ArrowUp",e.ENTER="Enter",e.ESCAPE="Escape",e.SPACE=" "}(Q||(Q={})),function(e){e.BRANCH="branch",e.LEAF="leaf"}(Y||(Y={}));const ee=(e,t=[])=>{const s=[];return e.forEach(((e,o)=>{const{label:i,subItems:n,open:r,selected:c,focused:a,icons:l,value:d}=e,h=[...t,o],v={label:i,path:h,open:!!r,selected:!!c,focused:!!a,icons:{...l},value:d};n&&(v.subItems=ee(n,h)),s.push(v)})),s};let te=class extends o{constructor(){super(...arguments),this.indent=8,this.arrows=!1,this.multiline=!1,this.tabindex=0,this._data=[],this._selectedItem=null,this._focusedItem=null,this.onComponentKeyDownBound=this.onComponentKeyDown.bind(this)}set data(e){const t=this._data;this._data=ee(e),this.requestUpdate("data",t)}get data(){return this._data}getItemByPath(e){let t=this._data,s=null;return e.forEach(((o,i)=>{i===e.length-1?s=t[o]:t=t[o].subItems})),s}getItemType(e){return e.subItems&&Array.isArray(e.subItems)&&e.subItems.length>0?Y.BRANCH:Y.LEAF}getIconName(e){if(!e.icons)return;const{icons:t}=e,s=this.getItemType(e),o=e.open||!1;return s===Y.BRANCH&&o?t.open||void 0:s!==Y.BRANCH||o?s===Y.LEAF&&t.leaf||void 0:t.branch||void 0}renderTreeItem({indentLevel:e,label:t,path:s,iconName:o,open:i=!1,itemType:n,selected:c=!1,focused:a=!1,subItems:l}){const d=i?"chevron-down":"chevron-right",h=["contents"],v=i?["open"]:[],p=e*this.indent,b=this.arrows&&n===Y.LEAF?18+p:p,f=this.arrows&&n===Y.BRANCH?r`<vscode-icon name="${d}" class="icon-arrow"></vscode-icon>`:m,g=o?r`<vscode-icon name="${o}" class="label-icon"></vscode-icon>`:m,x=i&&n===Y.BRANCH?r`<ul>${this.renderTree(l,s)}</ul>`:m,y=r`<span class="label">${t}</span>`;return v.push(n===Y.LEAF?"leaf":"branch"),c&&h.push("selected"),a&&h.push("focused"),r`<li data-path="${s.join("/")}" class="${v.join(" ")}"><span class="${h.join(" ")}" style="${u({paddingLeft:`${b}px`})}">${f} ${g} ${y} </span>${x}</li>`}renderTree(e,t=[]){const s=[];return e?(e.forEach(((e,o)=>{const i=[...t,o],n=i.length-1,r=this.getItemType(e),c=this.getIconName(e),{label:a,open:l=!1,selected:d=!1,focused:h=!1,subItems:v=[]}=e;d&&(this._selectedItem=e),h&&(this._focusedItem=e),s.push(this.renderTreeItem({indentLevel:n,label:a,path:i,open:l,iconName:c,itemType:r,selected:d,focused:h,subItems:v}))})),s):m}toggleSubTreeOpen(e){e.subItems&&(e.open=!e.open)}selectTreeItem(e){this._selectedItem&&(this._selectedItem.selected=!1),this._selectedItem=e,e.selected=!0}focusTreeItem(e){this._focusedItem&&(this._focusedItem.focused=!1),this._focusedItem=e,e.focused=!0}closeSubTreeRecursively(e){e.forEach((e=>{e.open=!1,e.subItems&&e.subItems.length>0&&this.closeSubTreeRecursively(e.subItems)}))}emitSelectEvent(e,t){const{icons:s,label:o,open:i,value:n}=e,r={icons:s,itemType:this.getItemType(e),label:o,open:i||!1,value:n||o,path:t};this.dispatchEvent(new CustomEvent("vsc-select",{bubbles:!0,composed:!0,detail:r}))}_focusItem(e){this._focusedItem&&(this._focusedItem.focused=!1),this._focusedItem=e,this._focusedItem.focused=!0}_focusPrevItem(){var e;if(!this._focusedItem)return void this._focusItem(this._data[0]);const{path:t}=this._focusedItem;if(t&&(null==t?void 0:t.length)>0){const s=t[t.length-1],o=t.length>1;if(s>0){const o=[...t];o[o.length-1]=s-1;const i=this.getItemByPath(o);let n=i;if((null==i?void 0:i.open)&&(null===(e=i.subItems)||void 0===e?void 0:e.length)){const{subItems:e}=i;n=e[e.length-1]}this._focusItem(n)}else if(o){const e=[...t];e.pop(),this._focusItem(this.getItemByPath(e))}}else this._focusItem(this._data[0])}_focusNextItem(){if(!this._focusedItem)return void this._focusItem(this._data[0]);const{path:e,open:t}=this._focusedItem;if(t&&Array.isArray(this._focusedItem.subItems)&&this._focusedItem.subItems.length>0)return void this._focusItem(this._focusedItem.subItems[0]);const s=[...e];s[s.length-1]+=1;let o=this.getItemByPath(s);o?this._focusItem(o):(s.pop(),s.length>0&&(s[s.length-1]+=1,o=this.getItemByPath(s),o&&this._focusItem(o)))}onComponentClick(e){const t=e.composedPath().find((e=>e.tagName&&"LI"===e.tagName.toUpperCase()));if(t){const e=t.dataset.path||"",s=e.split("/").map((e=>Number(e))),o=this.getItemByPath(s);this.toggleSubTreeOpen(o),this.selectTreeItem(o),this.focusTreeItem(o),this.emitSelectEvent(o,e),this.requestUpdate()}else this._focusedItem&&(this._focusedItem.focused=!1),this._focusedItem=null}onComponentKeyDown(e){[Q.ARROW_DOWN,Q.ARROW_UP,Q.ENTER,Q.ESCAPE,Q.SPACE].includes(e.key)&&(e.stopPropagation(),e.preventDefault()),e.key===Q.ESCAPE&&(this._focusedItem=null),e.key===Q.ARROW_UP&&this._focusPrevItem(),e.key===Q.ARROW_DOWN&&this._focusNextItem(),e.key!==Q.ENTER&&e.key!==Q.SPACE||(this._selectedItem&&(this._selectedItem.selected=!1),this._focusedItem&&(this._selectedItem=this._focusedItem),this._selectedItem&&(this._selectedItem.selected=!0,this._selectedItem.open=!this._selectedItem.open,this.emitSelectEvent(this._selectedItem,this._selectedItem.path.join("/")),this.requestUpdate()))}closeAll(){this.closeSubTreeRecursively(this.data),this.requestUpdate()}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",this.onComponentKeyDownBound)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keydown",this.onComponentKeyDownBound)}static get styles(){return[super.styles,i([{componentProp:"--focus-border",vscodeProp:"--vscode-list-focusOutline"},{componentProp:"--font-family",vscodeProp:"--vscode-font-family"},{componentProp:"--font-size",vscodeProp:"--vscode-font-size"},{componentProp:"--font-weight",vscodeProp:"--vscode-font-weight"},{componentProp:"--hover-foreground",vscodeProp:"--vscode-list-hoverForeground"},{componentProp:"--hover-background",vscodeProp:"--vscode-list-hoverBackground"},{componentProp:"--inactive-selection-background",vscodeProp:"--vscode-list-inactiveSelectionBackground"},{componentProp:"--active-selection-background",vscodeProp:"--vscode-list-activeSelectionBackground"},{componentProp:"--active-selection-foreground",vscodeProp:"--vscode-list-activeSelectionForeground"}]),n`:host{display:block;outline:0;user-select:none}.wrapper{height:100%}:host(:focus) .wrapper.focused-none{outline:1px solid var(--focus-border)}li{list-style:none}li,ul{margin:0;padding:0}.contents{align-items:center;display:flex;font-family:var(--font-family);font-size:var(--font-size);font-weight:var(--font-weight)}.multi .contents{align-items:flex-start}.contents:hover{background-color:var(--hover-background);color:var(--hover-foreground);cursor:pointer}.contents.selected{background-color:var(--inactive-selection-background)}:host(:focus) .contents.focused{background-color:var(--focus-background);outline:1px solid var(--focus-border);outline-offset:-1px}:host(:focus) .contents.selected,:host(:focus) .contents.selected.focused{background-color:var(--active-selection-background);color:var(--active-selection-foreground)}.icon-arrow{display:block;margin:3px 2px 3px 0}.label-icon{display:block;margin-right:6px}:host(:focus) .contents.selected .label-icon,:host(:focus) .contents.selected.focused .label-icon{color:var(--active-selection-foreground)}.multi .contents .label-icon{margin-top:3px}.label{display:block;line-height:22px}.single .label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}`]}render(){const e=c({multi:this.multiline,single:!this.multiline,wrapper:!0,"focused-none":!this._focusedItem,"selection-none":!this._selectedItem,"selection-single":null!==this._selectedItem});return r`<div @click="${this.onComponentClick}" class="${e}"><ul>${this.renderTree(this._data)}</ul></div>`}};Z([t({type:Array,reflect:!1})],te.prototype,"data",null),Z([t({type:Number})],te.prototype,"indent",void 0),Z([t({type:Boolean})],te.prototype,"arrows",void 0),Z([t({type:Boolean})],te.prototype,"multiline",void 0),Z([t({type:Number,reflect:!0})],te.prototype,"tabindex",void 0),Z([d()],te.prototype,"_selectedItem",void 0),Z([d()],te.prototype,"_focusedItem",void 0),te=Z([s("vscode-tree")],te);var se=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};let oe=class extends v{constructor(){super(...arguments),this.data=[],this.loading=!1,this.maxItems=10}_handleItemSelect(e){this.dispatchEvent(new CustomEvent("cme-select",{detail:e.detail.value}))}static get styles(){return n`@keyframes pulse{0%{opacity:.03}50%{opacity:.1}100%{opacity:.03}}:host{display:block;user-select:none}.title{color:var(--vscode-settings-headerForeground);font-size:var(--vscode-font-size);font-weight:600;line-height:22px;margin:0}.spinner-wrapper{display:flex;justify-content:center;margin:8px 0}.placeholder-item{animation:pulse 1.5s infinite;box-sizing:border-box;height:22px;margin-left:22px;opacity:.1;padding-top:7px;position:relative}.placeholder-item:before{background-color:var(--vscode-editor-foreground);content:'';display:block;height:16px;left:-22px;position:absolute;top:3px;width:16px}.placeholder-item:after{background-color:var(--vscode-editor-foreground);content:'';display:block;height:9px}`}render(){const e=void 0!==this.data?((e,t)=>{if(!Array.isArray(e))return[];let s=e;return e.length>t&&(s=e.slice(0,t)),s.map((e=>{const{message:t}=e;return{label:t.split("\n")[0],value:t}}))})(this.data,this.maxItems).map((({label:e,value:t})=>({icons:{leaf:"git-commit"},label:e,value:t}))):[],t=Array(this.maxItems).fill(r`<div class="placeholder-item"></div>`);return r`<h2 class="title">Recent commits:</h2>${this.loading?r`<div class="placeholder">${t}</div>`:r`<vscode-tree tabindex="0" .data="${e}" @vsc-select="${this._handleItemSelect}"></vscode-tree>`}`}};se([t({type:Array})],oe.prototype,"data",void 0),se([t({type:Boolean})],oe.prototype,"loading",void 0),se([t({type:Number})],oe.prototype,"maxItems",void 0),oe=se([s("cme-recent-commits")],oe);var ie=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};let ne=class extends(b(f)(v)){constructor(){super(...arguments),this._numberOfRepositories=1,this._selectedRepositoryPath="",this._availableRepositories=[]}get selectedRepositoryPath(){return this._selectedRepositoryPath}stateChanged(e){const{numberOfRepositories:t,selectedRepositoryPath:s,availableRepositories:o}=e;this._numberOfRepositories=t,this._selectedRepositoryPath=s,this._availableRepositories=o}_getNameFromPath(e){const t=e.split("/");return t[t.length-1]}_handleChange(e){const t=e.detail.value,s=new CustomEvent("cme-change",{detail:t});this._selectedRepositoryPath=t,this.dispatchEvent(s),f.dispatch(g(t))}static get styles(){return n`.repo-info{align-items:center;color:var(--vscode-input-foreground);display:flex;font-size:var(--vscode-font-size);margin:10px 0}`}render(){return this._numberOfRepositories<2?r`${m}`:r`<div class="repo-info"><vscode-icon name="repo"></vscode-icon>  <b>Selected repository:</b> <vscode-single-select @vsc-change="${this._handleChange}" .value="${this._selectedRepositoryPath}">${this._availableRepositories.map((e=>r`<vscode-option description="${e}" value="${e}">${this._getNameFromPath(e)}</vscode-option>`))}</vscode-single-select></div>`}};ie([t()],ne.prototype,"selectedRepositoryPath",null),ie([d()],ne.prototype,"_numberOfRepositories",void 0),ie([d()],ne.prototype,"_selectedRepositoryPath",void 0),ie([d()],ne.prototype,"_availableRepositories",void 0),ne=ie([s("cme-repo-selector")],ne);const re=e=>{Array.from(e).forEach((e=>{const t=e.value;e.value=""===t?" ":"",e.value=t}))};var ce=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};let ae=class extends(b(f)(v)){constructor(){super(...arguments),this._showRecentCommits=!1,this._isCommitsLoading=!1,this._commits=void 0,this._saveAndClose=!1,this._inputBoxValue="",this._useMonospaceEditor=!1,this._tabSize=4,this._useTabs=!1,this._rulers=[],this._visibleLines=10,this._staticTemplate="",this._amendCbChecked=!1}visibleCallback(){var e,t;const s=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelectorAll("vscode-inputbox[multiline]");re(s);const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("cme-code-editor");o&&o.connectedCallback()}_handleLoadTemplateButtonClick(e){e.stopPropagation(),e.preventDefault(),f.dispatch(x(this._staticTemplate))}_handleInputBoxChange(e){this._inputBoxValue=e.detail,f.dispatch(x(this._inputBoxValue))}_handleSuccessButtonClick(){const{selectedRepositoryPath:e}=this._repoSelector,t=y({commitMessage:this._inputBoxValue,selectedRepositoryPath:e});this._amendCbChecked?f.dispatch($(this._inputBoxValue)):this._saveAndClose?(f.dispatch(t),f.dispatch(k())):f.dispatch(t)}_handleCancelButtonClick(){f.dispatch(k())}_handleCheckBoxChange(e){const{checked:t}=e.detail;this._amendCbChecked=t,t&&this._commits&&this._commits.length>0&&f.dispatch(x(this._commits[0].message))}_handleSelect(e){f.dispatch(x(e.detail))}_handleRepositoryChange(e){f.dispatch(w(e.detail))}stateChanged(e){const{config:t}=e,{saveAndClose:s,showRecentCommits:o,useMonospaceEditor:i,tabSize:n,useTabs:r,rulers:c,visibleLines:a}=t.view;this._saveAndClose=s,this._staticTemplate=t.staticTemplate.join("\n"),this._showRecentCommits=o,this._useMonospaceEditor=i,this._tabSize=n,this._useTabs=r,this._rulers=c,this._visibleLines=a,this._isCommitsLoading=e.recentCommitsLoading,this._inputBoxValue=e.textareaValue,this._visibleLines=t.view.visibleLines,void 0!==e.recentCommits&&this._showRecentCommits&&(this._commits=e.recentCommits),void 0===e.recentCommits&&this._showRecentCommits&&!this._isCommitsLoading&&f.dispatch(w())}connectedCallback(){super.connectedCallback(),void 0===this._commits&&this._showRecentCommits&&f.dispatch(w())}static get styles(){return n`.inputbox{width:100%}.editor-toolbar{display:block;overflow:visible}.editor-toolbar p{color:var(--vscode-descriptionForeground);margin:10px 0}.editor-toolbar a{align-items:center;color:var(--vscode-textLink-foreground);display:inline-flex;outline-color:var(--vscode-focusBorder);text-decoration:none}.editor-toolbar a:active,.editor-toolbar a:focus,.editor-toolbar a:hover{color:var(--vscode-textLink-activeForeground)}.editor-toolbar vscode-icon{cursor:pointer;margin-right:2px}.buttons{align-items:center;display:flex;margin-top:10px}.buttons .cb-amend{margin-left:20px}.buttons vscode-button{margin-right:10px}cme-recent-commits{margin-top:30px}`}render(){let e=m;this._showRecentCommits&&(e=r`<cme-recent-commits .data="${this._commits}" ?loading="${this._isCommitsLoading}" @cme-select="${this._handleSelect}"></cme-recent-commits>`);const t=r`<vscode-inputbox ?multiline="${!0}" id="message-box" lines="${this._visibleLines}" maxlines="${this._visibleLines}" value="${this._inputBoxValue}" @vsc-change="${this._handleInputBoxChange}" class="inputbox"></vscode-inputbox>`,s=r`<cme-code-editor value="${this._inputBoxValue}" lines="${this._visibleLines}" tabsize="${this._tabSize}" .useTabs="${this._useTabs}" .rulers="${this._rulers}" @vsc-change="${this._handleInputBoxChange}"></cme-code-editor>`;return r`<div class="editor-toolbar"><p><a href="#" title="Load configured template" @click="${this._handleLoadTemplateButtonClick}"><vscode-icon name="file"></vscode-icon>Load template</a></p></div>${this._useMonospaceEditor?s:t}<cme-repo-selector id="text-view-repo-selector" @cme-change="${this._handleRepositoryChange}"></cme-repo-selector><div class="buttons"><vscode-button @click="${this._handleSuccessButtonClick}">${this._saveAndClose?"Save and close":"Save"}</vscode-button><vscode-button @click="${this._handleCancelButtonClick}" secondary>Cancel</vscode-button><vscode-checkbox label="Amend previous commit" class="cb-amend" id="text-amend-checkbox" @vsc-change="${this._handleCheckBoxChange}"></vscode-checkbox></div>${e}`}};ce([d()],ae.prototype,"_showRecentCommits",void 0),ce([d()],ae.prototype,"_isCommitsLoading",void 0),ce([d()],ae.prototype,"_commits",void 0),ce([d()],ae.prototype,"_saveAndClose",void 0),ce([d()],ae.prototype,"_inputBoxValue",void 0),ce([d()],ae.prototype,"_useMonospaceEditor",void 0),ce([d()],ae.prototype,"_tabSize",void 0),ce([d()],ae.prototype,"_useTabs",void 0),ce([d()],ae.prototype,"_rulers",void 0),ce([d()],ae.prototype,"_visibleLines",void 0),ce([h("#text-view-repo-selector")],ae.prototype,"_repoSelector",void 0),ae=ce([s("cme-text-view")],ae);const{I:le}=_,de=()=>document.createComment(""),he=(e,t,s)=>{var o;const i=e._$AA.parentNode,n=void 0===t?e._$AB:t._$AA;if(void 0===s){const t=i.insertBefore(de(),n),o=i.insertBefore(de(),n);s=new le(t,o,e,e.options)}else{const t=s._$AB.nextSibling,r=s._$AM,c=r!==e;if(c){let t;null===(o=s._$AQ)||void 0===o||o.call(s,e),s._$AM=e,void 0!==s._$AP&&(t=e._$AU)!==r._$AU&&s._$AP(t)}if(t!==n||c){let e=s._$AA;for(;e!==t;){const t=e.nextSibling;i.insertBefore(e,n),e=t}}}return s},ve=(e,t,s=e)=>(e._$AI(t,s),e),ue={},pe=e=>{var t;null===(t=e._$AP)||void 0===t||t.call(e,!1,!0);let s=e._$AA;const o=e._$AB.nextSibling;for(;s!==o;){const e=s.nextSibling;s.remove(),s=e}},me=(e,t,s)=>{const o=new Map;for(let i=t;i<=s;i++)o.set(e[i],i);return o},be=C(class extends P{constructor(e){if(super(e),e.type!==S.CHILD)throw Error("repeat() can only be used in text expressions")}ht(e,t,s){let o;void 0===s?s=t:void 0!==t&&(o=t);const i=[],n=[];let r=0;for(const t of e)i[r]=o?o(t,r):r,n[r]=s(t,r),r++;return{values:n,keys:i}}render(e,t,s){return this.ht(e,t,s).values}update(e,[t,s,o]){var i;const n=(e=>e._$AH)(e),{values:r,keys:c}=this.ht(t,s,o);if(!Array.isArray(n))return this.ut=c,r;const a=null!==(i=this.ut)&&void 0!==i?i:this.ut=[],l=[];let d,h,v=0,u=n.length-1,p=0,m=r.length-1;for(;v<=u&&p<=m;)if(null===n[v])v++;else if(null===n[u])u--;else if(a[v]===c[p])l[p]=ve(n[v],r[p]),v++,p++;else if(a[u]===c[m])l[m]=ve(n[u],r[m]),u--,m--;else if(a[v]===c[m])l[m]=ve(n[v],r[m]),he(e,l[m+1],n[v]),v++,m--;else if(a[u]===c[p])l[p]=ve(n[u],r[p]),he(e,n[v],n[u]),u--,p++;else if(void 0===d&&(d=me(c,p,m),h=me(a,v,u)),d.has(a[v]))if(d.has(a[u])){const t=h.get(c[p]),s=void 0!==t?n[t]:null;if(null===s){const t=he(e,n[v]);ve(t,r[p]),l[p]=t}else l[p]=ve(s,r[p]),he(e,n[v],s),n[t]=null;p++}else pe(n[u]),u--;else pe(n[v]),v++;for(;p<=m;){const t=he(e,l[m+1]);ve(t,r[p]),l[p++]=t}for(;v<=u;){const e=n[v++];null!==e&&pe(e)}return this.ut=c,((e,t=ue)=>{e._$AH=t})(e,l),B}});var fe=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};let ge=class extends A{set selectedIndexes(e){this._selectedIndexes=e}get selectedIndexes(){return this._selectedIndexes}set value(e){this._values=e;const t={};this._options.forEach((({value:e},s)=>{t[e]=s})),this._selectedIndexes=[],e.forEach((e=>{t[e]&&this._selectedIndexes.push(t[e])}))}get value(){return this._values}constructor(){super(),this._multiple=!0}_onOptionClick(e){const t=e.composedPath().find((e=>"matches"in e&&e.matches("li.option")));if(!t)return;const s=Number(t.dataset.index);this._options[s]&&(this._options[s].selected=!this._options[s].selected),this._selectedIndexes=[],this._values=[],this._options.forEach((e=>{e.selected&&(this._selectedIndexes.push(e.index),this._values.push(e.value))})),this._dispatchChangeEvent()}_onMultiAcceptClick(){this._toggleDropdown(!1)}_onMultiDeselectAllClick(){this._selectedIndexes=[],this._values=[],this._options=this._options.map((e=>({...e,selected:!1}))),this._dispatchChangeEvent()}_onMultiSelectAllClick(){this._selectedIndexes=[],this._values=[],this._options=this._options.map((e=>({...e,selected:!0}))),this._options.forEach(((e,t)=>{this._selectedIndexes.push(t),this._values.push(e.value),this._dispatchChangeEvent()}))}_renderLabel(){switch(this._selectedIndexes.length){case 0:return r`<span class="select-face-badge no-item">No items selected</span>`;case 1:return r`<span class="select-face-badge">1 item selected</span>`;default:return r`<span class="select-face-badge">${this._selectedIndexes.length} items selected</span>`}}_renderSelectFace(){return r`<div class="select-face multiselect" @click="${this._onFaceClick}">${this._renderLabel()} ${T}</div>`}_renderComboboxFace(){const e=this._selectedIndex>-1?this._options[this._selectedIndex].label:"";return r`<div class="combobox-face">${this._renderLabel()} <input class="combobox-input" spellcheck="false" type="text" .value="${e}" @focus="${this._onComboboxInputFocus}" @input="${this._onComboboxInputInput}"> <button class="combobox-button" type="button" @click="${this._onComboboxButtonClick}" @keydown="${this._onComboboxButtonKeyDown}">${T}</button></div>`}_renderOptions(){const e=this.combobox?this._filteredOptions:this._options;return r`<ul class="options" @click="${this._onOptionClick}" @mouseover="${this._onOptionMouseOver}">${be(e,(e=>e.index),((e,t)=>{const s=this._selectedIndexes.includes(e.index),o=c({active:t===this._activeIndex,option:!0,selected:s}),i=c({"checkbox-icon":!0,checked:s});return r`<li class="${o}" data-index="${e.index}" data-filtered-index="${t}"><span class="${i}"></span> <span class="option-label">${e.label}</span></li>`}))}</ul>`}_renderDropdownControls(){return r`<div class="dropdown-controls"><button type="button" @click="${this._onMultiSelectAllClick}" title="Select all" class="action-icon"><vscode-icon name="checklist"></vscode-icon></button> <button type="button" @click="${this._onMultiDeselectAllClick}" title="Deselect all" class="action-icon"><vscode-icon name="clear-all"></vscode-icon></button><vscode-button @click="${this._onMultiAcceptClick}">OK</vscode-button></div>`}};fe([t({type:Array,attribute:!1})],ge.prototype,"selectedIndexes",null),fe([t({type:Array})],ge.prototype,"value",null),ge=fe([s("vscode-multi-select")],ge);var xe=()=>{};class ye{constructor(){this._tokens=[],this._handleFormItemChange=xe}set tokens(e){this._tokens=e}get tokens(){return this._tokens}set formItemChangeHandler(e){this._handleFormItemChange=e}build(){return this._tokens.map((e=>{switch(e.type){case"enum":return this._renderEnumTypeWidget(e);case"text":return this._renderTextTypeWidget(e);case"boolean":return this._renderBooleanTypeWidget(e);default:return r`${m}`}}))}_renderFormItem(e,t,s=""){let o=r`${m}`;return s&&(o=r`<vscode-form-helper>${s}</vscode-form-helper>`),r`<vscode-form-group variant="settings-group"><vscode-label>${t}</vscode-label>${o} ${e}</vscode-form-group>`}_renderEnumTypeWidget(e){var t;const{description:s,label:o,name:i,multiple:n,combobox:c}=e,a=c||!1,l=null===(t=e.options)||void 0===t?void 0:t.map((e=>{const{label:t,value:s,description:o}=e;return r`<vscode-option value="${p(s)}" description="${p(o)}">${t}</vscode-option>`})),d=n?r`<vscode-multi-select name="${i}" @vsc-change="${this._handleFormItemChange}" .combobox="${a}" class="vscode-select">${l}</vscode-multi-select>`:r`<vscode-single-select data-name="${i}" name="${i}" @vsc-change="${this._handleFormItemChange}" .combobox="${a}" class="vscode-select">${l}</vscode-single-select>`;return this._renderFormItem(d,o,s)}_renderTextTypeWidget(e){const{description:t,label:s,multiline:o,monospace:i,name:n,lines:c,maxLines:a,maxLength:l,maxLineLength:d}=e;let h;return h=o&&i?r`<cme-code-editor data-name="${n}" name="${n}" @vsc-change="${this._handleFormItemChange}" lines="${p(c)}" .rulers="${d?[d]:[]}"></cme-code-editor>`:r`<vscode-inputbox data-name="${n}" name="${n}" ?multiline="${o}" @vsc-change="${this._handleFormItemChange}" lines="${p(c)}" maxLines="${p(a)}" maxLength="${p(l)}" style="width:100%"></vscode-inputbox>`,this._renderFormItem(h,s,t)}_renderBooleanTypeWidget(e){const{description:t,label:s,name:o,value:i}=e,n=r`<vscode-checkbox data-name="${o}" name="${o}" label="${s}" value="${p(i)}" @vsc-change="${this._handleFormItemChange}"></vscode-checkbox>`;return this._renderFormItem(n,s,t)}}class $e{constructor(e,t,s){this._template="",this._tokens=[],this._tokenValues={},this._reduceEmptyLines=!0,this._template=e.join("\n"),this._tokens=t,this._tokenValues=s}set reduceEmptyLines(e){this._reduceEmptyLines=e}compile(){let e=this._template;return this._tokens.forEach((({name:t,prefix:s="",suffix:o=""})=>{let i=this._tokenValues[t]||"";i=i?s+i+o:"",e=e.replace(new RegExp(`{${t}}`,"g"),i)})),this._reduceEmptyLines&&(e=e.replace(/\n{3,}/g,"\n\n"),e=e.replace(/\n+$/g,"")),e}}var ke=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};let we=class extends(b(f)(v)){constructor(){super(...arguments),this._saveAndClose=!1,this._tokens=[],this._amendCbChecked=!1,this._tokenValues={},this._dynamicTemplate=[],this._reduceEmptyLines=!0}visibleCallback(){var e,t;const s=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelectorAll("vscode-inputbox[multiline]");re(s);const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelectorAll("cme-code-editor");(null==o?void 0:o.length)&&o.forEach((e=>e.connectedCallback()))}connectedCallback(){super.connectedCallback(),this.updateComplete.then((()=>{requestAnimationFrame((()=>{this._updateTokenValues()}))}))}stateChanged(e){const{config:t,tokenValues:s}=e,{view:o,tokens:i,dynamicTemplate:n,reduceEmptyLines:r}=t;this._saveAndClose=o.saveAndClose,this._tokens=i,this._tokenValues=s,this._dynamicTemplate=n,this._reduceEmptyLines=r}_updateTokenValues(){const e=this._formContainer.data,t={};this._codeEditors.length>0&&this._codeEditors.forEach((t=>{t.dataset.name&&(e[t.dataset.name]=t.value)})),this._tokens.forEach((s=>{const{name:o,type:i,separator:n=""}=s,r=e[o];switch(i){case"enum":t[o]=Array.isArray(r)?r.join(n):r;break;case"text":t[o]=String(r);break;case"boolean":Array.isArray(r)&&r[0]?t[o]=r[0]:t[o]=""}})),f.dispatch(E(t))}_handleFormItemChange(){this._updateTokenValues()}_handleRepositoryChange(e){f.dispatch(w(e.detail))}_handleSuccessButtonClick(){const e=new $e(this._dynamicTemplate,this._tokens,this._tokenValues);e.reduceEmptyLines=this._reduceEmptyLines;const t=e.compile(),{selectedRepositoryPath:s}=this._repoSelector;this._amendCbChecked?f.dispatch($(t)):this._saveAndClose?(f.dispatch(y({commitMessage:t,selectedRepositoryPath:s})),f.dispatch(k())):f.dispatch(y({commitMessage:t,selectedRepositoryPath:s}))}_handleCancelButtonClick(){f.dispatch(k())}_handleCheckBoxChange(e){const{checked:t}=e.detail;this._amendCbChecked=t}static get styles(){return n`.edit-form{margin:0 auto}.edit-form vscode-form-container{max-width:none;width:100%}.edit-form vscode-form-group{max-width:none;padding-left:0;padding-right:0}.vscode-select{display:block}cme-code-editor{margin-top:9px}.buttons{align-items:center;display:flex;margin-top:10px}.buttons .cb-amend{margin-left:20px}.buttons vscode-button{margin-right:10px}`}render(){const e=new ye;e.formItemChangeHandler=this._handleFormItemChange,e.tokens=this._tokens;const t=e.build();return r`<div id="edit-form" class="edit-form"><vscode-form-container id="form-container">${t}</vscode-form-container></div><cme-repo-selector id="form-view-repo-selector" @cme-change="${this._handleRepositoryChange}"></cme-repo-selector><div class="buttons"><vscode-button id="success-button-form" @click="${this._handleSuccessButtonClick}">${this._saveAndClose?"Save and close":"Save"}</vscode-button><vscode-button id="cancel-button-form" @click="${this._handleCancelButtonClick}" secondary>Cancel</vscode-button><vscode-checkbox label="Amend previous commit" class="cb-amend" id="form-amend-checkbox" @vsc-change="${this._handleCheckBoxChange}"></vscode-checkbox></div>`}};ke([h("#form-container")],we.prototype,"_formContainer",void 0),ke([function(t){return e({descriptor:e=>({get(){var e,s;return null!==(s=null===(e=this.renderRoot)||void 0===e?void 0:e.querySelectorAll(t))&&void 0!==s?s:[]},enumerable:!0,configurable:!0})})}("cme-code-editor")],we.prototype,"_codeEditors",void 0),ke([d()],we.prototype,"_saveAndClose",void 0),ke([d()],we.prototype,"_tokens",void 0),ke([d()],we.prototype,"_amendCbChecked",void 0),ke([d()],we.prototype,"_tokenValues",void 0),ke([d()],we.prototype,"_dynamicTemplate",void 0),ke([h("#form-view-repo-selector")],we.prototype,"_repoSelector",void 0),we=ke([s("cme-form-view")],we);var _e=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};const Ce=I();let Pe=class extends(b(f)(v)){constructor(){super(...arguments),this._selectedIndex=0,this._visibleViews="both",this._fullWidth=!1}stateChanged(e){const{defaultView:t,visibleViews:s,fullWidth:o}=e.config.view;this._selectedIndex="text"===t?0:1,this._visibleViews=s,this._fullWidth=o}static get styles(){return n`:host{display:block;position:relative}.wrapper{margin:0 auto 30px;max-width:727px;position:relative;width:100%}.wrapper.full{max-width:none}vscode-icon[name=settings-gear]{position:absolute;right:0}.wrapper.both vscode-icon[name=settings-gear]{top:7px}.wrapper.text vscode-icon[name=settings-gear]{top:0}.wrapper.form vscode-icon[name=settings-gear]{top:12px}vscode-tab-panel{overflow:visible}`}_handleTabChange(e){var t;const s=0===e.detail.selectedIndex?"cme-text-view":"cme-form-view";(null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(s)).visibleCallback()}_onSettingsIconClick(){Ce.postMessage({command:"openConfigurationPage"})}_renderPortableSettingsButton(){return r`<vscode-icon name="settings-gear" action-icon title="Edit commit templates" @click="${this._onSettingsIconClick}"></vscode-icon>`}render(){const e=r`<cme-text-view></cme-text-view>`,t=r`<cme-form-view></cme-form-view>`,s=r`<div class="${c({wrapper:!0,full:this._fullWidth,both:!0})}">${this._renderPortableSettingsButton()}<vscode-tabs .selectedIndex="${this._selectedIndex}" @vsc-select="${this._handleTabChange}"><vscode-tab-header slot="header">Edit as text</vscode-tab-header><vscode-tab-panel>${e}</vscode-tab-panel><vscode-tab-header slot="header">Edit as form</vscode-tab-header><vscode-tab-panel>${t}</vscode-tab-panel></vscode-tabs></div>`;let o;switch(this._visibleViews){case"text":o=r`<div class="${c({wrapper:!0,full:this._fullWidth,text:!0})}">${this._renderPortableSettingsButton()} ${e}</div>`;break;case"form":o=r`<div class="${c({wrapper:!0,full:this._fullWidth,form:!0})}">${this._renderPortableSettingsButton()} ${t}</div>`;break;default:o=s}return o}};_e([d()],Pe.prototype,"_selectedIndex",void 0),_e([d()],Pe.prototype,"_visibleViews",void 0),_e([d()],Pe.prototype,"_fullWidth",void 0),Pe=_e([s("cme-editor")],Pe);var Se=function(e,t,s,o){for(var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o,c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};const Be=I();let Ae=class extends(b(f)(v)){constructor(){super(),this._handlePostMessagesBound=this._handlePostMessages.bind(this),Be.postMessage({command:"requestConfig"})}connectedCallback(){super.connectedCallback(),window.addEventListener("message",this._handlePostMessagesBound)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("message",this._handlePostMessagesBound)}static get styles(){return n`:host{display:block}`}render(){return r`<cme-editor></cme-editor>`}_handlePostMessages(e){const{command:t,payload:s}=e.data,o=f.getState(),{saveAndClose:i}=o.config.view;switch(t){case"amendPerformed":i&&f.dispatch(k());break;case"receiveConfig":f.dispatch(L(s));break;case"repositoryInfo":f.dispatch(j(s));break;case"recentCommitMessages":f.dispatch(O(s));break;case"copyFromSCMInputBox":f.dispatch(z(s))}}};Ae=Se([s("cme-editor-page")],Ae);export{Ae as EditorPage};
