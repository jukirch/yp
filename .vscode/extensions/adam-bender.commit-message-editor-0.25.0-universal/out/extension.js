"use strict";var jc=Object.create;var Mr=Object.defineProperty;var Mc=Object.getOwnPropertyDescriptor;var qc=Object.getOwnPropertyNames;var Vc=Object.getPrototypeOf,xc=Object.prototype.hasOwnProperty;var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Uc=(t,e)=>{for(var r in e)Mr(t,r,{get:e[r],enumerable:!0})},Oi=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of qc(e))!xc.call(t,n)&&n!==r&&Mr(t,n,{get:()=>e[n],enumerable:!(s=Mc(e,n))||s.enumerable});return t};var ve=(t,e,r)=>(r=t!=null?jc(Vc(t)):{},Oi(e||!t||!t.__esModule?Mr(r,"default",{value:t,enumerable:!0}):r,t)),Fc=t=>Oi(Mr({},"__esModule",{value:!0}),t);var re=(t,e,r)=>new Promise((s,n)=>{var i=d=>{try{c(r.next(d))}catch(p){n(p)}},o=d=>{try{c(r.throw(d))}catch(p){n(p)}},c=d=>d.done?s(d.value):Promise.resolve(d.value).then(i,o);c((r=r.apply(t,e)).next())});var rr=S(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.regexpCode=x.getEsmExportName=x.getProperty=x.safeStringify=x.stringify=x.strConcat=x.addCodeArg=x.str=x._=x.nil=x._Code=x.Name=x.IDENTIFIER=x._CodeOrName=void 0;var er=class{};x._CodeOrName=er;x.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var ft=class extends er{constructor(e){if(super(),!x.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};x.Name=ft;var Se=class extends er{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,s)=>`${r}${s}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,s)=>(s instanceof ft&&(r[s.str]=(r[s.str]||0)+1),r),{})}};x._Code=Se;x.nil=new Se("");function Di(t,...e){let r=[t[0]],s=0;for(;s<e.length;)Rs(r,e[s]),r.push(t[++s]);return new Se(r)}x._=Di;var Cs=new Se("+");function ji(t,...e){let r=[tr(t[0])],s=0;for(;s<e.length;)r.push(Cs),Rs(r,e[s]),r.push(Cs,tr(t[++s]));return Kc(r),new Se(r)}x.str=ji;function Rs(t,e){e instanceof Se?t.push(...e._items):e instanceof ft?t.push(e):t.push(Bc(e))}x.addCodeArg=Rs;function Kc(t){let e=1;for(;e<t.length-1;){if(t[e]===Cs){let r=Hc(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Hc(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof ft||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof ft))return`"${t}${e.slice(1)}`}function Gc(t,e){return e.emptyStr()?t:t.emptyStr()?e:ji`${t}${e}`}x.strConcat=Gc;function Bc(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:tr(Array.isArray(t)?t.join(","):t)}function Jc(t){return new Se(tr(t))}x.stringify=Jc;function tr(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}x.safeStringify=tr;function Wc(t){return typeof t=="string"&&x.IDENTIFIER.test(t)?new Se(`.${t}`):Di`[${t}]`}x.getProperty=Wc;function Yc(t){if(typeof t=="string"&&x.IDENTIFIER.test(t))return new Se(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}x.getEsmExportName=Yc;function Qc(t){return new Se(t.toString())}x.regexpCode=Qc});var Is=S(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.ValueScope=ue.ValueScopeName=ue.Scope=ue.varKinds=ue.UsedValueState=void 0;var pe=rr(),Os=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Ns;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Ns=ue.UsedValueState||(ue.UsedValueState={}));ue.varKinds={const:new pe.Name("const"),let:new pe.Name("let"),var:new pe.Name("var")};var xr=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof pe.Name?e:this.name(e)}name(e){return new pe.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,s;if(!((s=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||s===void 0)&&s.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};ue.Scope=xr;var Ur=class extends pe.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:s}){this.value=e,this.scopePath=(0,pe._)`.${new pe.Name(r)}[${s}]`}};ue.ValueScopeName=Ur;var Xc=(0,pe._)`\n`,Ts=class extends xr{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Xc:pe.nil}}get(){return this._scope}name(e){return new Ur(e,this._newName(e))}value(e,r){var s;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let n=this.toName(e),{prefix:i}=n,o=(s=r.key)!==null&&s!==void 0?s:r.ref,c=this._values[i];if(c){let f=c.get(o);if(f)return f}else c=this._values[i]=new Map;c.set(o,n);let d=this._scope[i]||(this._scope[i]=[]),p=d.length;return d[p]=r.ref,n.setValue(r,{property:i,itemIndex:p}),n}getValue(e,r){let s=this._values[e];if(s)return s.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,s=>{if(s.scopePath===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return(0,pe._)`${e}${s.scopePath}`})}scopeCode(e=this._values,r,s){return this._reduceValues(e,n=>{if(n.value===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return n.value.code},r,s)}_reduceValues(e,r,s={},n){let i=pe.nil;for(let o in e){let c=e[o];if(!c)continue;let d=s[o]=s[o]||new Map;c.forEach(p=>{if(d.has(p))return;d.set(p,Ns.Started);let f=r(p);if(f){let g=this.opts.es5?ue.varKinds.var:ue.varKinds.const;i=(0,pe._)`${i}${g} ${p} = ${f};${this.opts._n}`}else if(f=n?.(p))i=(0,pe._)`${i}${f}${this.opts._n}`;else throw new Os(p);d.set(p,Ns.Completed)})}return i}};ue.ValueScope=Ts});var k=S(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.or=I.and=I.not=I.CodeGen=I.operators=I.varKinds=I.ValueScopeName=I.ValueScope=I.Scope=I.Name=I.regexpCode=I.stringify=I.getProperty=I.nil=I.strConcat=I.str=I._=void 0;var j=rr(),Oe=Is(),Xe=rr();Object.defineProperty(I,"_",{enumerable:!0,get:function(){return Xe._}});Object.defineProperty(I,"str",{enumerable:!0,get:function(){return Xe.str}});Object.defineProperty(I,"strConcat",{enumerable:!0,get:function(){return Xe.strConcat}});Object.defineProperty(I,"nil",{enumerable:!0,get:function(){return Xe.nil}});Object.defineProperty(I,"getProperty",{enumerable:!0,get:function(){return Xe.getProperty}});Object.defineProperty(I,"stringify",{enumerable:!0,get:function(){return Xe.stringify}});Object.defineProperty(I,"regexpCode",{enumerable:!0,get:function(){return Xe.regexpCode}});Object.defineProperty(I,"Name",{enumerable:!0,get:function(){return Xe.Name}});var Kr=Is();Object.defineProperty(I,"Scope",{enumerable:!0,get:function(){return Kr.Scope}});Object.defineProperty(I,"ValueScope",{enumerable:!0,get:function(){return Kr.ValueScope}});Object.defineProperty(I,"ValueScopeName",{enumerable:!0,get:function(){return Kr.ValueScopeName}});Object.defineProperty(I,"varKinds",{enumerable:!0,get:function(){return Kr.varKinds}});I.operators={GT:new j._Code(">"),GTE:new j._Code(">="),LT:new j._Code("<"),LTE:new j._Code("<="),EQ:new j._Code("==="),NEQ:new j._Code("!=="),NOT:new j._Code("!"),OR:new j._Code("||"),AND:new j._Code("&&"),ADD:new j._Code("+")};var Be=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},As=class extends Be{constructor(e,r,s){super(),this.varKind=e,this.name=r,this.rhs=s}render({es5:e,_n:r}){let s=e?Oe.varKinds.var:this.varKind,n=this.rhs===void 0?"":` = ${this.rhs}`;return`${s} ${this.name}${n};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=At(this.rhs,e,r)),this}get names(){return this.rhs instanceof j._CodeOrName?this.rhs.names:{}}},Fr=class extends Be{constructor(e,r,s){super(),this.lhs=e,this.rhs=r,this.sideEffects=s}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof j.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=At(this.rhs,e,r),this}get names(){let e=this.lhs instanceof j.Name?{}:{...this.lhs.names};return zr(e,this.rhs)}},ks=class extends Fr{constructor(e,r,s,n){super(e,s,n),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Ds=class extends Be{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},js=class extends Be{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Ms=class extends Be{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},qs=class extends Be{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=At(this.code,e,r),this}get names(){return this.code instanceof j._CodeOrName?this.code.names:{}}},sr=class extends Be{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,s)=>r+s.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let s=e[r].optimizeNodes();Array.isArray(s)?e.splice(r,1,...s):s?e[r]=s:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:s}=this,n=s.length;for(;n--;){let i=s[n];i.optimizeNames(e,r)||(Zc(e,i.names),s.splice(n,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>ht(e,r.names),{})}},Je=class extends sr{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Vs=class extends sr{},It=class extends Je{};It.kind="else";var Ne=class extends Je{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let s=r.optimizeNodes();r=this.else=Array.isArray(s)?new It(s):s}if(r)return e===!1?r instanceof Ne?r:r.nodes:this.nodes.length?this:new Ne(Mi(e),r instanceof Ne?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var s;if(this.else=(s=this.else)===null||s===void 0?void 0:s.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=At(this.condition,e,r),this}get names(){let e=super.names;return zr(e,this.condition),this.else&&ht(e,this.else.names),e}};Ne.kind="if";var pt=class extends Je{};pt.kind="for";var xs=class extends pt{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=At(this.iteration,e,r),this}get names(){return ht(super.names,this.iteration.names)}},Us=class extends pt{constructor(e,r,s,n){super(),this.varKind=e,this.name=r,this.from=s,this.to=n}render(e){let r=e.es5?Oe.varKinds.var:this.varKind,{name:s,from:n,to:i}=this;return`for(${r} ${s}=${n}; ${s}<${i}; ${s}++)`+super.render(e)}get names(){let e=zr(super.names,this.from);return zr(e,this.to)}},Lr=class extends pt{constructor(e,r,s,n){super(),this.loop=e,this.varKind=r,this.name=s,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=At(this.iterable,e,r),this}get names(){return ht(super.names,this.iterable.names)}},nr=class extends Je{constructor(e,r,s){super(),this.name=e,this.args=r,this.async=s}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};nr.kind="func";var ir=class extends sr{render(e){return"return "+super.render(e)}};ir.kind="return";var Fs=class extends Je{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var s,n;return super.optimizeNames(e,r),(s=this.catch)===null||s===void 0||s.optimizeNames(e,r),(n=this.finally)===null||n===void 0||n.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&ht(e,this.catch.names),this.finally&&ht(e,this.finally.names),e}},or=class extends Je{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};or.kind="catch";var ar=class extends Je{render(e){return"finally"+super.render(e)}};ar.kind="finally";var Ls=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Oe.Scope({parent:e}),this._nodes=[new Vs]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let s=this._extScope.value(e,r);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,s,n){let i=this._scope.toName(r);return s!==void 0&&n&&(this._constants[i.str]=s),this._leafNode(new As(e,i,s)),i}const(e,r,s){return this._def(Oe.varKinds.const,e,r,s)}let(e,r,s){return this._def(Oe.varKinds.let,e,r,s)}var(e,r,s){return this._def(Oe.varKinds.var,e,r,s)}assign(e,r,s){return this._leafNode(new Fr(e,r,s))}add(e,r){return this._leafNode(new ks(e,I.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==j.nil&&this._leafNode(new qs(e)),this}object(...e){let r=["{"];for(let[s,n]of e)r.length>1&&r.push(","),r.push(s),(s!==n||this.opts.es5)&&(r.push(":"),(0,j.addCodeArg)(r,n));return r.push("}"),new j._Code(r)}if(e,r,s){if(this._blockNode(new Ne(e)),r&&s)this.code(r).else().code(s).endIf();else if(r)this.code(r).endIf();else if(s)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Ne(e))}else(){return this._elseNode(new It)}endIf(){return this._endBlockNode(Ne,It)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new xs(e),r)}forRange(e,r,s,n,i=this.opts.es5?Oe.varKinds.var:Oe.varKinds.let){let o=this._scope.toName(e);return this._for(new Us(i,o,r,s),()=>n(o))}forOf(e,r,s,n=Oe.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof j.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,j._)`${o}.length`,c=>{this.var(i,(0,j._)`${o}[${c}]`),s(i)})}return this._for(new Lr("of",n,i,r),()=>s(i))}forIn(e,r,s,n=this.opts.es5?Oe.varKinds.var:Oe.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,j._)`Object.keys(${r})`,s);let i=this._scope.toName(e);return this._for(new Lr("in",n,i,r),()=>s(i))}endFor(){return this._endBlockNode(pt)}label(e){return this._leafNode(new Ds(e))}break(e){return this._leafNode(new js(e))}return(e){let r=new ir;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ir)}try(e,r,s){if(!r&&!s)throw new Error('CodeGen: "try" without "catch" and "finally"');let n=new Fs;if(this._blockNode(n),this.code(e),r){let i=this.name("e");this._currNode=n.catch=new or(i),r(i)}return s&&(this._currNode=n.finally=new ar,this.code(s)),this._endBlockNode(or,ar)}throw(e){return this._leafNode(new Ms(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let s=this._nodes.length-r;if(s<0||e!==void 0&&s!==e)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=j.nil,s,n){return this._blockNode(new nr(e,r,s)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(nr)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let s=this._currNode;if(s instanceof e||r&&s instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Ne))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};I.CodeGen=Ls;function ht(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function zr(t,e){return e instanceof j._CodeOrName?ht(t,e.names):t}function At(t,e,r){if(t instanceof j.Name)return s(t);if(!n(t))return t;return new j._Code(t._items.reduce((i,o)=>(o instanceof j.Name&&(o=s(o)),o instanceof j._Code?i.push(...o._items):i.push(o),i),[]));function s(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function n(i){return i instanceof j._Code&&i._items.some(o=>o instanceof j.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function Zc(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Mi(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,j._)`!${zs(t)}`}I.not=Mi;var eu=qi(I.operators.AND);function tu(...t){return t.reduce(eu)}I.and=tu;var ru=qi(I.operators.OR);function su(...t){return t.reduce(ru)}I.or=su;function qi(t){return(e,r)=>e===j.nil?r:r===j.nil?e:(0,j._)`${zs(e)} ${t} ${zs(r)}`}function zs(t){return t instanceof j.Name?t:(0,j._)`(${t})`}});var U=S(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.checkStrictMode=A.getErrorPath=A.Type=A.useFunc=A.setEvaluated=A.evaluatedPropsToName=A.mergeEvaluated=A.eachItem=A.unescapeJsonPointer=A.escapeJsonPointer=A.escapeFragment=A.unescapeFragment=A.schemaRefOrVal=A.schemaHasRulesButRef=A.schemaHasRules=A.checkUnknownRules=A.alwaysValidSchema=A.toHash=void 0;var B=k(),nu=rr();function iu(t){let e={};for(let r of t)e[r]=!0;return e}A.toHash=iu;function ou(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Ui(t,e),!Fi(e,t.self.RULES.all))}A.alwaysValidSchema=ou;function Ui(t,e=t.schema){let{opts:r,self:s}=t;if(!r.strictSchema||typeof e=="boolean")return;let n=s.RULES.keywords;for(let i in e)n[i]||Hi(t,`unknown keyword: "${i}"`)}A.checkUnknownRules=Ui;function Fi(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}A.schemaHasRules=Fi;function au(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}A.schemaHasRulesButRef=au;function cu({topSchemaRef:t,schemaPath:e},r,s,n){if(!n){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,B._)`${r}`}return(0,B._)`${t}${e}${(0,B.getProperty)(s)}`}A.schemaRefOrVal=cu;function uu(t){return Li(decodeURIComponent(t))}A.unescapeFragment=uu;function lu(t){return encodeURIComponent(Ks(t))}A.escapeFragment=lu;function Ks(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}A.escapeJsonPointer=Ks;function Li(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}A.unescapeJsonPointer=Li;function du(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}A.eachItem=du;function Vi({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:s}){return(n,i,o,c)=>{let d=o===void 0?i:o instanceof B.Name?(i instanceof B.Name?t(n,i,o):e(n,i,o),o):i instanceof B.Name?(e(n,o,i),i):r(i,o);return c===B.Name&&!(d instanceof B.Name)?s(n,d):d}}A.mergeEvaluated={props:Vi({mergeNames:(t,e,r)=>t.if((0,B._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,B._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,B._)`${r} || {}`).code((0,B._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,B._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,B._)`${r} || {}`),Hs(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:zi}),items:Vi({mergeNames:(t,e,r)=>t.if((0,B._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,B._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,B._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,B._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function zi(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,B._)`{}`);return e!==void 0&&Hs(t,r,e),r}A.evaluatedPropsToName=zi;function Hs(t,e,r){Object.keys(r).forEach(s=>t.assign((0,B._)`${e}${(0,B.getProperty)(s)}`,!0))}A.setEvaluated=Hs;var xi={};function fu(t,e){return t.scopeValue("func",{ref:e,code:xi[e.code]||(xi[e.code]=new nu._Code(e.code))})}A.useFunc=fu;var Ki;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Ki=A.Type||(A.Type={}));function pu(t,e,r){if(t instanceof B.Name){let s=e===Ki.Num;return r?s?(0,B._)`"[" + ${t} + "]"`:(0,B._)`"['" + ${t} + "']"`:s?(0,B._)`"/" + ${t}`:(0,B._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,B.getProperty)(t).toString():"/"+Ks(t)}A.getErrorPath=pu;function Hi(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}A.checkStrictMode=Hi});var We=S(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});var ae=k(),hu={data:new ae.Name("data"),valCxt:new ae.Name("valCxt"),instancePath:new ae.Name("instancePath"),parentData:new ae.Name("parentData"),parentDataProperty:new ae.Name("parentDataProperty"),rootData:new ae.Name("rootData"),dynamicAnchors:new ae.Name("dynamicAnchors"),vErrors:new ae.Name("vErrors"),errors:new ae.Name("errors"),this:new ae.Name("this"),self:new ae.Name("self"),scope:new ae.Name("scope"),json:new ae.Name("json"),jsonPos:new ae.Name("jsonPos"),jsonLen:new ae.Name("jsonLen"),jsonPart:new ae.Name("jsonPart")};Gs.default=hu});var cr=S(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.extendErrors=ce.resetErrorsCount=ce.reportExtraError=ce.reportError=ce.keyword$DataError=ce.keywordError=void 0;var q=k(),Hr=U(),le=We();ce.keywordError={message:({keyword:t})=>(0,q.str)`must pass "${t}" keyword validation`};ce.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,q.str)`"${t}" keyword must be ${e} ($data)`:(0,q.str)`"${t}" keyword is invalid ($data)`};function mu(t,e=ce.keywordError,r,s){let{it:n}=t,{gen:i,compositeRule:o,allErrors:c}=n,d=Ji(t,e,r);s??(o||c)?Gi(i,d):Bi(n,(0,q._)`[${d}]`)}ce.reportError=mu;function gu(t,e=ce.keywordError,r){let{it:s}=t,{gen:n,compositeRule:i,allErrors:o}=s,c=Ji(t,e,r);Gi(n,c),i||o||Bi(s,le.default.vErrors)}ce.reportExtraError=gu;function yu(t,e){t.assign(le.default.errors,e),t.if((0,q._)`${le.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,q._)`${le.default.vErrors}.length`,e),()=>t.assign(le.default.vErrors,null)))}ce.resetErrorsCount=yu;function vu({gen:t,keyword:e,schemaValue:r,data:s,errsCount:n,it:i}){if(n===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",n,le.default.errors,c=>{t.const(o,(0,q._)`${le.default.vErrors}[${c}]`),t.if((0,q._)`${o}.instancePath === undefined`,()=>t.assign((0,q._)`${o}.instancePath`,(0,q.strConcat)(le.default.instancePath,i.errorPath))),t.assign((0,q._)`${o}.schemaPath`,(0,q.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,q._)`${o}.schema`,r),t.assign((0,q._)`${o}.data`,s))})}ce.extendErrors=vu;function Gi(t,e){let r=t.const("err",e);t.if((0,q._)`${le.default.vErrors} === null`,()=>t.assign(le.default.vErrors,(0,q._)`[${r}]`),(0,q._)`${le.default.vErrors}.push(${r})`),t.code((0,q._)`${le.default.errors}++`)}function Bi(t,e){let{gen:r,validateName:s,schemaEnv:n}=t;n.$async?r.throw((0,q._)`new ${t.ValidationError}(${e})`):(r.assign((0,q._)`${s}.errors`,e),r.return(!1))}var mt={keyword:new q.Name("keyword"),schemaPath:new q.Name("schemaPath"),params:new q.Name("params"),propertyName:new q.Name("propertyName"),message:new q.Name("message"),schema:new q.Name("schema"),parentSchema:new q.Name("parentSchema")};function Ji(t,e,r){let{createErrors:s}=t.it;return s===!1?(0,q._)`{}`:_u(t,e,r)}function _u(t,e,r={}){let{gen:s,it:n}=t,i=[$u(n,r),wu(t,r)];return Eu(t,e,i),s.object(...i)}function $u({errorPath:t},{instancePath:e}){let r=e?(0,q.str)`${t}${(0,Hr.getErrorPath)(e,Hr.Type.Str)}`:t;return[le.default.instancePath,(0,q.strConcat)(le.default.instancePath,r)]}function wu({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:s}){let n=s?e:(0,q.str)`${e}/${t}`;return r&&(n=(0,q.str)`${n}${(0,Hr.getErrorPath)(r,Hr.Type.Str)}`),[mt.schemaPath,n]}function Eu(t,{params:e,message:r},s){let{keyword:n,data:i,schemaValue:o,it:c}=t,{opts:d,propertyName:p,topSchemaRef:f,schemaPath:g}=c;s.push([mt.keyword,n],[mt.params,typeof e=="function"?e(t):e||(0,q._)`{}`]),d.messages&&s.push([mt.message,typeof r=="function"?r(t):r]),d.verbose&&s.push([mt.schema,o],[mt.parentSchema,(0,q._)`${f}${g}`],[le.default.data,i]),p&&s.push([mt.propertyName,p])}});var Yi=S(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.boolOrEmptySchema=kt.topBoolOrEmptySchema=void 0;var bu=cr(),Su=k(),Pu=We(),Cu={message:"boolean schema is false"};function Ru(t){let{gen:e,schema:r,validateName:s}=t;r===!1?Wi(t,!1):typeof r=="object"&&r.$async===!0?e.return(Pu.default.data):(e.assign((0,Su._)`${s}.errors`,null),e.return(!0))}kt.topBoolOrEmptySchema=Ru;function Ou(t,e){let{gen:r,schema:s}=t;s===!1?(r.var(e,!1),Wi(t)):r.var(e,!0)}kt.boolOrEmptySchema=Ou;function Wi(t,e){let{gen:r,data:s}=t,n={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,bu.reportError)(n,Cu,void 0,e)}});var Bs=S(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.getRules=Dt.isJSONType=void 0;var Nu=["string","number","integer","boolean","null","object","array"],Tu=new Set(Nu);function Iu(t){return typeof t=="string"&&Tu.has(t)}Dt.isJSONType=Iu;function Au(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Dt.getRules=Au});var Js=S(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.shouldUseRule=Ze.shouldUseGroup=Ze.schemaHasRulesForType=void 0;function ku({schema:t,self:e},r){let s=e.RULES.types[r];return s&&s!==!0&&Qi(t,s)}Ze.schemaHasRulesForType=ku;function Qi(t,e){return e.rules.some(r=>Xi(t,r))}Ze.shouldUseGroup=Qi;function Xi(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(s=>t[s]!==void 0))}Ze.shouldUseRule=Xi});var lr=S(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.reportTypeError=se.checkDataTypes=se.checkDataType=se.coerceAndCheckDataType=se.getJSONTypes=se.getSchemaTypes=se.DataType=void 0;var Du=Bs(),ju=Js(),Mu=cr(),N=k(),Zi=U(),ur;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(ur=se.DataType||(se.DataType={}));function qu(t){let e=eo(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}se.getSchemaTypes=qu;function eo(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Du.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}se.getJSONTypes=eo;function Vu(t,e){let{gen:r,data:s,opts:n}=t,i=xu(e,n.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,ju.schemaHasRulesForType)(t,e[0]));if(o){let c=Ys(e,s,n.strictNumbers,ur.Wrong);r.if(c,()=>{i.length?Uu(t,e,i):Qs(t)})}return o}se.coerceAndCheckDataType=Vu;var to=new Set(["string","number","integer","boolean","null"]);function xu(t,e){return e?t.filter(r=>to.has(r)||e==="array"&&r==="array"):[]}function Uu(t,e,r){let{gen:s,data:n,opts:i}=t,o=s.let("dataType",(0,N._)`typeof ${n}`),c=s.let("coerced",(0,N._)`undefined`);i.coerceTypes==="array"&&s.if((0,N._)`${o} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>s.assign(n,(0,N._)`${n}[0]`).assign(o,(0,N._)`typeof ${n}`).if(Ys(e,n,i.strictNumbers),()=>s.assign(c,n))),s.if((0,N._)`${c} !== undefined`);for(let p of r)(to.has(p)||p==="array"&&i.coerceTypes==="array")&&d(p);s.else(),Qs(t),s.endIf(),s.if((0,N._)`${c} !== undefined`,()=>{s.assign(n,c),Fu(t,c)});function d(p){switch(p){case"string":s.elseIf((0,N._)`${o} == "number" || ${o} == "boolean"`).assign(c,(0,N._)`"" + ${n}`).elseIf((0,N._)`${n} === null`).assign(c,(0,N._)`""`);return;case"number":s.elseIf((0,N._)`${o} == "boolean" || ${n} === null
              || (${o} == "string" && ${n} && ${n} == +${n})`).assign(c,(0,N._)`+${n}`);return;case"integer":s.elseIf((0,N._)`${o} === "boolean" || ${n} === null
              || (${o} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(c,(0,N._)`+${n}`);return;case"boolean":s.elseIf((0,N._)`${n} === "false" || ${n} === 0 || ${n} === null`).assign(c,!1).elseIf((0,N._)`${n} === "true" || ${n} === 1`).assign(c,!0);return;case"null":s.elseIf((0,N._)`${n} === "" || ${n} === 0 || ${n} === false`),s.assign(c,null);return;case"array":s.elseIf((0,N._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${n} === null`).assign(c,(0,N._)`[${n}]`)}}}function Fu({gen:t,parentData:e,parentDataProperty:r},s){t.if((0,N._)`${e} !== undefined`,()=>t.assign((0,N._)`${e}[${r}]`,s))}function Ws(t,e,r,s=ur.Correct){let n=s===ur.Correct?N.operators.EQ:N.operators.NEQ,i;switch(t){case"null":return(0,N._)`${e} ${n} null`;case"array":i=(0,N._)`Array.isArray(${e})`;break;case"object":i=(0,N._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,N._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,N._)`typeof ${e} ${n} ${t}`}return s===ur.Correct?i:(0,N.not)(i);function o(c=N.nil){return(0,N.and)((0,N._)`typeof ${e} == "number"`,c,r?(0,N._)`isFinite(${e})`:N.nil)}}se.checkDataType=Ws;function Ys(t,e,r,s){if(t.length===1)return Ws(t[0],e,r,s);let n,i=(0,Zi.toHash)(t);if(i.array&&i.object){let o=(0,N._)`typeof ${e} != "object"`;n=i.null?o:(0,N._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else n=N.nil;i.number&&delete i.integer;for(let o in i)n=(0,N.and)(n,Ws(o,e,r,s));return n}se.checkDataTypes=Ys;var Lu={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,N._)`{type: ${t}}`:(0,N._)`{type: ${e}}`};function Qs(t){let e=zu(t);(0,Mu.reportError)(e,Lu)}se.reportTypeError=Qs;function zu(t){let{gen:e,data:r,schema:s}=t,n=(0,Zi.schemaRefOrVal)(t,s,"type");return{gen:e,keyword:"type",data:r,schema:s.type,schemaCode:n,schemaValue:n,parentSchema:s,params:{},it:t}}});var so=S(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.assignDefaults=void 0;var jt=k(),Ku=U();function Hu(t,e){let{properties:r,items:s}=t.schema;if(e==="object"&&r)for(let n in r)ro(t,n,r[n].default);else e==="array"&&Array.isArray(s)&&s.forEach((n,i)=>ro(t,i,n.default))}Gr.assignDefaults=Hu;function ro(t,e,r){let{gen:s,compositeRule:n,data:i,opts:o}=t;if(r===void 0)return;let c=(0,jt._)`${i}${(0,jt.getProperty)(e)}`;if(n){(0,Ku.checkStrictMode)(t,`default is ignored for: ${c}`);return}let d=(0,jt._)`${c} === undefined`;o.useDefaults==="empty"&&(d=(0,jt._)`${d} || ${c} === null || ${c} === ""`),s.if(d,(0,jt._)`${c} = ${(0,jt.stringify)(r)}`)}});var Pe=S(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.validateUnion=H.validateArray=H.usePattern=H.callValidateCode=H.schemaProperties=H.allSchemaProperties=H.noPropertyInData=H.propertyInData=H.isOwnProperty=H.hasPropFunc=H.reportMissingProp=H.checkMissingProp=H.checkReportMissingProp=void 0;var J=k(),Xs=U(),et=We(),Gu=U();function Bu(t,e){let{gen:r,data:s,it:n}=t;r.if(en(r,s,e,n.opts.ownProperties),()=>{t.setParams({missingProperty:(0,J._)`${e}`},!0),t.error()})}H.checkReportMissingProp=Bu;function Ju({gen:t,data:e,it:{opts:r}},s,n){return(0,J.or)(...s.map(i=>(0,J.and)(en(t,e,i,r.ownProperties),(0,J._)`${n} = ${i}`)))}H.checkMissingProp=Ju;function Wu(t,e){t.setParams({missingProperty:e},!0),t.error()}H.reportMissingProp=Wu;function no(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,J._)`Object.prototype.hasOwnProperty`})}H.hasPropFunc=no;function Zs(t,e,r){return(0,J._)`${no(t)}.call(${e}, ${r})`}H.isOwnProperty=Zs;function Yu(t,e,r,s){let n=(0,J._)`${e}${(0,J.getProperty)(r)} !== undefined`;return s?(0,J._)`${n} && ${Zs(t,e,r)}`:n}H.propertyInData=Yu;function en(t,e,r,s){let n=(0,J._)`${e}${(0,J.getProperty)(r)} === undefined`;return s?(0,J.or)(n,(0,J.not)(Zs(t,e,r))):n}H.noPropertyInData=en;function io(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}H.allSchemaProperties=io;function Qu(t,e){return io(e).filter(r=>!(0,Xs.alwaysValidSchema)(t,e[r]))}H.schemaProperties=Qu;function Xu({schemaCode:t,data:e,it:{gen:r,topSchemaRef:s,schemaPath:n,errorPath:i},it:o},c,d,p){let f=p?(0,J._)`${t}, ${e}, ${s}${n}`:e,g=[[et.default.instancePath,(0,J.strConcat)(et.default.instancePath,i)],[et.default.parentData,o.parentData],[et.default.parentDataProperty,o.parentDataProperty],[et.default.rootData,et.default.rootData]];o.opts.dynamicRef&&g.push([et.default.dynamicAnchors,et.default.dynamicAnchors]);let w=(0,J._)`${f}, ${r.object(...g)}`;return d!==J.nil?(0,J._)`${c}.call(${d}, ${w})`:(0,J._)`${c}(${w})`}H.callValidateCode=Xu;var Zu=(0,J._)`new RegExp`;function el({gen:t,it:{opts:e}},r){let s=e.unicodeRegExp?"u":"",{regExp:n}=e.code,i=n(r,s);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,J._)`${n.code==="new RegExp"?Zu:(0,Gu.useFunc)(t,n)}(${r}, ${s})`})}H.usePattern=el;function tl(t){let{gen:e,data:r,keyword:s,it:n}=t,i=e.name("valid");if(n.allErrors){let c=e.let("valid",!0);return o(()=>e.assign(c,!1)),c}return e.var(i,!0),o(()=>e.break()),i;function o(c){let d=e.const("len",(0,J._)`${r}.length`);e.forRange("i",0,d,p=>{t.subschema({keyword:s,dataProp:p,dataPropType:Xs.Type.Num},i),e.if((0,J.not)(i),c)})}}H.validateArray=tl;function rl(t){let{gen:e,schema:r,keyword:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(d=>(0,Xs.alwaysValidSchema)(n,d))&&!n.opts.unevaluated)return;let o=e.let("valid",!1),c=e.name("_valid");e.block(()=>r.forEach((d,p)=>{let f=t.subschema({keyword:s,schemaProp:p,compositeRule:!0},c);e.assign(o,(0,J._)`${o} || ${c}`),t.mergeValidEvaluated(f,c)||e.if((0,J.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}H.validateUnion=rl});var co=S(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.validateKeywordUsage=Ve.validSchemaType=Ve.funcKeywordCode=Ve.macroKeywordCode=void 0;var de=k(),gt=We(),sl=Pe(),nl=cr();function il(t,e){let{gen:r,keyword:s,schema:n,parentSchema:i,it:o}=t,c=e.macro.call(o.self,n,i,o),d=ao(r,s,c);o.opts.validateSchema!==!1&&o.self.validateSchema(c,!0);let p=r.name("valid");t.subschema({schema:c,schemaPath:de.nil,errSchemaPath:`${o.errSchemaPath}/${s}`,topSchemaRef:d,compositeRule:!0},p),t.pass(p,()=>t.error(!0))}Ve.macroKeywordCode=il;function ol(t,e){var r;let{gen:s,keyword:n,schema:i,parentSchema:o,$data:c,it:d}=t;cl(d,e);let p=!c&&e.compile?e.compile.call(d.self,i,o,d):e.validate,f=ao(s,n,p),g=s.let("valid");t.block$data(g,w),t.ok((r=e.valid)!==null&&r!==void 0?r:g);function w(){if(e.errors===!1)y(),e.modifying&&oo(t),$(()=>t.error());else{let E=e.async?_():v();e.modifying&&oo(t),$(()=>al(t,E))}}function _(){let E=s.let("ruleErrs",null);return s.try(()=>y((0,de._)`await `),D=>s.assign(g,!1).if((0,de._)`${D} instanceof ${d.ValidationError}`,()=>s.assign(E,(0,de._)`${D}.errors`),()=>s.throw(D))),E}function v(){let E=(0,de._)`${f}.errors`;return s.assign(E,null),y(de.nil),E}function y(E=e.async?(0,de._)`await `:de.nil){let D=d.opts.passContext?gt.default.this:gt.default.self,T=!("compile"in e&&!c||e.schema===!1);s.assign(g,(0,de._)`${E}${(0,sl.callValidateCode)(t,f,D,T)}`,e.modifying)}function $(E){var D;s.if((0,de.not)((D=e.valid)!==null&&D!==void 0?D:g),E)}}Ve.funcKeywordCode=ol;function oo(t){let{gen:e,data:r,it:s}=t;e.if(s.parentData,()=>e.assign(r,(0,de._)`${s.parentData}[${s.parentDataProperty}]`))}function al(t,e){let{gen:r}=t;r.if((0,de._)`Array.isArray(${e})`,()=>{r.assign(gt.default.vErrors,(0,de._)`${gt.default.vErrors} === null ? ${e} : ${gt.default.vErrors}.concat(${e})`).assign(gt.default.errors,(0,de._)`${gt.default.vErrors}.length`),(0,nl.extendErrors)(t)},()=>t.error())}function cl({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function ao(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,de.stringify)(r)})}function ul(t,e,r=!1){return!e.length||e.some(s=>s==="array"?Array.isArray(t):s==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==s||r&&typeof t>"u")}Ve.validSchemaType=ul;function ll({schema:t,opts:e,self:r,errSchemaPath:s},n,i){if(Array.isArray(n.keyword)?!n.keyword.includes(i):n.keyword!==i)throw new Error("ajv implementation error");let o=n.dependencies;if(o?.some(c=>!Object.prototype.hasOwnProperty.call(t,c)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(n.validateSchema&&!n.validateSchema(t[i])){let d=`keyword "${i}" value is invalid at path "${s}": `+r.errorsText(n.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(d);else throw new Error(d)}}Ve.validateKeywordUsage=ll});var lo=S(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.extendSubschemaMode=tt.extendSubschemaData=tt.getSubschema=void 0;var xe=k(),uo=U();function dl(t,{keyword:e,schemaProp:r,schema:s,schemaPath:n,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let c=t.schema[e];return r===void 0?{schema:c,schemaPath:(0,xe._)`${t.schemaPath}${(0,xe.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:c[r],schemaPath:(0,xe._)`${t.schemaPath}${(0,xe.getProperty)(e)}${(0,xe.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,uo.escapeFragment)(r)}`}}if(s!==void 0){if(n===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:n,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}tt.getSubschema=dl;function fl(t,e,{dataProp:r,dataPropType:s,data:n,dataTypes:i,propertyName:o}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:c}=e;if(r!==void 0){let{errorPath:p,dataPathArr:f,opts:g}=e,w=c.let("data",(0,xe._)`${e.data}${(0,xe.getProperty)(r)}`,!0);d(w),t.errorPath=(0,xe.str)`${p}${(0,uo.getErrorPath)(r,s,g.jsPropertySyntax)}`,t.parentDataProperty=(0,xe._)`${r}`,t.dataPathArr=[...f,t.parentDataProperty]}if(n!==void 0){let p=n instanceof xe.Name?n:c.let("data",n,!0);d(p),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function d(p){t.data=p,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,p]}}tt.extendSubschemaData=fl;function pl(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:s,createErrors:n,allErrors:i}){s!==void 0&&(t.compositeRule=s),n!==void 0&&(t.createErrors=n),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}tt.extendSubschemaMode=pl});var tn=S((Ah,fo)=>{"use strict";fo.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,n,i;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(n=s;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=s;n--!==0;){var o=i[n];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var ho=S((kh,po)=>{"use strict";var rt=po.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var s=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};Br(e,s,n,t,"",t)};rt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};rt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};rt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};rt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Br(t,e,r,s,n,i,o,c,d,p){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,n,i,o,c,d,p);for(var f in s){var g=s[f];if(Array.isArray(g)){if(f in rt.arrayKeywords)for(var w=0;w<g.length;w++)Br(t,e,r,g[w],n+"/"+f+"/"+w,i,n,f,s,w)}else if(f in rt.propsKeywords){if(g&&typeof g=="object")for(var _ in g)Br(t,e,r,g[_],n+"/"+f+"/"+hl(_),i,n,f,s,_)}else(f in rt.keywords||t.allKeys&&!(f in rt.skipKeywords))&&Br(t,e,r,g,n+"/"+f,i,n,f,s)}r(s,n,i,o,c,d,p)}}function hl(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var dr=S(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.getSchemaRefs=he.resolveUrl=he.normalizeId=he._getFullPath=he.getFullPath=he.inlineRef=void 0;var ml=U(),gl=tn(),yl=ho(),vl=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function _l(t,e=!0){return typeof t=="boolean"?!0:e===!0?!rn(t):e?mo(t)<=e:!1}he.inlineRef=_l;var $l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function rn(t){for(let e in t){if($l.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(rn)||typeof r=="object"&&rn(r))return!0}return!1}function mo(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!vl.has(r)&&(typeof t[r]=="object"&&(0,ml.eachItem)(t[r],s=>e+=mo(s)),e===1/0))return 1/0}return e}function go(t,e="",r){r!==!1&&(e=Mt(e));let s=t.parse(e);return yo(t,s)}he.getFullPath=go;function yo(t,e){return t.serialize(e).split("#")[0]+"#"}he._getFullPath=yo;var wl=/#\/?$/;function Mt(t){return t?t.replace(wl,""):""}he.normalizeId=Mt;function El(t,e,r){return r=Mt(r),t.resolve(e,r)}he.resolveUrl=El;var bl=/^[a-z_][-a-z0-9._]*$/i;function Sl(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:s}=this.opts,n=Mt(t[r]||e),i={"":n},o=go(s,n,!1),c={},d=new Set;return yl(t,{allKeys:!0},(g,w,_,v)=>{if(v===void 0)return;let y=o+w,$=i[v];typeof g[r]=="string"&&($=E.call(this,g[r])),D.call(this,g.$anchor),D.call(this,g.$dynamicAnchor),i[w]=$;function E(T){let z=this.opts.uriResolver.resolve;if(T=Mt($?z($,T):T),d.has(T))throw f(T);d.add(T);let C=this.refs[T];return typeof C=="string"&&(C=this.refs[C]),typeof C=="object"?p(g,C.schema,T):T!==Mt(y)&&(T[0]==="#"?(p(g,c[T],T),c[T]=g):this.refs[T]=y),T}function D(T){if(typeof T=="string"){if(!bl.test(T))throw new Error(`invalid anchor "${T}"`);E.call(this,`#${T}`)}}}),c;function p(g,w,_){if(w!==void 0&&!gl(g,w))throw f(_)}function f(g){return new Error(`reference "${g}" resolves to more than one schema`)}}he.getSchemaRefs=Sl});var hr=S(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.getData=st.KeywordCxt=st.validateFunctionCode=void 0;var Eo=Yi(),vo=lr(),nn=Js(),Jr=lr(),Pl=so(),pr=co(),sn=lo(),P=k(),R=We(),Cl=dr(),Ye=U(),fr=cr();function Rl(t){if(Po(t)&&(Co(t),So(t))){Tl(t);return}bo(t,()=>(0,Eo.topBoolOrEmptySchema)(t))}st.validateFunctionCode=Rl;function bo({gen:t,validateName:e,schema:r,schemaEnv:s,opts:n},i){n.code.es5?t.func(e,(0,P._)`${R.default.data}, ${R.default.valCxt}`,s.$async,()=>{t.code((0,P._)`"use strict"; ${_o(r,n)}`),Nl(t,n),t.code(i)}):t.func(e,(0,P._)`${R.default.data}, ${Ol(n)}`,s.$async,()=>t.code(_o(r,n)).code(i))}function Ol(t){return(0,P._)`{${R.default.instancePath}="", ${R.default.parentData}, ${R.default.parentDataProperty}, ${R.default.rootData}=${R.default.data}${t.dynamicRef?(0,P._)`, ${R.default.dynamicAnchors}={}`:P.nil}}={}`}function Nl(t,e){t.if(R.default.valCxt,()=>{t.var(R.default.instancePath,(0,P._)`${R.default.valCxt}.${R.default.instancePath}`),t.var(R.default.parentData,(0,P._)`${R.default.valCxt}.${R.default.parentData}`),t.var(R.default.parentDataProperty,(0,P._)`${R.default.valCxt}.${R.default.parentDataProperty}`),t.var(R.default.rootData,(0,P._)`${R.default.valCxt}.${R.default.rootData}`),e.dynamicRef&&t.var(R.default.dynamicAnchors,(0,P._)`${R.default.valCxt}.${R.default.dynamicAnchors}`)},()=>{t.var(R.default.instancePath,(0,P._)`""`),t.var(R.default.parentData,(0,P._)`undefined`),t.var(R.default.parentDataProperty,(0,P._)`undefined`),t.var(R.default.rootData,R.default.data),e.dynamicRef&&t.var(R.default.dynamicAnchors,(0,P._)`{}`)})}function Tl(t){let{schema:e,opts:r,gen:s}=t;bo(t,()=>{r.$comment&&e.$comment&&Oo(t),jl(t),s.let(R.default.vErrors,null),s.let(R.default.errors,0),r.unevaluated&&Il(t),Ro(t),Vl(t)})}function Il(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,P._)`${r}.evaluated`),e.if((0,P._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,P._)`${t.evaluated}.props`,(0,P._)`undefined`)),e.if((0,P._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,P._)`${t.evaluated}.items`,(0,P._)`undefined`))}function _o(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,P._)`/*# sourceURL=${r} */`:P.nil}function Al(t,e){if(Po(t)&&(Co(t),So(t))){kl(t,e);return}(0,Eo.boolOrEmptySchema)(t,e)}function So({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Po(t){return typeof t.schema!="boolean"}function kl(t,e){let{schema:r,gen:s,opts:n}=t;n.$comment&&r.$comment&&Oo(t),Ml(t),ql(t);let i=s.const("_errs",R.default.errors);Ro(t,i),s.var(e,(0,P._)`${i} === ${R.default.errors}`)}function Co(t){(0,Ye.checkUnknownRules)(t),Dl(t)}function Ro(t,e){if(t.opts.jtd)return $o(t,[],!1,e);let r=(0,vo.getSchemaTypes)(t.schema),s=(0,vo.coerceAndCheckDataType)(t,r);$o(t,r,!s,e)}function Dl(t){let{schema:e,errSchemaPath:r,opts:s,self:n}=t;e.$ref&&s.ignoreKeywordsWithRef&&(0,Ye.schemaHasRulesButRef)(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function jl(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ye.checkStrictMode)(t,"default is ignored in the schema root")}function Ml(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Cl.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function ql(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Oo({gen:t,schemaEnv:e,schema:r,errSchemaPath:s,opts:n}){let i=r.$comment;if(n.$comment===!0)t.code((0,P._)`${R.default.self}.logger.log(${i})`);else if(typeof n.$comment=="function"){let o=(0,P.str)`${s}/$comment`,c=t.scopeValue("root",{ref:e.root});t.code((0,P._)`${R.default.self}.opts.$comment(${i}, ${o}, ${c}.schema)`)}}function Vl(t){let{gen:e,schemaEnv:r,validateName:s,ValidationError:n,opts:i}=t;r.$async?e.if((0,P._)`${R.default.errors} === 0`,()=>e.return(R.default.data),()=>e.throw((0,P._)`new ${n}(${R.default.vErrors})`)):(e.assign((0,P._)`${s}.errors`,R.default.vErrors),i.unevaluated&&xl(t),e.return((0,P._)`${R.default.errors} === 0`))}function xl({gen:t,evaluated:e,props:r,items:s}){r instanceof P.Name&&t.assign((0,P._)`${e}.props`,r),s instanceof P.Name&&t.assign((0,P._)`${e}.items`,s)}function $o(t,e,r,s){let{gen:n,schema:i,data:o,allErrors:c,opts:d,self:p}=t,{RULES:f}=p;if(i.$ref&&(d.ignoreKeywordsWithRef||!(0,Ye.schemaHasRulesButRef)(i,f))){n.block(()=>To(t,"$ref",f.all.$ref.definition));return}d.jtd||Ul(t,e),n.block(()=>{for(let w of f.rules)g(w);g(f.post)});function g(w){(0,nn.shouldUseGroup)(i,w)&&(w.type?(n.if((0,Jr.checkDataType)(w.type,o,d.strictNumbers)),wo(t,w),e.length===1&&e[0]===w.type&&r&&(n.else(),(0,Jr.reportTypeError)(t)),n.endIf()):wo(t,w),c||n.if((0,P._)`${R.default.errors} === ${s||0}`))}}function wo(t,e){let{gen:r,schema:s,opts:{useDefaults:n}}=t;n&&(0,Pl.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,nn.shouldUseRule)(s,i)&&To(t,i.keyword,i.definition,e.type)})}function Ul(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Fl(t,e),t.opts.allowUnionTypes||Ll(t,e),zl(t,t.dataTypes))}function Fl(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{No(t.dataTypes,r)||on(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Hl(t,e)}}function Ll(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&on(t,"use allowUnionTypes to allow union type keyword")}function zl(t,e){let r=t.self.RULES.all;for(let s in r){let n=r[s];if(typeof n=="object"&&(0,nn.shouldUseRule)(t.schema,n)){let{type:i}=n.definition;i.length&&!i.some(o=>Kl(e,o))&&on(t,`missing type "${i.join(",")}" for keyword "${s}"`)}}}function Kl(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function No(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Hl(t,e){let r=[];for(let s of t.dataTypes)No(e,s)?r.push(s):e.includes("integer")&&s==="number"&&r.push("integer");t.dataTypes=r}function on(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Ye.checkStrictMode)(t,e,t.opts.strictTypes)}var Wr=class{constructor(e,r,s){if((0,pr.validateKeywordUsage)(e,r,s),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=s,this.data=e.data,this.schema=e.schema[s],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ye.schemaRefOrVal)(e,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Io(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,pr.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",R.default.errors))}result(e,r,s){this.failResult((0,P.not)(e),r,s)}failResult(e,r,s){this.gen.if(e),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,P.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,P._)`${r} !== undefined && (${(0,P.or)(this.invalid$data(),e)})`)}error(e,r,s){if(r){this.setParams(r),this._error(e,s),this.setParams({});return}this._error(e,s)}_error(e,r){(e?fr.reportExtraError:fr.reportError)(this,this.def.error,r)}$dataError(){(0,fr.reportError)(this,this.def.$dataError||fr.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,fr.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,s=P.nil){this.gen.block(()=>{this.check$data(e,s),r()})}check$data(e=P.nil,r=P.nil){if(!this.$data)return;let{gen:s,schemaCode:n,schemaType:i,def:o}=this;s.if((0,P.or)((0,P._)`${n} === undefined`,r)),e!==P.nil&&s.assign(e,!0),(i.length||o.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),e!==P.nil&&s.assign(e,!1)),s.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:s,def:n,it:i}=this;return(0,P.or)(o(),c());function o(){if(s.length){if(!(r instanceof P.Name))throw new Error("ajv implementation error");let d=Array.isArray(s)?s:[s];return(0,P._)`${(0,Jr.checkDataTypes)(d,r,i.opts.strictNumbers,Jr.DataType.Wrong)}`}return P.nil}function c(){if(n.validateSchema){let d=e.scopeValue("validate$data",{ref:n.validateSchema});return(0,P._)`!${d}(${r})`}return P.nil}}subschema(e,r){let s=(0,sn.getSubschema)(this.it,e);(0,sn.extendSubschemaData)(s,this.it,e),(0,sn.extendSubschemaMode)(s,e);let n={...this.it,...s,items:void 0,props:void 0};return Al(n,r),n}mergeEvaluated(e,r){let{it:s,gen:n}=this;s.opts.unevaluated&&(s.props!==!0&&e.props!==void 0&&(s.props=Ye.mergeEvaluated.props(n,e.props,s.props,r)),s.items!==!0&&e.items!==void 0&&(s.items=Ye.mergeEvaluated.items(n,e.items,s.items,r)))}mergeValidEvaluated(e,r){let{it:s,gen:n}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return n.if(r,()=>this.mergeEvaluated(e,P.Name)),!0}};st.KeywordCxt=Wr;function To(t,e,r,s){let n=new Wr(t,r,e);"code"in r?r.code(n,s):n.$data&&r.validate?(0,pr.funcKeywordCode)(n,r):"macro"in r?(0,pr.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,pr.funcKeywordCode)(n,r)}var Gl=/^\/(?:[^~]|~0|~1)*$/,Bl=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Io(t,{dataLevel:e,dataNames:r,dataPathArr:s}){let n,i;if(t==="")return R.default.rootData;if(t[0]==="/"){if(!Gl.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);n=t,i=R.default.rootData}else{let p=Bl.exec(t);if(!p)throw new Error(`Invalid JSON-pointer: ${t}`);let f=+p[1];if(n=p[2],n==="#"){if(f>=e)throw new Error(d("property/index",f));return s[e-f]}if(f>e)throw new Error(d("data",f));if(i=r[e-f],!n)return i}let o=i,c=n.split("/");for(let p of c)p&&(i=(0,P._)`${i}${(0,P.getProperty)((0,Ye.unescapeJsonPointer)(p))}`,o=(0,P._)`${o} && ${i}`);return o;function d(p,f){return`Cannot access ${p} ${f} levels up, current level is ${e}`}}st.getData=Io});var Yr=S(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});var an=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};cn.default=an});var Qr=S(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});var un=dr(),ln=class extends Error{constructor(e,r,s,n){super(n||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,un.resolveUrl)(e,r,s),this.missingSchema=(0,un.normalizeId)((0,un.getFullPath)(e,this.missingRef))}};dn.default=ln});var Zr=S(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.resolveSchema=Ce.getCompilingSchema=Ce.resolveRef=Ce.compileSchema=Ce.SchemaEnv=void 0;var Te=k(),Jl=Yr(),yt=We(),Ie=dr(),Ao=U(),Wl=hr(),qt=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let s;typeof e.schema=="object"&&(s=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Ie.normalizeId)(s?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=s?.$async,this.refs={}}};Ce.SchemaEnv=qt;function pn(t){let e=ko.call(this,t);if(e)return e;let r=(0,Ie.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:s,lines:n}=this.opts.code,{ownProperties:i}=this.opts,o=new Te.CodeGen(this.scope,{es5:s,lines:n,ownProperties:i}),c;t.$async&&(c=o.scopeValue("Error",{ref:Jl.default,code:(0,Te._)`require("ajv/dist/runtime/validation_error").default`}));let d=o.scopeName("validate");t.validateName=d;let p={gen:o,allErrors:this.opts.allErrors,data:yt.default.data,parentData:yt.default.parentData,parentDataProperty:yt.default.parentDataProperty,dataNames:[yt.default.data],dataPathArr:[Te.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Te.stringify)(t.schema)}:{ref:t.schema}),validateName:d,ValidationError:c,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Te.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Te._)`""`,opts:this.opts,self:this},f;try{this._compilations.add(t),(0,Wl.validateFunctionCode)(p),o.optimize(this.opts.code.optimize);let g=o.toString();f=`${o.scopeRefs(yt.default.scope)}return ${g}`,this.opts.code.process&&(f=this.opts.code.process(f,t));let _=new Function(`${yt.default.self}`,`${yt.default.scope}`,f)(this,this.scope.get());if(this.scope.value(d,{ref:_}),_.errors=null,_.schema=t.schema,_.schemaEnv=t,t.$async&&(_.$async=!0),this.opts.code.source===!0&&(_.source={validateName:d,validateCode:g,scopeValues:o._values}),this.opts.unevaluated){let{props:v,items:y}=p;_.evaluated={props:v instanceof Te.Name?void 0:v,items:y instanceof Te.Name?void 0:y,dynamicProps:v instanceof Te.Name,dynamicItems:y instanceof Te.Name},_.source&&(_.source.evaluated=(0,Te.stringify)(_.evaluated))}return t.validate=_,t}catch(g){throw delete t.validate,delete t.validateName,f&&this.logger.error("Error compiling schema, function code:",f),g}finally{this._compilations.delete(t)}}Ce.compileSchema=pn;function Yl(t,e,r){var s;r=(0,Ie.resolveUrl)(this.opts.uriResolver,e,r);let n=t.refs[r];if(n)return n;let i=Zl.call(this,t,r);if(i===void 0){let o=(s=t.localRefs)===null||s===void 0?void 0:s[r],{schemaId:c}=this.opts;o&&(i=new qt({schema:o,schemaId:c,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Ql.call(this,i)}Ce.resolveRef=Yl;function Ql(t){return(0,Ie.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:pn.call(this,t)}function ko(t){for(let e of this._compilations)if(Xl(e,t))return e}Ce.getCompilingSchema=ko;function Xl(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Zl(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Xr.call(this,t,e)}function Xr(t,e){let r=this.opts.uriResolver.parse(e),s=(0,Ie._getFullPath)(this.opts.uriResolver,r),n=(0,Ie.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&s===n)return fn.call(this,r,t);let i=(0,Ie.normalizeId)(s),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let c=Xr.call(this,t,o);return typeof c?.schema!="object"?void 0:fn.call(this,r,c)}if(typeof o?.schema=="object"){if(o.validate||pn.call(this,o),i===(0,Ie.normalizeId)(e)){let{schema:c}=o,{schemaId:d}=this.opts,p=c[d];return p&&(n=(0,Ie.resolveUrl)(this.opts.uriResolver,n,p)),new qt({schema:c,schemaId:d,root:t,baseId:n})}return fn.call(this,r,o)}}Ce.resolveSchema=Xr;var ed=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function fn(t,{baseId:e,schema:r,root:s}){var n;if(((n=t.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(let c of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let d=r[(0,Ao.unescapeFragment)(c)];if(d===void 0)return;r=d;let p=typeof r=="object"&&r[this.opts.schemaId];!ed.has(c)&&p&&(e=(0,Ie.resolveUrl)(this.opts.uriResolver,e,p))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,Ao.schemaHasRulesButRef)(r,this.RULES)){let c=(0,Ie.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Xr.call(this,s,c)}let{schemaId:o}=this.opts;if(i=i||new qt({schema:r,schemaId:o,root:s,baseId:e}),i.schema!==i.root.schema)return i}});var Do=S((xh,td)=>{td.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Mo=S((es,jo)=>{(function(t,e){typeof es=="object"&&typeof jo<"u"?e(es):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(es,function(t){"use strict";function e(){for(var u=arguments.length,a=Array(u),l=0;l<u;l++)a[l]=arguments[l];if(a.length>1){a[0]=a[0].slice(0,-1);for(var h=a.length-1,m=1;m<h;++m)a[m]=a[m].slice(1,-1);return a[h]=a[h].slice(1),a.join("")}else return a[0]}function r(u){return"(?:"+u+")"}function s(u){return u===void 0?"undefined":u===null?"null":Object.prototype.toString.call(u).split(" ").pop().split("]").shift().toLowerCase()}function n(u){return u.toUpperCase()}function i(u){return u!=null?u instanceof Array?u:typeof u.length!="number"||u.split||u.setInterval||u.call?[u]:Array.prototype.slice.call(u):[]}function o(u,a){var l=u;if(a)for(var h in a)l[h]=a[h];return l}function c(u){var a="[A-Za-z]",l="[\\x0D]",h="[0-9]",m="[\\x22]",b=e(h,"[A-Fa-f]"),O="[\\x0A]",V="[\\x20]",L=r(r("%[EFef]"+b+"%"+b+b+"%"+b+b)+"|"+r("%[89A-Fa-f]"+b+"%"+b+b)+"|"+r("%"+b+b)),ee="[\\:\\/\\?\\#\\[\\]\\@]",M="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Y=e(ee,M),te=u?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",W=u?"[\\uE000-\\uF8FF]":"[]",F=e(a,h,"[\\-\\.\\_\\~]",te),Q=r(a+e(a,h,"[\\+\\-\\.]")+"*"),K=r(r(L+"|"+e(F,M,"[\\:]"))+"*"),at=r(r("25[0-5]")+"|"+r("2[0-4]"+h)+"|"+r("1"+h+h)+"|"+r("[1-9]"+h)+"|"+h),ge=r(r("25[0-5]")+"|"+r("2[0-4]"+h)+"|"+r("1"+h+h)+"|"+r("0?[1-9]"+h)+"|0?0?"+h),we=r(ge+"\\."+ge+"\\."+ge+"\\."+ge),G=r(b+"{1,4}"),ye=r(r(G+"\\:"+G)+"|"+we),Ee=r(r(G+"\\:")+"{6}"+ye),qe=r("\\:\\:"+r(G+"\\:")+"{5}"+ye),ct=r(r(G)+"?\\:\\:"+r(G+"\\:")+"{4}"+ye),Ke=r(r(r(G+"\\:")+"{0,1}"+G)+"?\\:\\:"+r(G+"\\:")+"{3}"+ye),Gt=r(r(r(G+"\\:")+"{0,2}"+G)+"?\\:\\:"+r(G+"\\:")+"{2}"+ye),kr=r(r(r(G+"\\:")+"{0,3}"+G)+"?\\:\\:"+G+"\\:"+ye),Dr=r(r(r(G+"\\:")+"{0,4}"+G)+"?\\:\\:"+ye),Pt=r(r(r(G+"\\:")+"{0,5}"+G)+"?\\:\\:"+G),Ct=r(r(r(G+"\\:")+"{0,6}"+G)+"?\\:\\:"),He=r([Ee,qe,ct,Ke,Gt,kr,Dr,Pt,Ct].join("|")),Rt=r(r(F+"|"+L)+"+"),bs=r(He+"\\%25"+Rt),ut=r(He+r("\\%25|\\%(?!"+b+"{2})")+Rt),Oc=r("[vV]"+b+"+\\."+e(F,M,"[\\:]")+"+"),Nc=r("\\["+r(ut+"|"+He+"|"+Oc)+"\\]"),Si=r(r(L+"|"+e(F,M))+"*"),Bt=r(Nc+"|"+we+"(?!"+Si+")|"+Si),Jt=r(h+"*"),Pi=r(r(K+"@")+"?"+Bt+r("\\:"+Jt)+"?"),Wt=r(L+"|"+e(F,M,"[\\:\\@]")),Tc=r(Wt+"*"),Ci=r(Wt+"+"),Ic=r(r(L+"|"+e(F,M,"[\\@]"))+"+"),Ge=r(r("\\/"+Tc)+"*"),Ot=r("\\/"+r(Ci+Ge)+"?"),Ss=r(Ic+Ge),jr=r(Ci+Ge),Nt="(?!"+Wt+")",Hp=r(Ge+"|"+Ot+"|"+Ss+"|"+jr+"|"+Nt),Tt=r(r(Wt+"|"+e("[\\/\\?]",W))+"*"),Yt=r(r(Wt+"|[\\/\\?]")+"*"),Ri=r(r("\\/\\/"+Pi+Ge)+"|"+Ot+"|"+jr+"|"+Nt),Ac=r(Q+"\\:"+Ri+r("\\?"+Tt)+"?"+r("\\#"+Yt)+"?"),kc=r(r("\\/\\/"+Pi+Ge)+"|"+Ot+"|"+Ss+"|"+Nt),Dc=r(kc+r("\\?"+Tt)+"?"+r("\\#"+Yt)+"?"),Gp=r(Ac+"|"+Dc),Bp=r(Q+"\\:"+Ri+r("\\?"+Tt)+"?"),Jp="^("+Q+")\\:"+r(r("\\/\\/("+r("("+K+")@")+"?("+Bt+")"+r("\\:("+Jt+")")+"?)")+"?("+Ge+"|"+Ot+"|"+jr+"|"+Nt+")")+r("\\?("+Tt+")")+"?"+r("\\#("+Yt+")")+"?$",Wp="^(){0}"+r(r("\\/\\/("+r("("+K+")@")+"?("+Bt+")"+r("\\:("+Jt+")")+"?)")+"?("+Ge+"|"+Ot+"|"+Ss+"|"+Nt+")")+r("\\?("+Tt+")")+"?"+r("\\#("+Yt+")")+"?$",Yp="^("+Q+")\\:"+r(r("\\/\\/("+r("("+K+")@")+"?("+Bt+")"+r("\\:("+Jt+")")+"?)")+"?("+Ge+"|"+Ot+"|"+jr+"|"+Nt+")")+r("\\?("+Tt+")")+"?$",Qp="^"+r("\\#("+Yt+")")+"?$",Xp="^"+r("("+K+")@")+"?("+Bt+")"+r("\\:("+Jt+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",a,h,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",F,M),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",F,M),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",F,M),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",F,M),"g"),NOT_QUERY:new RegExp(e("[^\\%]",F,M,"[\\:\\@\\/\\?]",W),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",F,M,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",F,M),"g"),UNRESERVED:new RegExp(F,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",F,Y),"g"),PCT_ENCODED:new RegExp(L,"g"),IPV4ADDRESS:new RegExp("^("+we+")$"),IPV6ADDRESS:new RegExp("^\\[?("+He+")"+r(r("\\%25|\\%(?!"+b+"{2})")+"("+Rt+")")+"?\\]?$")}}var d=c(!1),p=c(!0),f=function(){function u(a,l){var h=[],m=!0,b=!1,O=void 0;try{for(var V=a[Symbol.iterator](),L;!(m=(L=V.next()).done)&&(h.push(L.value),!(l&&h.length===l));m=!0);}catch(ee){b=!0,O=ee}finally{try{!m&&V.return&&V.return()}finally{if(b)throw O}}return h}return function(a,l){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return u(a,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(u){if(Array.isArray(u)){for(var a=0,l=Array(u.length);a<u.length;a++)l[a]=u[a];return l}else return Array.from(u)},w=2147483647,_=36,v=1,y=26,$=38,E=700,D=72,T=128,z="-",C=/^xn--/,_e=/[^\0-\x7E]/,Qe=/[\x2E\u3002\uFF0E\uFF61]/g,zt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},it=_-v,oe=Math.floor,ot=String.fromCharCode;function ke(u){throw new RangeError(zt[u])}function Ir(u,a){for(var l=[],h=u.length;h--;)l[h]=a(u[h]);return l}function Ar(u,a){var l=u.split("@"),h="";l.length>1&&(h=l[0]+"@",u=l[1]),u=u.replace(Qe,".");var m=u.split("."),b=Ir(m,a).join(".");return h+b}function oi(u){for(var a=[],l=0,h=u.length;l<h;){var m=u.charCodeAt(l++);if(m>=55296&&m<=56319&&l<h){var b=u.charCodeAt(l++);(b&64512)==56320?a.push(((m&1023)<<10)+(b&1023)+65536):(a.push(m),l--)}else a.push(m)}return a}var nc=function(a){return String.fromCodePoint.apply(String,g(a))},ic=function(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:_},ai=function(a,l){return a+22+75*(a<26)-((l!=0)<<5)},ci=function(a,l,h){var m=0;for(a=h?oe(a/E):a>>1,a+=oe(a/l);a>it*y>>1;m+=_)a=oe(a/it);return oe(m+(it+1)*a/(a+$))},ui=function(a){var l=[],h=a.length,m=0,b=T,O=D,V=a.lastIndexOf(z);V<0&&(V=0);for(var L=0;L<V;++L)a.charCodeAt(L)>=128&&ke("not-basic"),l.push(a.charCodeAt(L));for(var ee=V>0?V+1:0;ee<h;){for(var M=m,Y=1,te=_;;te+=_){ee>=h&&ke("invalid-input");var W=ic(a.charCodeAt(ee++));(W>=_||W>oe((w-m)/Y))&&ke("overflow"),m+=W*Y;var F=te<=O?v:te>=O+y?y:te-O;if(W<F)break;var Q=_-F;Y>oe(w/Q)&&ke("overflow"),Y*=Q}var K=l.length+1;O=ci(m-M,K,M==0),oe(m/K)>w-b&&ke("overflow"),b+=oe(m/K),m%=K,l.splice(m++,0,b)}return String.fromCodePoint.apply(String,l)},li=function(a){var l=[];a=oi(a);var h=a.length,m=T,b=0,O=D,V=!0,L=!1,ee=void 0;try{for(var M=a[Symbol.iterator](),Y;!(V=(Y=M.next()).done);V=!0){var te=Y.value;te<128&&l.push(ot(te))}}catch(ut){L=!0,ee=ut}finally{try{!V&&M.return&&M.return()}finally{if(L)throw ee}}var W=l.length,F=W;for(W&&l.push(z);F<h;){var Q=w,K=!0,at=!1,ge=void 0;try{for(var we=a[Symbol.iterator](),G;!(K=(G=we.next()).done);K=!0){var ye=G.value;ye>=m&&ye<Q&&(Q=ye)}}catch(ut){at=!0,ge=ut}finally{try{!K&&we.return&&we.return()}finally{if(at)throw ge}}var Ee=F+1;Q-m>oe((w-b)/Ee)&&ke("overflow"),b+=(Q-m)*Ee,m=Q;var qe=!0,ct=!1,Ke=void 0;try{for(var Gt=a[Symbol.iterator](),kr;!(qe=(kr=Gt.next()).done);qe=!0){var Dr=kr.value;if(Dr<m&&++b>w&&ke("overflow"),Dr==m){for(var Pt=b,Ct=_;;Ct+=_){var He=Ct<=O?v:Ct>=O+y?y:Ct-O;if(Pt<He)break;var Rt=Pt-He,bs=_-He;l.push(ot(ai(He+Rt%bs,0))),Pt=oe(Rt/bs)}l.push(ot(ai(Pt,0))),O=ci(b,Ee,F==W),b=0,++F}}}catch(ut){ct=!0,Ke=ut}finally{try{!qe&&Gt.return&&Gt.return()}finally{if(ct)throw Ke}}++b,++m}return l.join("")},oc=function(a){return Ar(a,function(l){return C.test(l)?ui(l.slice(4).toLowerCase()):l})},ac=function(a){return Ar(a,function(l){return _e.test(l)?"xn--"+li(l):l})},wt={version:"2.1.0",ucs2:{decode:oi,encode:nc},decode:ui,encode:li,toASCII:ac,toUnicode:oc},$e={};function De(u){var a=u.charCodeAt(0),l=void 0;return a<16?l="%0"+a.toString(16).toUpperCase():a<128?l="%"+a.toString(16).toUpperCase():a<2048?l="%"+(a>>6|192).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase():l="%"+(a>>12|224).toString(16).toUpperCase()+"%"+(a>>6&63|128).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase(),l}function Et(u){for(var a="",l=0,h=u.length;l<h;){var m=parseInt(u.substr(l+1,2),16);if(m<128)a+=String.fromCharCode(m),l+=3;else if(m>=194&&m<224){if(h-l>=6){var b=parseInt(u.substr(l+4,2),16);a+=String.fromCharCode((m&31)<<6|b&63)}else a+=u.substr(l,6);l+=6}else if(m>=224){if(h-l>=9){var O=parseInt(u.substr(l+4,2),16),V=parseInt(u.substr(l+7,2),16);a+=String.fromCharCode((m&15)<<12|(O&63)<<6|V&63)}else a+=u.substr(l,9);l+=9}else a+=u.substr(l,3),l+=3}return a}function _s(u,a){function l(h){var m=Et(h);return m.match(a.UNRESERVED)?m:h}return u.scheme&&(u.scheme=String(u.scheme).replace(a.PCT_ENCODED,l).toLowerCase().replace(a.NOT_SCHEME,"")),u.userinfo!==void 0&&(u.userinfo=String(u.userinfo).replace(a.PCT_ENCODED,l).replace(a.NOT_USERINFO,De).replace(a.PCT_ENCODED,n)),u.host!==void 0&&(u.host=String(u.host).replace(a.PCT_ENCODED,l).toLowerCase().replace(a.NOT_HOST,De).replace(a.PCT_ENCODED,n)),u.path!==void 0&&(u.path=String(u.path).replace(a.PCT_ENCODED,l).replace(u.scheme?a.NOT_PATH:a.NOT_PATH_NOSCHEME,De).replace(a.PCT_ENCODED,n)),u.query!==void 0&&(u.query=String(u.query).replace(a.PCT_ENCODED,l).replace(a.NOT_QUERY,De).replace(a.PCT_ENCODED,n)),u.fragment!==void 0&&(u.fragment=String(u.fragment).replace(a.PCT_ENCODED,l).replace(a.NOT_FRAGMENT,De).replace(a.PCT_ENCODED,n)),u}function $s(u){return u.replace(/^0*(.*)/,"$1")||"0"}function ws(u,a){var l=u.match(a.IPV4ADDRESS)||[],h=f(l,2),m=h[1];return m?m.split(".").map($s).join("."):u}function di(u,a){var l=u.match(a.IPV6ADDRESS)||[],h=f(l,3),m=h[1],b=h[2];if(m){for(var O=m.toLowerCase().split("::").reverse(),V=f(O,2),L=V[0],ee=V[1],M=ee?ee.split(":").map($s):[],Y=L.split(":").map($s),te=a.IPV4ADDRESS.test(Y[Y.length-1]),W=te?7:8,F=Y.length-W,Q=Array(W),K=0;K<W;++K)Q[K]=M[K]||Y[F+K]||"";te&&(Q[W-1]=ws(Q[W-1],a));var at=Q.reduce(function(Ee,qe,ct){if(!qe||qe==="0"){var Ke=Ee[Ee.length-1];Ke&&Ke.index+Ke.length===ct?Ke.length++:Ee.push({index:ct,length:1})}return Ee},[]),ge=at.sort(function(Ee,qe){return qe.length-Ee.length})[0],we=void 0;if(ge&&ge.length>1){var G=Q.slice(0,ge.index),ye=Q.slice(ge.index+ge.length);we=G.join(":")+"::"+ye.join(":")}else we=Q.join(":");return b&&(we+="%"+b),we}else return u}var cc=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,uc="".match(/(){0}/)[1]===void 0;function Le(u){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l={},h=a.iri!==!1?p:d;a.reference==="suffix"&&(u=(a.scheme?a.scheme+":":"")+"//"+u);var m=u.match(cc);if(m){uc?(l.scheme=m[1],l.userinfo=m[3],l.host=m[4],l.port=parseInt(m[5],10),l.path=m[6]||"",l.query=m[7],l.fragment=m[8],isNaN(l.port)&&(l.port=m[5])):(l.scheme=m[1]||void 0,l.userinfo=u.indexOf("@")!==-1?m[3]:void 0,l.host=u.indexOf("//")!==-1?m[4]:void 0,l.port=parseInt(m[5],10),l.path=m[6]||"",l.query=u.indexOf("?")!==-1?m[7]:void 0,l.fragment=u.indexOf("#")!==-1?m[8]:void 0,isNaN(l.port)&&(l.port=u.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?m[4]:void 0)),l.host&&(l.host=di(ws(l.host,h),h)),l.scheme===void 0&&l.userinfo===void 0&&l.host===void 0&&l.port===void 0&&!l.path&&l.query===void 0?l.reference="same-document":l.scheme===void 0?l.reference="relative":l.fragment===void 0?l.reference="absolute":l.reference="uri",a.reference&&a.reference!=="suffix"&&a.reference!==l.reference&&(l.error=l.error||"URI is not a "+a.reference+" reference.");var b=$e[(a.scheme||l.scheme||"").toLowerCase()];if(!a.unicodeSupport&&(!b||!b.unicodeSupport)){if(l.host&&(a.domainHost||b&&b.domainHost))try{l.host=wt.toASCII(l.host.replace(h.PCT_ENCODED,Et).toLowerCase())}catch(O){l.error=l.error||"Host's domain name can not be converted to ASCII via punycode: "+O}_s(l,d)}else _s(l,h);b&&b.parse&&b.parse(l,a)}else l.error=l.error||"URI can not be parsed.";return l}function lc(u,a){var l=a.iri!==!1?p:d,h=[];return u.userinfo!==void 0&&(h.push(u.userinfo),h.push("@")),u.host!==void 0&&h.push(di(ws(String(u.host),l),l).replace(l.IPV6ADDRESS,function(m,b,O){return"["+b+(O?"%25"+O:"")+"]"})),(typeof u.port=="number"||typeof u.port=="string")&&(h.push(":"),h.push(String(u.port))),h.length?h.join(""):void 0}var fi=/^\.\.?\//,pi=/^\/\.(\/|$)/,hi=/^\/\.\.(\/|$)/,dc=/^\/?(?:.|\n)*?(?=\/|$)/;function bt(u){for(var a=[];u.length;)if(u.match(fi))u=u.replace(fi,"");else if(u.match(pi))u=u.replace(pi,"/");else if(u.match(hi))u=u.replace(hi,"/"),a.pop();else if(u==="."||u==="..")u="";else{var l=u.match(dc);if(l){var h=l[0];u=u.slice(h.length),a.push(h)}else throw new Error("Unexpected dot segment condition")}return a.join("")}function je(u){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=a.iri?p:d,h=[],m=$e[(a.scheme||u.scheme||"").toLowerCase()];if(m&&m.serialize&&m.serialize(u,a),u.host&&!l.IPV6ADDRESS.test(u.host)){if(a.domainHost||m&&m.domainHost)try{u.host=a.iri?wt.toUnicode(u.host):wt.toASCII(u.host.replace(l.PCT_ENCODED,Et).toLowerCase())}catch(V){u.error=u.error||"Host's domain name can not be converted to "+(a.iri?"Unicode":"ASCII")+" via punycode: "+V}}_s(u,l),a.reference!=="suffix"&&u.scheme&&(h.push(u.scheme),h.push(":"));var b=lc(u,a);if(b!==void 0&&(a.reference!=="suffix"&&h.push("//"),h.push(b),u.path&&u.path.charAt(0)!=="/"&&h.push("/")),u.path!==void 0){var O=u.path;!a.absolutePath&&(!m||!m.absolutePath)&&(O=bt(O)),b===void 0&&(O=O.replace(/^\/\//,"/%2F")),h.push(O)}return u.query!==void 0&&(h.push("?"),h.push(u.query)),u.fragment!==void 0&&(h.push("#"),h.push(u.fragment)),h.join("")}function mi(u,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments[3],m={};return h||(u=Le(je(u,l),l),a=Le(je(a,l),l)),l=l||{},!l.tolerant&&a.scheme?(m.scheme=a.scheme,m.userinfo=a.userinfo,m.host=a.host,m.port=a.port,m.path=bt(a.path||""),m.query=a.query):(a.userinfo!==void 0||a.host!==void 0||a.port!==void 0?(m.userinfo=a.userinfo,m.host=a.host,m.port=a.port,m.path=bt(a.path||""),m.query=a.query):(a.path?(a.path.charAt(0)==="/"?m.path=bt(a.path):((u.userinfo!==void 0||u.host!==void 0||u.port!==void 0)&&!u.path?m.path="/"+a.path:u.path?m.path=u.path.slice(0,u.path.lastIndexOf("/")+1)+a.path:m.path=a.path,m.path=bt(m.path)),m.query=a.query):(m.path=u.path,a.query!==void 0?m.query=a.query:m.query=u.query),m.userinfo=u.userinfo,m.host=u.host,m.port=u.port),m.scheme=u.scheme),m.fragment=a.fragment,m}function fc(u,a,l){var h=o({scheme:"null"},l);return je(mi(Le(u,h),Le(a,h),h,!0),h)}function pc(u,a){return typeof u=="string"?u=je(Le(u,a),a):s(u)==="object"&&(u=Le(je(u,a),a)),u}function hc(u,a,l){return typeof u=="string"?u=je(Le(u,l),l):s(u)==="object"&&(u=je(u,l)),typeof a=="string"?a=je(Le(a,l),l):s(a)==="object"&&(a=je(a,l)),u===a}function mc(u,a){return u&&u.toString().replace(!a||!a.iri?d.ESCAPE:p.ESCAPE,De)}function ze(u,a){return u&&u.toString().replace(!a||!a.iri?d.PCT_ENCODED:p.PCT_ENCODED,Et)}var Kt={scheme:"http",domainHost:!0,parse:function(a,l){return a.host||(a.error=a.error||"HTTP URIs must have a host."),a},serialize:function(a,l){var h=String(a.scheme).toLowerCase()==="https";return(a.port===(h?443:80)||a.port==="")&&(a.port=void 0),a.path||(a.path="/"),a}},gi={scheme:"https",domainHost:Kt.domainHost,parse:Kt.parse,serialize:Kt.serialize};function yi(u){return typeof u.secure=="boolean"?u.secure:String(u.scheme).toLowerCase()==="wss"}var Ht={scheme:"ws",domainHost:!0,parse:function(a,l){var h=a;return h.secure=yi(h),h.resourceName=(h.path||"/")+(h.query?"?"+h.query:""),h.path=void 0,h.query=void 0,h},serialize:function(a,l){if((a.port===(yi(a)?443:80)||a.port==="")&&(a.port=void 0),typeof a.secure=="boolean"&&(a.scheme=a.secure?"wss":"ws",a.secure=void 0),a.resourceName){var h=a.resourceName.split("?"),m=f(h,2),b=m[0],O=m[1];a.path=b&&b!=="/"?b:void 0,a.query=O,a.resourceName=void 0}return a.fragment=void 0,a}},vi={scheme:"wss",domainHost:Ht.domainHost,parse:Ht.parse,serialize:Ht.serialize},gc={},yc=!0,_i="[A-Za-z0-9\\-\\.\\_\\~"+(yc?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Me="[0-9A-Fa-f]",vc=r(r("%[EFef]"+Me+"%"+Me+Me+"%"+Me+Me)+"|"+r("%[89A-Fa-f]"+Me+"%"+Me+Me)+"|"+r("%"+Me+Me)),_c="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$c="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",wc=e($c,'[\\"\\\\]'),Ec="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",bc=new RegExp(_i,"g"),St=new RegExp(vc,"g"),Sc=new RegExp(e("[^]",_c,"[\\.]",'[\\"]',wc),"g"),$i=new RegExp(e("[^]",_i,Ec),"g"),Pc=$i;function Es(u){var a=Et(u);return a.match(bc)?a:u}var wi={scheme:"mailto",parse:function(a,l){var h=a,m=h.to=h.path?h.path.split(","):[];if(h.path=void 0,h.query){for(var b=!1,O={},V=h.query.split("&"),L=0,ee=V.length;L<ee;++L){var M=V[L].split("=");switch(M[0]){case"to":for(var Y=M[1].split(","),te=0,W=Y.length;te<W;++te)m.push(Y[te]);break;case"subject":h.subject=ze(M[1],l);break;case"body":h.body=ze(M[1],l);break;default:b=!0,O[ze(M[0],l)]=ze(M[1],l);break}}b&&(h.headers=O)}h.query=void 0;for(var F=0,Q=m.length;F<Q;++F){var K=m[F].split("@");if(K[0]=ze(K[0]),l.unicodeSupport)K[1]=ze(K[1],l).toLowerCase();else try{K[1]=wt.toASCII(ze(K[1],l).toLowerCase())}catch(at){h.error=h.error||"Email address's domain name can not be converted to ASCII via punycode: "+at}m[F]=K.join("@")}return h},serialize:function(a,l){var h=a,m=i(a.to);if(m){for(var b=0,O=m.length;b<O;++b){var V=String(m[b]),L=V.lastIndexOf("@"),ee=V.slice(0,L).replace(St,Es).replace(St,n).replace(Sc,De),M=V.slice(L+1);try{M=l.iri?wt.toUnicode(M):wt.toASCII(ze(M,l).toLowerCase())}catch(F){h.error=h.error||"Email address's domain name can not be converted to "+(l.iri?"Unicode":"ASCII")+" via punycode: "+F}m[b]=ee+"@"+M}h.path=m.join(",")}var Y=a.headers=a.headers||{};a.subject&&(Y.subject=a.subject),a.body&&(Y.body=a.body);var te=[];for(var W in Y)Y[W]!==gc[W]&&te.push(W.replace(St,Es).replace(St,n).replace($i,De)+"="+Y[W].replace(St,Es).replace(St,n).replace(Pc,De));return te.length&&(h.query=te.join("&")),h}},Cc=/^([^\:]+)\:(.*)/,Ei={scheme:"urn",parse:function(a,l){var h=a.path&&a.path.match(Cc),m=a;if(h){var b=l.scheme||m.scheme||"urn",O=h[1].toLowerCase(),V=h[2],L=b+":"+(l.nid||O),ee=$e[L];m.nid=O,m.nss=V,m.path=void 0,ee&&(m=ee.parse(m,l))}else m.error=m.error||"URN can not be parsed.";return m},serialize:function(a,l){var h=l.scheme||a.scheme||"urn",m=a.nid,b=h+":"+(l.nid||m),O=$e[b];O&&(a=O.serialize(a,l));var V=a,L=a.nss;return V.path=(m||l.nid)+":"+L,V}},Rc=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,bi={scheme:"urn:uuid",parse:function(a,l){var h=a;return h.uuid=h.nss,h.nss=void 0,!l.tolerant&&(!h.uuid||!h.uuid.match(Rc))&&(h.error=h.error||"UUID is not valid."),h},serialize:function(a,l){var h=a;return h.nss=(a.uuid||"").toLowerCase(),h}};$e[Kt.scheme]=Kt,$e[gi.scheme]=gi,$e[Ht.scheme]=Ht,$e[vi.scheme]=vi,$e[wi.scheme]=wi,$e[Ei.scheme]=Ei,$e[bi.scheme]=bi,t.SCHEMES=$e,t.pctEncChar=De,t.pctDecChars=Et,t.parse=Le,t.removeDotSegments=bt,t.serialize=je,t.resolveComponents=mi,t.resolve=fc,t.normalize=pc,t.equal=hc,t.escapeComponent=mc,t.unescapeComponent=ze,Object.defineProperty(t,"__esModule",{value:!0})})});var Vo=S(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});var qo=Mo();qo.code='require("ajv/dist/runtime/uri").default';hn.default=qo});var Go=S(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.CodeGen=ne.Name=ne.nil=ne.stringify=ne.str=ne._=ne.KeywordCxt=void 0;var rd=hr();Object.defineProperty(ne,"KeywordCxt",{enumerable:!0,get:function(){return rd.KeywordCxt}});var Vt=k();Object.defineProperty(ne,"_",{enumerable:!0,get:function(){return Vt._}});Object.defineProperty(ne,"str",{enumerable:!0,get:function(){return Vt.str}});Object.defineProperty(ne,"stringify",{enumerable:!0,get:function(){return Vt.stringify}});Object.defineProperty(ne,"nil",{enumerable:!0,get:function(){return Vt.nil}});Object.defineProperty(ne,"Name",{enumerable:!0,get:function(){return Vt.Name}});Object.defineProperty(ne,"CodeGen",{enumerable:!0,get:function(){return Vt.CodeGen}});var sd=Yr(),zo=Qr(),nd=Bs(),mr=Zr(),id=k(),gr=dr(),ts=lr(),gn=U(),xo=Do(),od=Vo(),Ko=(t,e)=>new RegExp(t,e);Ko.code="new RegExp";var ad=["removeAdditional","useDefaults","coerceTypes"],cd=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),ud={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},ld={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Uo=200;function dd(t){var e,r,s,n,i,o,c,d,p,f,g,w,_,v,y,$,E,D,T,z,C,_e,Qe,zt,it;let oe=t.strict,ot=(e=t.code)===null||e===void 0?void 0:e.optimize,ke=ot===!0||ot===void 0?1:ot||0,Ir=(s=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&s!==void 0?s:Ko,Ar=(n=t.uriResolver)!==null&&n!==void 0?n:od.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:oe)!==null&&o!==void 0?o:!0,strictNumbers:(d=(c=t.strictNumbers)!==null&&c!==void 0?c:oe)!==null&&d!==void 0?d:!0,strictTypes:(f=(p=t.strictTypes)!==null&&p!==void 0?p:oe)!==null&&f!==void 0?f:"log",strictTuples:(w=(g=t.strictTuples)!==null&&g!==void 0?g:oe)!==null&&w!==void 0?w:"log",strictRequired:(v=(_=t.strictRequired)!==null&&_!==void 0?_:oe)!==null&&v!==void 0?v:!1,code:t.code?{...t.code,optimize:ke,regExp:Ir}:{optimize:ke,regExp:Ir},loopRequired:(y=t.loopRequired)!==null&&y!==void 0?y:Uo,loopEnum:($=t.loopEnum)!==null&&$!==void 0?$:Uo,meta:(E=t.meta)!==null&&E!==void 0?E:!0,messages:(D=t.messages)!==null&&D!==void 0?D:!0,inlineRefs:(T=t.inlineRefs)!==null&&T!==void 0?T:!0,schemaId:(z=t.schemaId)!==null&&z!==void 0?z:"$id",addUsedSchema:(C=t.addUsedSchema)!==null&&C!==void 0?C:!0,validateSchema:(_e=t.validateSchema)!==null&&_e!==void 0?_e:!0,validateFormats:(Qe=t.validateFormats)!==null&&Qe!==void 0?Qe:!0,unicodeRegExp:(zt=t.unicodeRegExp)!==null&&zt!==void 0?zt:!0,int32range:(it=t.int32range)!==null&&it!==void 0?it:!0,uriResolver:Ar}}var yr=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...dd(e)};let{es5:r,lines:s}=this.opts.code;this.scope=new id.ValueScope({scope:{},prefixes:cd,es5:r,lines:s}),this.logger=yd(e.logger);let n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,nd.getRules)(),Fo.call(this,ud,e,"NOT SUPPORTED"),Fo.call(this,ld,e,"DEPRECATED","warn"),this._metaOpts=md.call(this),e.formats&&pd.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&hd.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),fd.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:s}=this.opts,n=xo;s==="id"&&(n={...xo},n.id=n.$id,delete n.$id),r&&e&&this.addMetaSchema(n,n[s],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let s;if(typeof e=="string"){if(s=this.getSchema(e),!s)throw new Error(`no schema with key or ref "${e}"`)}else s=this.compile(e);let n=s(r);return"$async"in s||(this.errors=s.errors),n}compile(e,r){let s=this._addSchema(e,r);return s.validate||this._compileSchemaEnv(s)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:s}=this.opts;return n.call(this,e,r);async function n(f,g){await i.call(this,f.$schema);let w=this._addSchema(f,g);return w.validate||o.call(this,w)}async function i(f){f&&!this.getSchema(f)&&await n.call(this,{$ref:f},!0)}async function o(f){try{return this._compileSchemaEnv(f)}catch(g){if(!(g instanceof zo.default))throw g;return c.call(this,g),await d.call(this,g.missingSchema),o.call(this,f)}}function c({missingSchema:f,missingRef:g}){if(this.refs[f])throw new Error(`AnySchema ${f} is loaded but ${g} cannot be resolved`)}async function d(f){let g=await p.call(this,f);this.refs[f]||await i.call(this,g.$schema),this.refs[f]||this.addSchema(g,f,r)}async function p(f){let g=this._loading[f];if(g)return g;try{return await(this._loading[f]=s(f))}finally{delete this._loading[f]}}}addSchema(e,r,s,n=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,s,n);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,gr.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,s,r,n,!0),this}addMetaSchema(e,r,s=this.opts.validateSchema){return this.addSchema(e,r,!0,s),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let s;if(s=e.$schema,s!==void 0&&typeof s!="string")throw new Error("$schema must be a string");if(s=s||this.opts.defaultMeta||this.defaultMeta(),!s)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let n=this.validate(s,e);if(!n&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return n}getSchema(e){let r;for(;typeof(r=Lo.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:s}=this.opts,n=new mr.SchemaEnv({schema:{},schemaId:s});if(r=mr.resolveSchema.call(this,n,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Lo.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let s=e[this.opts.schemaId];return s&&(s=(0,gr.normalizeId)(s),delete this.schemas[s],delete this.refs[s]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let s;if(typeof e=="string")s=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=s);else if(typeof e=="object"&&r===void 0){if(r=e,s=r.keyword,Array.isArray(s)&&!s.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(_d.call(this,s,r),!r)return(0,gn.eachItem)(s,i=>mn.call(this,i)),this;wd.call(this,r);let n={...r,type:(0,ts.getJSONTypes)(r.type),schemaType:(0,ts.getJSONTypes)(r.schemaType)};return(0,gn.eachItem)(s,n.type.length===0?i=>mn.call(this,i,n):i=>n.type.forEach(o=>mn.call(this,i,n,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let s of r.rules){let n=s.rules.findIndex(i=>i.keyword===e);n>=0&&s.rules.splice(n,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:s="data"}={}){return!e||e.length===0?"No errors":e.map(n=>`${s}${n.instancePath} ${n.message}`).reduce((n,i)=>n+r+i)}$dataMetaSchema(e,r){let s=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let n of r){let i=n.split("/").slice(1),o=e;for(let c of i)o=o[c];for(let c in s){let d=s[c];if(typeof d!="object")continue;let{$data:p}=d.definition,f=o[c];p&&f&&(o[c]=Ho(f))}}return e}_removeAllSchemas(e,r){for(let s in e){let n=e[s];(!r||r.test(s))&&(typeof n=="string"?delete e[s]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[s]))}}_addSchema(e,r,s,n=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:c}=this.opts;if(typeof e=="object")o=e[c];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let d=this._cache.get(e);if(d!==void 0)return d;s=(0,gr.normalizeId)(o||s);let p=gr.getSchemaRefs.call(this,e,s);return d=new mr.SchemaEnv({schema:e,schemaId:c,meta:r,baseId:s,localRefs:p}),this._cache.set(d.schema,d),i&&!s.startsWith("#")&&(s&&this._checkUnique(s),this.refs[s]=d),n&&this.validateSchema(e,!0),d}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):mr.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{mr.compileSchema.call(this,e)}finally{this.opts=r}}};ne.default=yr;yr.ValidationError=sd.default;yr.MissingRefError=zo.default;function Fo(t,e,r,s="error"){for(let n in t){let i=n;i in e&&this.logger[s](`${r}: option ${n}. ${t[i]}`)}}function Lo(t){return t=(0,gr.normalizeId)(t),this.schemas[t]||this.refs[t]}function fd(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function pd(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function hd(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function md(){let t={...this.opts};for(let e of ad)delete t[e];return t}var gd={log(){},warn(){},error(){}};function yd(t){if(t===!1)return gd;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var vd=/^[a-z_$][a-z0-9_$:-]*$/i;function _d(t,e){let{RULES:r}=this;if((0,gn.eachItem)(t,s=>{if(r.keywords[s])throw new Error(`Keyword ${s} is already defined`);if(!vd.test(s))throw new Error(`Keyword ${s} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function mn(t,e,r){var s;let n=e?.post;if(r&&n)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=n?i.post:i.rules.find(({type:d})=>d===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let c={keyword:t,definition:{...e,type:(0,ts.getJSONTypes)(e.type),schemaType:(0,ts.getJSONTypes)(e.schemaType)}};e.before?$d.call(this,o,c,e.before):o.rules.push(c),i.all[t]=c,(s=e.implements)===null||s===void 0||s.forEach(d=>this.addKeyword(d))}function $d(t,e,r){let s=t.rules.findIndex(n=>n.keyword===r);s>=0?t.rules.splice(s,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function wd(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Ho(e)),t.validateSchema=this.compile(e,!0))}var Ed={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ho(t){return{anyOf:[t,Ed]}}});var Bo=S(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});var bd={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};yn.default=bd});var Qo=S(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.callRef=vt.getValidate=void 0;var Sd=Qr(),Jo=Pe(),me=k(),xt=We(),Wo=Zr(),rs=U(),Pd={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:s}=t,{baseId:n,schemaEnv:i,validateName:o,opts:c,self:d}=s,{root:p}=i;if((r==="#"||r==="#/")&&n===p.baseId)return g();let f=Wo.resolveRef.call(d,p,n,r);if(f===void 0)throw new Sd.default(s.opts.uriResolver,n,r);if(f instanceof Wo.SchemaEnv)return w(f);return _(f);function g(){if(i===p)return ss(t,o,i,i.$async);let v=e.scopeValue("root",{ref:p});return ss(t,(0,me._)`${v}.validate`,p,p.$async)}function w(v){let y=Yo(t,v);ss(t,y,v,v.$async)}function _(v){let y=e.scopeValue("schema",c.code.source===!0?{ref:v,code:(0,me.stringify)(v)}:{ref:v}),$=e.name("valid"),E=t.subschema({schema:v,dataTypes:[],schemaPath:me.nil,topSchemaRef:y,errSchemaPath:r},$);t.mergeEvaluated(E),t.ok($)}}};function Yo(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,me._)`${r.scopeValue("wrapper",{ref:e})}.validate`}vt.getValidate=Yo;function ss(t,e,r,s){let{gen:n,it:i}=t,{allErrors:o,schemaEnv:c,opts:d}=i,p=d.passContext?xt.default.this:me.nil;s?f():g();function f(){if(!c.$async)throw new Error("async schema referenced by sync schema");let v=n.let("valid");n.try(()=>{n.code((0,me._)`await ${(0,Jo.callValidateCode)(t,e,p)}`),_(e),o||n.assign(v,!0)},y=>{n.if((0,me._)`!(${y} instanceof ${i.ValidationError})`,()=>n.throw(y)),w(y),o||n.assign(v,!1)}),t.ok(v)}function g(){t.result((0,Jo.callValidateCode)(t,e,p),()=>_(e),()=>w(e))}function w(v){let y=(0,me._)`${v}.errors`;n.assign(xt.default.vErrors,(0,me._)`${xt.default.vErrors} === null ? ${y} : ${xt.default.vErrors}.concat(${y})`),n.assign(xt.default.errors,(0,me._)`${xt.default.vErrors}.length`)}function _(v){var y;if(!i.opts.unevaluated)return;let $=(y=r?.validate)===null||y===void 0?void 0:y.evaluated;if(i.props!==!0)if($&&!$.dynamicProps)$.props!==void 0&&(i.props=rs.mergeEvaluated.props(n,$.props,i.props));else{let E=n.var("props",(0,me._)`${v}.evaluated.props`);i.props=rs.mergeEvaluated.props(n,E,i.props,me.Name)}if(i.items!==!0)if($&&!$.dynamicItems)$.items!==void 0&&(i.items=rs.mergeEvaluated.items(n,$.items,i.items));else{let E=n.var("items",(0,me._)`${v}.evaluated.items`);i.items=rs.mergeEvaluated.items(n,E,i.items,me.Name)}}}vt.callRef=ss;vt.default=Pd});var Xo=S(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});var Cd=Bo(),Rd=Qo(),Od=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Cd.default,Rd.default];vn.default=Od});var Zo=S(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});var ns=k(),nt=ns.operators,is={maximum:{okStr:"<=",ok:nt.LTE,fail:nt.GT},minimum:{okStr:">=",ok:nt.GTE,fail:nt.LT},exclusiveMaximum:{okStr:"<",ok:nt.LT,fail:nt.GTE},exclusiveMinimum:{okStr:">",ok:nt.GT,fail:nt.LTE}},Nd={message:({keyword:t,schemaCode:e})=>(0,ns.str)`must be ${is[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,ns._)`{comparison: ${is[t].okStr}, limit: ${e}}`},Td={keyword:Object.keys(is),type:"number",schemaType:"number",$data:!0,error:Nd,code(t){let{keyword:e,data:r,schemaCode:s}=t;t.fail$data((0,ns._)`${r} ${is[e].fail} ${s} || isNaN(${r})`)}};_n.default=Td});var ea=S($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});var vr=k(),Id={message:({schemaCode:t})=>(0,vr.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,vr._)`{multipleOf: ${t}}`},Ad={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Id,code(t){let{gen:e,data:r,schemaCode:s,it:n}=t,i=n.opts.multipleOfPrecision,o=e.let("res"),c=i?(0,vr._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,vr._)`${o} !== parseInt(${o})`;t.fail$data((0,vr._)`(${s} === 0 || (${o} = ${r}/${s}, ${c}))`)}};$n.default=Ad});var ra=S(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});function ta(t){let e=t.length,r=0,s=0,n;for(;s<e;)r++,n=t.charCodeAt(s++),n>=55296&&n<=56319&&s<e&&(n=t.charCodeAt(s),(n&64512)===56320&&s++);return r}wn.default=ta;ta.code='require("ajv/dist/runtime/ucs2length").default'});var sa=S(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var _t=k(),kd=U(),Dd=ra(),jd={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,_t.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,_t._)`{limit: ${t}}`},Md={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:jd,code(t){let{keyword:e,data:r,schemaCode:s,it:n}=t,i=e==="maxLength"?_t.operators.GT:_t.operators.LT,o=n.opts.unicode===!1?(0,_t._)`${r}.length`:(0,_t._)`${(0,kd.useFunc)(t.gen,Dd.default)}(${r})`;t.fail$data((0,_t._)`${o} ${i} ${s}`)}};En.default=Md});var na=S(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});var qd=Pe(),os=k(),Vd={message:({schemaCode:t})=>(0,os.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,os._)`{pattern: ${t}}`},xd={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Vd,code(t){let{data:e,$data:r,schema:s,schemaCode:n,it:i}=t,o=i.opts.unicodeRegExp?"u":"",c=r?(0,os._)`(new RegExp(${n}, ${o}))`:(0,qd.usePattern)(t,s);t.fail$data((0,os._)`!${c}.test(${e})`)}};bn.default=xd});var ia=S(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});var _r=k(),Ud={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,_r.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,_r._)`{limit: ${t}}`},Fd={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ud,code(t){let{keyword:e,data:r,schemaCode:s}=t,n=e==="maxProperties"?_r.operators.GT:_r.operators.LT;t.fail$data((0,_r._)`Object.keys(${r}).length ${n} ${s}`)}};Sn.default=Fd});var oa=S(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var $r=Pe(),wr=k(),Ld=U(),zd={message:({params:{missingProperty:t}})=>(0,wr.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,wr._)`{missingProperty: ${t}}`},Kd={keyword:"required",type:"object",schemaType:"array",$data:!0,error:zd,code(t){let{gen:e,schema:r,schemaCode:s,data:n,$data:i,it:o}=t,{opts:c}=o;if(!i&&r.length===0)return;let d=r.length>=c.loopRequired;if(o.allErrors?p():f(),c.strictRequired){let _=t.parentSchema.properties,{definedProperties:v}=t.it;for(let y of r)if(_?.[y]===void 0&&!v.has(y)){let $=o.schemaEnv.baseId+o.errSchemaPath,E=`required property "${y}" is not defined at "${$}" (strictRequired)`;(0,Ld.checkStrictMode)(o,E,o.opts.strictRequired)}}function p(){if(d||i)t.block$data(wr.nil,g);else for(let _ of r)(0,$r.checkReportMissingProp)(t,_)}function f(){let _=e.let("missing");if(d||i){let v=e.let("valid",!0);t.block$data(v,()=>w(_,v)),t.ok(v)}else e.if((0,$r.checkMissingProp)(t,r,_)),(0,$r.reportMissingProp)(t,_),e.else()}function g(){e.forOf("prop",s,_=>{t.setParams({missingProperty:_}),e.if((0,$r.noPropertyInData)(e,n,_,c.ownProperties),()=>t.error())})}function w(_,v){t.setParams({missingProperty:_}),e.forOf(_,s,()=>{e.assign(v,(0,$r.propertyInData)(e,n,_,c.ownProperties)),e.if((0,wr.not)(v),()=>{t.error(),e.break()})},wr.nil)}}};Pn.default=Kd});var aa=S(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var Er=k(),Hd={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Er.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Er._)`{limit: ${t}}`},Gd={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Hd,code(t){let{keyword:e,data:r,schemaCode:s}=t,n=e==="maxItems"?Er.operators.GT:Er.operators.LT;t.fail$data((0,Er._)`${r}.length ${n} ${s}`)}};Cn.default=Gd});var as=S(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});var ca=tn();ca.code='require("ajv/dist/runtime/equal").default';Rn.default=ca});var ua=S(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});var On=lr(),ie=k(),Bd=U(),Jd=as(),Wd={message:({params:{i:t,j:e}})=>(0,ie.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,ie._)`{i: ${t}, j: ${e}}`},Yd={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Wd,code(t){let{gen:e,data:r,$data:s,schema:n,parentSchema:i,schemaCode:o,it:c}=t;if(!s&&!n)return;let d=e.let("valid"),p=i.items?(0,On.getSchemaTypes)(i.items):[];t.block$data(d,f,(0,ie._)`${o} === false`),t.ok(d);function f(){let v=e.let("i",(0,ie._)`${r}.length`),y=e.let("j");t.setParams({i:v,j:y}),e.assign(d,!0),e.if((0,ie._)`${v} > 1`,()=>(g()?w:_)(v,y))}function g(){return p.length>0&&!p.some(v=>v==="object"||v==="array")}function w(v,y){let $=e.name("item"),E=(0,On.checkDataTypes)(p,$,c.opts.strictNumbers,On.DataType.Wrong),D=e.const("indices",(0,ie._)`{}`);e.for((0,ie._)`;${v}--;`,()=>{e.let($,(0,ie._)`${r}[${v}]`),e.if(E,(0,ie._)`continue`),p.length>1&&e.if((0,ie._)`typeof ${$} == "string"`,(0,ie._)`${$} += "_"`),e.if((0,ie._)`typeof ${D}[${$}] == "number"`,()=>{e.assign(y,(0,ie._)`${D}[${$}]`),t.error(),e.assign(d,!1).break()}).code((0,ie._)`${D}[${$}] = ${v}`)})}function _(v,y){let $=(0,Bd.useFunc)(e,Jd.default),E=e.name("outer");e.label(E).for((0,ie._)`;${v}--;`,()=>e.for((0,ie._)`${y} = ${v}; ${y}--;`,()=>e.if((0,ie._)`${$}(${r}[${v}], ${r}[${y}])`,()=>{t.error(),e.assign(d,!1).break(E)})))}}};Nn.default=Yd});var la=S(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var Tn=k(),Qd=U(),Xd=as(),Zd={message:"must be equal to constant",params:({schemaCode:t})=>(0,Tn._)`{allowedValue: ${t}}`},ef={keyword:"const",$data:!0,error:Zd,code(t){let{gen:e,data:r,$data:s,schemaCode:n,schema:i}=t;s||i&&typeof i=="object"?t.fail$data((0,Tn._)`!${(0,Qd.useFunc)(e,Xd.default)}(${r}, ${n})`):t.fail((0,Tn._)`${i} !== ${r}`)}};In.default=ef});var da=S(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var br=k(),tf=U(),rf=as(),sf={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,br._)`{allowedValues: ${t}}`},nf={keyword:"enum",schemaType:"array",$data:!0,error:sf,code(t){let{gen:e,data:r,$data:s,schema:n,schemaCode:i,it:o}=t;if(!s&&n.length===0)throw new Error("enum must have non-empty array");let c=n.length>=o.opts.loopEnum,d,p=()=>d??(d=(0,tf.useFunc)(e,rf.default)),f;if(c||s)f=e.let("valid"),t.block$data(f,g);else{if(!Array.isArray(n))throw new Error("ajv implementation error");let _=e.const("vSchema",i);f=(0,br.or)(...n.map((v,y)=>w(_,y)))}t.pass(f);function g(){e.assign(f,!1),e.forOf("v",i,_=>e.if((0,br._)`${p()}(${r}, ${_})`,()=>e.assign(f,!0).break()))}function w(_,v){let y=n[v];return typeof y=="object"&&y!==null?(0,br._)`${p()}(${r}, ${_}[${v}])`:(0,br._)`${r} === ${y}`}}};An.default=nf});var fa=S(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});var of=Zo(),af=ea(),cf=sa(),uf=na(),lf=ia(),df=oa(),ff=aa(),pf=ua(),hf=la(),mf=da(),gf=[of.default,af.default,cf.default,uf.default,lf.default,df.default,ff.default,pf.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},hf.default,mf.default];kn.default=gf});var jn=S(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.validateAdditionalItems=void 0;var $t=k(),Dn=U(),yf={message:({params:{len:t}})=>(0,$t.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,$t._)`{limit: ${t}}`},vf={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:yf,code(t){let{parentSchema:e,it:r}=t,{items:s}=e;if(!Array.isArray(s)){(0,Dn.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}pa(t,s)}};function pa(t,e){let{gen:r,schema:s,data:n,keyword:i,it:o}=t;o.items=!0;let c=r.const("len",(0,$t._)`${n}.length`);if(s===!1)t.setParams({len:e.length}),t.pass((0,$t._)`${c} <= ${e.length}`);else if(typeof s=="object"&&!(0,Dn.alwaysValidSchema)(o,s)){let p=r.var("valid",(0,$t._)`${c} <= ${e.length}`);r.if((0,$t.not)(p),()=>d(p)),t.ok(p)}function d(p){r.forRange("i",e.length,c,f=>{t.subschema({keyword:i,dataProp:f,dataPropType:Dn.Type.Num},p),o.allErrors||r.if((0,$t.not)(p),()=>r.break())})}}Sr.validateAdditionalItems=pa;Sr.default=vf});var Mn=S(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.validateTuple=void 0;var ha=k(),cs=U(),_f=Pe(),$f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return ma(t,"additionalItems",e);r.items=!0,!(0,cs.alwaysValidSchema)(r,e)&&t.ok((0,_f.validateArray)(t))}};function ma(t,e,r=t.schema){let{gen:s,parentSchema:n,data:i,keyword:o,it:c}=t;f(n),c.opts.unevaluated&&r.length&&c.items!==!0&&(c.items=cs.mergeEvaluated.items(s,r.length,c.items));let d=s.name("valid"),p=s.const("len",(0,ha._)`${i}.length`);r.forEach((g,w)=>{(0,cs.alwaysValidSchema)(c,g)||(s.if((0,ha._)`${p} > ${w}`,()=>t.subschema({keyword:o,schemaProp:w,dataProp:w},d)),t.ok(d))});function f(g){let{opts:w,errSchemaPath:_}=c,v=r.length,y=v===g.minItems&&(v===g.maxItems||g[e]===!1);if(w.strictTuples&&!y){let $=`"${o}" is ${v}-tuple, but minItems or maxItems/${e} are not specified or different at path "${_}"`;(0,cs.checkStrictMode)(c,$,w.strictTuples)}}}Pr.validateTuple=ma;Pr.default=$f});var ga=S(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});var wf=Mn(),Ef={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,wf.validateTuple)(t,"items")};qn.default=Ef});var va=S(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});var ya=k(),bf=U(),Sf=Pe(),Pf=jn(),Cf={message:({params:{len:t}})=>(0,ya.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ya._)`{limit: ${t}}`},Rf={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Cf,code(t){let{schema:e,parentSchema:r,it:s}=t,{prefixItems:n}=r;s.items=!0,!(0,bf.alwaysValidSchema)(s,e)&&(n?(0,Pf.validateAdditionalItems)(t,n):t.ok((0,Sf.validateArray)(t)))}};Vn.default=Rf});var _a=S(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});var Re=k(),us=U(),Of={message:({params:{min:t,max:e}})=>e===void 0?(0,Re.str)`must contain at least ${t} valid item(s)`:(0,Re.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Re._)`{minContains: ${t}}`:(0,Re._)`{minContains: ${t}, maxContains: ${e}}`},Nf={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Of,code(t){let{gen:e,schema:r,parentSchema:s,data:n,it:i}=t,o,c,{minContains:d,maxContains:p}=s;i.opts.next?(o=d===void 0?1:d,c=p):o=1;let f=e.const("len",(0,Re._)`${n}.length`);if(t.setParams({min:o,max:c}),c===void 0&&o===0){(0,us.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(c!==void 0&&o>c){(0,us.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,us.alwaysValidSchema)(i,r)){let y=(0,Re._)`${f} >= ${o}`;c!==void 0&&(y=(0,Re._)`${y} && ${f} <= ${c}`),t.pass(y);return}i.items=!0;let g=e.name("valid");c===void 0&&o===1?_(g,()=>e.if(g,()=>e.break())):o===0?(e.let(g,!0),c!==void 0&&e.if((0,Re._)`${n}.length > 0`,w)):(e.let(g,!1),w()),t.result(g,()=>t.reset());function w(){let y=e.name("_valid"),$=e.let("count",0);_(y,()=>e.if(y,()=>v($)))}function _(y,$){e.forRange("i",0,f,E=>{t.subschema({keyword:"contains",dataProp:E,dataPropType:us.Type.Num,compositeRule:!0},y),$()})}function v(y){e.code((0,Re._)`${y}++`),c===void 0?e.if((0,Re._)`${y} >= ${o}`,()=>e.assign(g,!0).break()):(e.if((0,Re._)`${y} > ${c}`,()=>e.assign(g,!1).break()),o===1?e.assign(g,!0):e.if((0,Re._)`${y} >= ${o}`,()=>e.assign(g,!0)))}}};xn.default=Nf});var Ea=S(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.validateSchemaDeps=Ue.validatePropertyDeps=Ue.error=void 0;var Un=k(),Tf=U(),Cr=Pe();Ue.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let s=e===1?"property":"properties";return(0,Un.str)`must have ${s} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:s}})=>(0,Un._)`{property: ${t},
    missingProperty: ${s},
    depsCount: ${e},
    deps: ${r}}`};var If={keyword:"dependencies",type:"object",schemaType:"object",error:Ue.error,code(t){let[e,r]=Af(t);$a(t,e),wa(t,r)}};function Af({schema:t}){let e={},r={};for(let s in t){if(s==="__proto__")continue;let n=Array.isArray(t[s])?e:r;n[s]=t[s]}return[e,r]}function $a(t,e=t.schema){let{gen:r,data:s,it:n}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let c=e[o];if(c.length===0)continue;let d=(0,Cr.propertyInData)(r,s,o,n.opts.ownProperties);t.setParams({property:o,depsCount:c.length,deps:c.join(", ")}),n.allErrors?r.if(d,()=>{for(let p of c)(0,Cr.checkReportMissingProp)(t,p)}):(r.if((0,Un._)`${d} && (${(0,Cr.checkMissingProp)(t,c,i)})`),(0,Cr.reportMissingProp)(t,i),r.else())}}Ue.validatePropertyDeps=$a;function wa(t,e=t.schema){let{gen:r,data:s,keyword:n,it:i}=t,o=r.name("valid");for(let c in e)(0,Tf.alwaysValidSchema)(i,e[c])||(r.if((0,Cr.propertyInData)(r,s,c,i.opts.ownProperties),()=>{let d=t.subschema({keyword:n,schemaProp:c},o);t.mergeValidEvaluated(d,o)},()=>r.var(o,!0)),t.ok(o))}Ue.validateSchemaDeps=wa;Ue.default=If});var Sa=S(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});var ba=k(),kf=U(),Df={message:"property name must be valid",params:({params:t})=>(0,ba._)`{propertyName: ${t.propertyName}}`},jf={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Df,code(t){let{gen:e,schema:r,data:s,it:n}=t;if((0,kf.alwaysValidSchema)(n,r))return;let i=e.name("valid");e.forIn("key",s,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,ba.not)(i),()=>{t.error(!0),n.allErrors||e.break()})}),t.ok(i)}};Fn.default=jf});var zn=S(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var ls=Pe(),Ae=k(),Mf=We(),ds=U(),qf={message:"must NOT have additional properties",params:({params:t})=>(0,Ae._)`{additionalProperty: ${t.additionalProperty}}`},Vf={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:qf,code(t){let{gen:e,schema:r,parentSchema:s,data:n,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:c,opts:d}=o;if(o.props=!0,d.removeAdditional!=="all"&&(0,ds.alwaysValidSchema)(o,r))return;let p=(0,ls.allSchemaProperties)(s.properties),f=(0,ls.allSchemaProperties)(s.patternProperties);g(),t.ok((0,Ae._)`${i} === ${Mf.default.errors}`);function g(){e.forIn("key",n,$=>{!p.length&&!f.length?v($):e.if(w($),()=>v($))})}function w($){let E;if(p.length>8){let D=(0,ds.schemaRefOrVal)(o,s.properties,"properties");E=(0,ls.isOwnProperty)(e,D,$)}else p.length?E=(0,Ae.or)(...p.map(D=>(0,Ae._)`${$} === ${D}`)):E=Ae.nil;return f.length&&(E=(0,Ae.or)(E,...f.map(D=>(0,Ae._)`${(0,ls.usePattern)(t,D)}.test(${$})`))),(0,Ae.not)(E)}function _($){e.code((0,Ae._)`delete ${n}[${$}]`)}function v($){if(d.removeAdditional==="all"||d.removeAdditional&&r===!1){_($);return}if(r===!1){t.setParams({additionalProperty:$}),t.error(),c||e.break();return}if(typeof r=="object"&&!(0,ds.alwaysValidSchema)(o,r)){let E=e.name("valid");d.removeAdditional==="failing"?(y($,E,!1),e.if((0,Ae.not)(E),()=>{t.reset(),_($)})):(y($,E),c||e.if((0,Ae.not)(E),()=>e.break()))}}function y($,E,D){let T={keyword:"additionalProperties",dataProp:$,dataPropType:ds.Type.Str};D===!1&&Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(T,E)}}};Ln.default=Vf});var Ra=S(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});var xf=hr(),Pa=Pe(),Kn=U(),Ca=zn(),Uf={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:s,data:n,it:i}=t;i.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&Ca.default.code(new xf.KeywordCxt(i,Ca.default,"additionalProperties"));let o=(0,Pa.allSchemaProperties)(r);for(let g of o)i.definedProperties.add(g);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=Kn.mergeEvaluated.props(e,(0,Kn.toHash)(o),i.props));let c=o.filter(g=>!(0,Kn.alwaysValidSchema)(i,r[g]));if(c.length===0)return;let d=e.name("valid");for(let g of c)p(g)?f(g):(e.if((0,Pa.propertyInData)(e,n,g,i.opts.ownProperties)),f(g),i.allErrors||e.else().var(d,!0),e.endIf()),t.it.definedProperties.add(g),t.ok(d);function p(g){return i.opts.useDefaults&&!i.compositeRule&&r[g].default!==void 0}function f(g){t.subschema({keyword:"properties",schemaProp:g,dataProp:g},d)}}};Hn.default=Uf});var Ia=S(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});var Oa=Pe(),fs=k(),Na=U(),Ta=U(),Ff={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:s,parentSchema:n,it:i}=t,{opts:o}=i,c=(0,Oa.allSchemaProperties)(r),d=c.filter(y=>(0,Na.alwaysValidSchema)(i,r[y]));if(c.length===0||d.length===c.length&&(!i.opts.unevaluated||i.props===!0))return;let p=o.strictSchema&&!o.allowMatchingProperties&&n.properties,f=e.name("valid");i.props!==!0&&!(i.props instanceof fs.Name)&&(i.props=(0,Ta.evaluatedPropsToName)(e,i.props));let{props:g}=i;w();function w(){for(let y of c)p&&_(y),i.allErrors?v(y):(e.var(f,!0),v(y),e.if(f))}function _(y){for(let $ in p)new RegExp(y).test($)&&(0,Na.checkStrictMode)(i,`property ${$} matches pattern ${y} (use allowMatchingProperties)`)}function v(y){e.forIn("key",s,$=>{e.if((0,fs._)`${(0,Oa.usePattern)(t,y)}.test(${$})`,()=>{let E=d.includes(y);E||t.subschema({keyword:"patternProperties",schemaProp:y,dataProp:$,dataPropType:Ta.Type.Str},f),i.opts.unevaluated&&g!==!0?e.assign((0,fs._)`${g}[${$}]`,!0):!E&&!i.allErrors&&e.if((0,fs.not)(f),()=>e.break())})})}}};Gn.default=Ff});var Aa=S(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});var Lf=U(),zf={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:s}=t;if((0,Lf.alwaysValidSchema)(s,r)){t.fail();return}let n=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),t.failResult(n,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Bn.default=zf});var ka=S(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});var Kf=Pe(),Hf={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Kf.validateUnion,error:{message:"must match a schema in anyOf"}};Jn.default=Hf});var Da=S(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});var ps=k(),Gf=U(),Bf={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,ps._)`{passingSchemas: ${t.passing}}`},Jf={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Bf,code(t){let{gen:e,schema:r,parentSchema:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&s.discriminator)return;let i=r,o=e.let("valid",!1),c=e.let("passing",null),d=e.name("_valid");t.setParams({passing:c}),e.block(p),t.result(o,()=>t.reset(),()=>t.error(!0));function p(){i.forEach((f,g)=>{let w;(0,Gf.alwaysValidSchema)(n,f)?e.var(d,!0):w=t.subschema({keyword:"oneOf",schemaProp:g,compositeRule:!0},d),g>0&&e.if((0,ps._)`${d} && ${o}`).assign(o,!1).assign(c,(0,ps._)`[${c}, ${g}]`).else(),e.if(d,()=>{e.assign(o,!0),e.assign(c,g),w&&t.mergeEvaluated(w,ps.Name)})})}}};Wn.default=Jf});var ja=S(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});var Wf=U(),Yf={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let n=e.name("valid");r.forEach((i,o)=>{if((0,Wf.alwaysValidSchema)(s,i))return;let c=t.subschema({keyword:"allOf",schemaProp:o},n);t.ok(n),t.mergeEvaluated(c)})}};Yn.default=Yf});var Va=S(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});var hs=k(),qa=U(),Qf={message:({params:t})=>(0,hs.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,hs._)`{failingKeyword: ${t.ifClause}}`},Xf={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Qf,code(t){let{gen:e,parentSchema:r,it:s}=t;r.then===void 0&&r.else===void 0&&(0,qa.checkStrictMode)(s,'"if" without "then" and "else" is ignored');let n=Ma(s,"then"),i=Ma(s,"else");if(!n&&!i)return;let o=e.let("valid",!0),c=e.name("_valid");if(d(),t.reset(),n&&i){let f=e.let("ifClause");t.setParams({ifClause:f}),e.if(c,p("then",f),p("else",f))}else n?e.if(c,p("then")):e.if((0,hs.not)(c),p("else"));t.pass(o,()=>t.error(!0));function d(){let f=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);t.mergeEvaluated(f)}function p(f,g){return()=>{let w=t.subschema({keyword:f},c);e.assign(o,c),t.mergeValidEvaluated(w,o),g?e.assign(g,(0,hs._)`${f}`):t.setParams({ifClause:f})}}}};function Ma(t,e){let r=t.schema[e];return r!==void 0&&!(0,qa.alwaysValidSchema)(t,r)}Qn.default=Xf});var xa=S(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});var Zf=U(),ep={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Zf.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Xn.default=ep});var Ua=S(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});var tp=jn(),rp=ga(),sp=Mn(),np=va(),ip=_a(),op=Ea(),ap=Sa(),cp=zn(),up=Ra(),lp=Ia(),dp=Aa(),fp=ka(),pp=Da(),hp=ja(),mp=Va(),gp=xa();function yp(t=!1){let e=[dp.default,fp.default,pp.default,hp.default,mp.default,gp.default,ap.default,cp.default,op.default,up.default,lp.default];return t?e.push(rp.default,np.default):e.push(tp.default,sp.default),e.push(ip.default),e}Zn.default=yp});var Fa=S(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});var Z=k(),vp={message:({schemaCode:t})=>(0,Z.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Z._)`{format: ${t}}`},_p={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:vp,code(t,e){let{gen:r,data:s,$data:n,schema:i,schemaCode:o,it:c}=t,{opts:d,errSchemaPath:p,schemaEnv:f,self:g}=c;if(!d.validateFormats)return;n?w():_();function w(){let v=r.scopeValue("formats",{ref:g.formats,code:d.code.formats}),y=r.const("fDef",(0,Z._)`${v}[${o}]`),$=r.let("fType"),E=r.let("format");r.if((0,Z._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign($,(0,Z._)`${y}.type || "string"`).assign(E,(0,Z._)`${y}.validate`),()=>r.assign($,(0,Z._)`"string"`).assign(E,y)),t.fail$data((0,Z.or)(D(),T()));function D(){return d.strictSchema===!1?Z.nil:(0,Z._)`${o} && !${E}`}function T(){let z=f.$async?(0,Z._)`(${y}.async ? await ${E}(${s}) : ${E}(${s}))`:(0,Z._)`${E}(${s})`,C=(0,Z._)`(typeof ${E} == "function" ? ${z} : ${E}.test(${s}))`;return(0,Z._)`${E} && ${E} !== true && ${$} === ${e} && !${C}`}}function _(){let v=g.formats[i];if(!v){D();return}if(v===!0)return;let[y,$,E]=T(v);y===e&&t.pass(z());function D(){if(d.strictSchema===!1){g.logger.warn(C());return}throw new Error(C());function C(){return`unknown format "${i}" ignored in schema at path "${p}"`}}function T(C){let _e=C instanceof RegExp?(0,Z.regexpCode)(C):d.code.formats?(0,Z._)`${d.code.formats}${(0,Z.getProperty)(i)}`:void 0,Qe=r.scopeValue("formats",{key:i,ref:C,code:_e});return typeof C=="object"&&!(C instanceof RegExp)?[C.type||"string",C.validate,(0,Z._)`${Qe}.validate`]:["string",C,Qe]}function z(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!f.$async)throw new Error("async format in sync schema");return(0,Z._)`await ${E}(${s})`}return typeof $=="function"?(0,Z._)`${E}(${s})`:(0,Z._)`${E}.test(${s})`}}}};ei.default=_p});var La=S(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});var $p=Fa(),wp=[$p.default];ti.default=wp});var za=S(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.contentVocabulary=Ut.metadataVocabulary=void 0;Ut.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Ut.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Ha=S(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});var Ep=Xo(),bp=fa(),Sp=Ua(),Pp=La(),Ka=za(),Cp=[Ep.default,bp.default,(0,Sp.default)(),Pp.default,Ka.metadataVocabulary,Ka.contentVocabulary];ri.default=Cp});var Ga=S(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.DiscrError=void 0;var Rp;(function(t){t.Tag="tag",t.Mapping="mapping"})(Rp=Rr.DiscrError||(Rr.DiscrError={}))});var Ja=S(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});var Ft=k(),si=Ga(),Ba=Zr(),Op=U(),Np={message:({params:{discrError:t,tagName:e}})=>t===si.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Ft._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Tp={keyword:"discriminator",type:"object",schemaType:"object",error:Np,code(t){let{gen:e,data:r,schema:s,parentSchema:n,it:i}=t,{oneOf:o}=n;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let c=s.propertyName;if(typeof c!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let d=e.let("valid",!1),p=e.const("tag",(0,Ft._)`${r}${(0,Ft.getProperty)(c)}`);e.if((0,Ft._)`typeof ${p} == "string"`,()=>f(),()=>t.error(!1,{discrError:si.DiscrError.Tag,tag:p,tagName:c})),t.ok(d);function f(){let _=w();e.if(!1);for(let v in _)e.elseIf((0,Ft._)`${p} === ${v}`),e.assign(d,g(_[v]));e.else(),t.error(!1,{discrError:si.DiscrError.Mapping,tag:p,tagName:c}),e.endIf()}function g(_){let v=e.name("valid"),y=t.subschema({keyword:"oneOf",schemaProp:_},v);return t.mergeEvaluated(y,Ft.Name),v}function w(){var _;let v={},y=E(n),$=!0;for(let z=0;z<o.length;z++){let C=o[z];C?.$ref&&!(0,Op.schemaHasRulesButRef)(C,i.self.RULES)&&(C=Ba.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,C?.$ref),C instanceof Ba.SchemaEnv&&(C=C.schema));let _e=(_=C?.properties)===null||_===void 0?void 0:_[c];if(typeof _e!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${c}"`);$=$&&(y||E(C)),D(_e,z)}if(!$)throw new Error(`discriminator: "${c}" must be required`);return v;function E({required:z}){return Array.isArray(z)&&z.includes(c)}function D(z,C){if(z.const)T(z.const,C);else if(z.enum)for(let _e of z.enum)T(_e,C);else throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`)}function T(z,C){if(typeof z!="string"||z in v)throw new Error(`discriminator: "${c}" values must be unique strings`);v[z]=C}}}};ni.default=Tp});var Wa=S((Rm,Ip)=>{Ip.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Xa=S((X,Qa)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.MissingRefError=X.ValidationError=X.CodeGen=X.Name=X.nil=X.stringify=X.str=X._=X.KeywordCxt=void 0;var Ap=Go(),kp=Ha(),Dp=Ja(),Ya=Wa(),jp=["/properties"],ms="http://json-schema.org/draft-07/schema",gs=class extends Ap.default{_addVocabularies(){super._addVocabularies(),kp.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Dp.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(Ya,jp):Ya;this.addMetaSchema(e,ms,!1),this.refs["http://json-schema.org/schema"]=ms}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(ms)?ms:void 0)}};Qa.exports=X=gs;Object.defineProperty(X,"__esModule",{value:!0});X.default=gs;var Mp=hr();Object.defineProperty(X,"KeywordCxt",{enumerable:!0,get:function(){return Mp.KeywordCxt}});var Lt=k();Object.defineProperty(X,"_",{enumerable:!0,get:function(){return Lt._}});Object.defineProperty(X,"str",{enumerable:!0,get:function(){return Lt.str}});Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return Lt.stringify}});Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return Lt.nil}});Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return Lt.Name}});Object.defineProperty(X,"CodeGen",{enumerable:!0,get:function(){return Lt.CodeGen}});var qp=Yr();Object.defineProperty(X,"ValidationError",{enumerable:!0,get:function(){return qp.default}});var Vp=Qr();Object.defineProperty(X,"MissingRefError",{enumerable:!0,get:function(){return Vp.default}})});var Kp={};Uc(Kp,{activate:()=>Lp,deactivate:()=>zp});module.exports=Fc(Kp);var vs=ve(require("vscode"));var Ni=ve(require("vscode"));var Ps=class{constructor(){this.isGitAvailable=!1;this.disposables=[];this.gitExtension=Ni.extensions.getExtension("vscode.git"),this.gitExtension&&(this.isGitAvailable=!0,this.api=this.gitExtension.exports.getAPI(1))}getSelectedRepository(){var r,s;let e=(r=this.api)==null?void 0:r.repositories.find(n=>n.ui.selected);return e||((s=this.api)==null?void 0:s.repositories[0])}getRepositoryByPath(e){var s;let r=(s=this.api)==null?void 0:s.repositories.find(n=>n.rootUri.path===e);if(r)return r}onRepositoryDidChange(e){var r;this.disposables.forEach(s=>s.dispose()),this.disposables=[],(r=this.api)==null||r.repositories.forEach(s=>{this.disposables.push(s.ui.onDidChange(()=>{s.ui.selected&&e({numberOfRepositories:this.getNumberOfRepositories(),selectedRepositoryPath:s.rootUri.path,availableRepositories:this.getAvailableRepositoryPaths()})},this))})}getNumberOfRepositories(){var e;return((e=this.api)==null?void 0:e.repositories.length)||0}getAvailableRepositoryPaths(){var e,r;return(e=this.api)!=null&&e.repositories?(r=this.api)==null?void 0:r.repositories.map(s=>s.rootUri.path):[]}getSelectedRepositoryPath(){let e=this.getSelectedRepository();return e==null?void 0:e.rootUri.path}isAvailable(){return this.isGitAvailable}getSCMInputBoxMessage(){let e=this.getSelectedRepository();return e?e.inputBox.value:""}setSCMInputBoxMessage(e,r=""){let s;r!==""&&(s=this.getRepositoryByPath(r)),s||(s=this.getSelectedRepository()),s&&(s.inputBox.value=e)}getRepositoryRecentCommitMessages(e,r=32){return re(this,null,function*(){let s;try{s=yield e.log({maxEntries:r})}catch(n){return[]}return s||[]})}getRecentCommitMessages(e=32,r){return re(this,null,function*(){let s;return r===""?s=this.getSelectedRepository():s=this.getRepositoryByPath(r),s?this.getRepositoryRecentCommitMessages(s,e):[]})}getRecentCommitMessagesByPath(e,r=32){return re(this,null,function*(){let s=this.getRepositoryByPath(e);return s?this.getRepositoryRecentCommitMessages(s,r):[]})}},Ti=Ps;var fe=ve(require("vscode"));var be=ve(require("vscode"));var qr={Active:be.ViewColumn.Active,Beside:be.ViewColumn.Beside,One:be.ViewColumn.One,Two:be.ViewColumn.Two,Three:be.ViewColumn.Three,Four:be.ViewColumn.Four,Five:be.ViewColumn.Five,Six:be.ViewColumn.Six,Seven:be.ViewColumn.Seven,Eight:be.ViewColumn.Eight,Nine:be.ViewColumn.Nine};var ki=require("os");var Ii=ve(require("path")),Ai=ve(require("vscode")),Qt=class{constructor(e,r){this._context=e;this._webview=r}resolve(e){let{extensionPath:r}=this._context,s=e.split("/"),n=Ai.Uri.file(Ii.join(r,...s));return this._webview.asWebviewUri(n)}};var Lc=()=>{let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},Vr=Lc;var Xt=class{constructor(e,r){this._context=e;this._webview=r;this._uri=new Qt(this._context,this._webview),this._platform=(0,ki.platform)()}getHTML(e="default"){let{cspSource:r}=this._webview,s=Vr(),n=this._uri.resolve("node_modules/vscode-codicons/dist/codicon.css"),i=this._uri.resolve("frontend/dist/_bundled/cme-editor-page.js");return`
      <!DOCTYPE html>
      <html lang="en" data-view-id="${e}">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta
          http-equiv="Content-Security-Policy"
          content="
            default-src 'none';
            img-src ${r};
            script-src ${r} nonce-${s};
            style-src 'unsafe-inline' ${r};
            style-src-elem 'unsafe-inline' ${r};
            font-src ${r}
          "
        />
        <title>Commit message editor</title>
        <link rel="stylesheet" href="${n}" nonce="${s}" id="vscode-codicon-stylesheet">
        <style>body { padding: 0 10px; }</style>
      </head>
      <body class="${this._platform}">
        <cme-editor-page></cme-editor-page>
        <script src="${i}" nonce="${s}" type="module"></script>
      </body>
      </html>
  `}};var zc=(t,e=void 0)=>({command:t,payload:e}),lt=zc;var dt=class{constructor(e){this._webView=e}sendSCMInputBoxValue(e){this._webView.postMessage(lt("copyFromSCMInputBox",e))}sendRepositoryInfo(e){this._webView.postMessage(lt("repositoryInfo",e))}sendConfig(e){this._webView.postMessage(lt("receiveConfig",e))}sendRecentCommits(e){this._webView.postMessage(lt("recentCommitMessages",e))}sendAmendPerformed(){this._webView.postMessage(lt("amendPerformed"))}sendStatusMessage(e,r="success"){this._webView.postMessage(lt("statusMessage",{statusMessage:e,statusMessageType:r}))}};var Zt=class{constructor(e,r,s){this._context=e;this._git=r;this._logger=s;this._handleRepositoryDidChangeBound=this._handleRepositoryDidChange.bind(this)}openInTheMainView(e){return re(this,null,function*(){this._logger.log("Opened in the main view");let r=fe.workspace.getConfiguration("commit-message-editor");if(this._primaryEditorPanel)this._primaryEditorPanel.reveal();else{this._primaryEditorPanel=fe.window.createWebviewPanel("editCommitMessage","Commit Message Editor",qr[r.view.columnToShowIn],{enableScripts:!0,retainContextWhenHidden:!0}),this._primaryEditorPanel.onDidDispose(()=>{this._primaryEditorPanel=void 0},null,this._context.subscriptions);let s=new Xt(this._context,this._primaryEditorPanel.webview);this._primaryEditorPanel.webview.html=s.getHTML("editCommitMessage"),this._context.subscriptions.push(this._primaryEditorPanel)}if(this._ui=new dt(this._primaryEditorPanel.webview),this._ui.sendSCMInputBoxValue(this._git.getSCMInputBoxMessage()),this._ui.sendConfig(r),e&&e.rootUri){let s=e.rootUri.path,n=yield this._git.getRecentCommitMessagesByPath(s),i={numberOfRepositories:this._git.getNumberOfRepositories(),selectedRepositoryPath:s,availableRepositories:this._git.getAvailableRepositoryPaths()};this._ui.sendRepositoryInfo(i),this._logger.logObject(i,"Suggested repository:"),this._ui.sendRecentCommits(n)}else{let s=this._getRepositoryInfo();this._ui.sendRepositoryInfo(s),this._logger.logObject(s,"Default repository:")}this._initReceivedMessageListener(),this._git.onRepositoryDidChange(this._handleRepositoryDidChangeBound)})}get primaryEditorPanel(){return this._primaryEditorPanel}_handleRepositoryDidChange(e){return re(this,null,function*(){var n,i;this._logger.logObject(e,"Repository did change:"),(n=this._ui)==null||n.sendRepositoryInfo(e);let{selectedRepositoryPath:r}=e,s=yield this._git.getRecentCommitMessagesByPath(r);(i=this._ui)==null||i.sendRecentCommits(s)})}_getRepositoryInfo(){return{numberOfRepositories:this._git.getNumberOfRepositories(),selectedRepositoryPath:this._git.getSelectedRepositoryPath(),availableRepositories:this._git.getAvailableRepositoryPaths()}}_initReceivedMessageListener(){var e;(e=this._primaryEditorPanel)==null||e.webview.onDidReceiveMessage(this._handleReceivedMessages,this)}_handleReceivedMessages(e){var n,i;let{command:r,payload:s}=e;switch(r){case"copyFromExtensionMessageBox":let{commitMessage:o,selectedRepositoryPath:c}=s;this._git.setSCMInputBoxMessage(o,c);break;case"closeTab":(n=this._primaryEditorPanel)==null||n.dispose();break;case"requestConfig":let d=fe.workspace.getConfiguration("commit-message-editor");(i=this._ui)==null||i.sendConfig(d);break;case"requestRecentCommits":this._populateCommitList(s);break;case"confirmAmend":this._confirmAmend(s);break;case"openConfigurationPage":fe.commands.executeCommand("commitMessageEditor.openSettingsPage");break;default:break}}_populateCommitList(e=""){this._git.getRecentCommitMessages(10,e).then(r=>{var s;(s=this._ui)==null||s.sendRecentCommits(r)}).catch(r=>{fe.window.showErrorMessage("Something went wrong",r)})}_confirmAmend(e){return re(this,null,function*(){if(!fe.workspace.getConfiguration("commit-message-editor").get("confirmAmend")){this._performAmend(e);return}let s="Yes",n="Always",i=yield fe.window.showWarningMessage("Are you sure want to continue? Your last commit will be undone.",{modal:!0},s,n);[s,n].includes(i)&&this._performAmend(e),i===n&&fe.workspace.getConfiguration("commit-message-editor").update("confirmAmend",!1,fe.ConfigurationTarget.Global)})}_performAmend(e){return re(this,null,function*(){var r;yield fe.commands.executeCommand("git.undoCommit"),this._git.setSCMInputBoxMessage(e),this._populateCommitList(),this._primaryEditorPanel&&((r=this._ui)==null||r.sendAmendPerformed())})}};var ys=ve(require("fs")),ii=ve(require("util")),Fe=ve(require("vscode")),rc=ve(Xa());var Za=ve(require("path")),ec=ve(require("vscode"));var xp=({extensionPath:t,webview:e})=>{let r=o=>{let c=o.split("/"),d=ec.Uri.file(Za.join(t,...c));return e.asWebviewUri(d)},{cspSource:s}=e,n=Vr();return`
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta
        http-equiv="Content-Security-Policy"
        content="default-src 'none'; img-src ${s}; script-src ${s} nonce-${n}; style-src 'unsafe-inline' ${s}; style-src-elem 'unsafe-inline' ${s}; font-src ${s}"
      />
      <title>Commit message editor</title>
      <link rel="stylesheet" href="${r("node_modules/vscode-codicons/dist/codicon.css")}" nonce="${n}" id="vscode-codicon-stylesheet">
      <style>body { padding: 0 10px; }</style>
    </head>
    <body>
      <cme-settings-page></cme-esettings-page>
      <script src="${r("frontend/dist/_bundled/cme-settings-page.js")}" nonce="${n}" type="module"></script>
    </body>
    </html>
  `},tc=xp;var Up=ii.promisify(ys.readFile),Fp=ii.promisify(ys.writeFile),Or=class{constructor(e){this._context=e}run(){this._openPanel(),this._activateWebviewMessageListener()}_showStatus(e,r="success"){var s;(s=this._currentPanel)==null||s.webview.postMessage({command:"statusMessage",payload:{statusMessage:e,statusMessageType:r}})}_showError(e){let r="";e.toString?r=e.toString():typeof e=="string"?r=e:r="unknown error",this._showStatus(r,"error")}_readJSON(e){return re(this,null,function*(){let s=(yield Up(e)).toString("utf-8");try{return JSON.parse(s)}catch(n){return Promise.reject(n)}})}_readSchema(){return re(this,null,function*(){return this._readJSON(this._context.asAbsolutePath("docs/schemas/config-v1.schema.json"))})}_processConfigFile(){return re(this,null,function*(){let e=yield Fe.window.showOpenDialog({canSelectMany:!1,filters:{JSON:["json"]}});if(e)try{let r=yield this._readJSON(e[0].fsPath),s=yield this._readSchema(),n=new rc.default,i=n.compile(s);if(!i(r))throw new Error(n.errorsText(i.errors));return r}catch(r){return r instanceof Error?Promise.reject(r.message):Promise.reject(r)}})}_importConfig(){return re(this,null,function*(){var e,r;try{let s=yield this._processConfigFile();(e=this._currentPanel)==null||e.webview.postMessage({command:"receiveImportedConfig",payload:s})}catch(s){(r=this._currentPanel)==null||r.webview.postMessage({command:"statusMessage",payload:{statusMessage:s,statusMessageType:"error"}})}})}_exportConfig(e){return re(this,null,function*(){let r=yield Fe.window.showSaveDialog({filters:{"JSON files":["json"]}}),{staticTemplate:s,dynamicTemplate:n,tokens:i}=e,c=JSON.stringify({$schema:"https://bendera.github.io/vscode-commit-message-editor/schemas/config-v1.schema.json",configVersion:"1",staticTemplate:s,dynamicTemplate:n,tokens:i},null,2);if(r!=null&&r.fsPath)try{yield Fp(r.fsPath,c,"utf-8"),this._showStatus(`File saved successfully to ${r.fsPath}`)}catch(d){this._showError(d)}})}_loadCurrentConfig(){var i;let e=Fe.workspace.getConfiguration("commit-message-editor"),{staticTemplate:r,dynamicTemplate:s,tokens:n}=e;(i=this._currentPanel)==null||i.webview.postMessage({command:"loadCurrentConfig",payload:{staticTemplate:r,dynamicTemplate:s,tokens:n}})}_saveToSettings(e){let{configurationTarget:r,configuration:s}=e,{staticTemplate:n,dynamicTemplate:i,tokens:o}=s,c=Fe.workspace.getConfiguration("commit-message-editor").update("staticTemplate",n,r),d=Fe.workspace.getConfiguration("commit-message-editor").update("dynamicTemplate",i,r),p=Fe.workspace.getConfiguration("commit-message-editor").update("tokens",o,r);Promise.all([c,d,p]).then(()=>{this._showStatus("Settings saved")}).catch(f=>{this._showError(f)})}_webviewMessageListener(e){let{command:r,payload:s}=e;switch(r){case"importConfig":this._importConfig();break;case"exportConfig":this._exportConfig(s);break;case"loadCurrentConfig":this._loadCurrentConfig();break;case"saveToSettings":this._saveToSettings(s);break}}_activateWebviewMessageListener(){var e;(e=this._currentPanel)==null||e.webview.onDidReceiveMessage(this._webviewMessageListener,this,this._context.subscriptions)}_openPanel(){let e=Fe.workspace.getConfiguration("commit-message-editor");this._currentPanel?this._currentPanel.reveal():(this._currentPanel=Fe.window.createWebviewPanel("cmeSettingsPage","Edit commit templates",qr[e.view.columnToShowIn],{enableScripts:!0,retainContextWhenHidden:!0}),this._currentPanel.webview.html=tc({extensionPath:this._context.extensionPath,webview:this._currentPanel.webview}),this._currentPanel.onDidDispose(()=>{this._currentPanel=void 0},null,this._context.subscriptions))}};var Nr=class{constructor(e,r){this._git=e;this._editorController=r}run(){let{primaryEditorPanel:e}=this._editorController;e&&new dt(e.webview).sendSCMInputBoxValue(this._git.getSCMInputBoxMessage())}};var sc=ve(require("vscode")),Tr=class{constructor(){this._channel=sc.window.createOutputChannel("Commit Message Editor","Log")}log(e){let r=`[${this._getTimestamp()}]`;this._channel.appendLine(`${r} ${e}`)}logObject(e,r=""){let s=`[${this._getTimestamp()}]`;this._channel.appendLine(`${s} ${r}`),this._channel.appendLine(JSON.stringify(e,void 0,2))}_getTimestamp(){let e=new Date,r=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0"),c=e.getSeconds().toString().padStart(2,"0"),d=e.getMilliseconds().toString().padStart(3,"0");return`${r}-${s}-${n} ${i}:${o}:${c}.${d}`}};function Lp(t){return re(this,null,function*(){let e=new Tr,r=new Ti,s=new Zt(t,r,e),n=new Or(t),i=new Nr(r,s);t.subscriptions.push(vs.commands.registerCommand("commitMessageEditor.openEditor",s.openInTheMainView,s)),t.subscriptions.push(vs.commands.registerCommand("commitMessageEditor.openSettingsPage",n.run,n)),t.subscriptions.push(vs.commands.registerCommand("commitMessageEditor.copyFromSCMInputBox",i.run,i)),e.log("Extension has been activated")})}function zp(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
